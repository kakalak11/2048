{"version":3,"sources":["../file:/Applications/Cocos/Creator/3.8.1/CocosCreator.app/Contents/Resources/resources/3d/engine/editor/assets/tools/file:/Applications/Cocos/Creator/3.8.1/CocosCreator.app/Contents/Resources/resources/3d/engine/editor/assets/tools/debug-view-runtime-control.ts","../file:/Users/fe-tu/Desktop/Personal/2048/assets/scripts/file:/Users/fe-tu/Desktop/Personal/2048/assets/scripts/DebugNodeInfo.ts","../file:/Users/fe-tu/Desktop/Personal/2048/assets/scripts/file:/Users/fe-tu/Desktop/Personal/2048/assets/scripts/DragAndDrop.ts","../file:/Users/fe-tu/Desktop/Personal/2048/assets/scripts/file:/Users/fe-tu/Desktop/Personal/2048/assets/scripts/GameManager.ts","../file:/Users/fe-tu/Desktop/Personal/2048/assets/scripts/file:/Users/fe-tu/Desktop/Personal/2048/assets/scripts/HighscorePopup.ts","../file:/Users/fe-tu/Desktop/Personal/2048/assets/scripts/file:/Users/fe-tu/Desktop/Personal/2048/assets/scripts/HighscoreStorage.ts","../file:/Users/fe-tu/Desktop/Personal/2048/assets/scripts/file:/Users/fe-tu/Desktop/Personal/2048/assets/scripts/LevelManager.ts","../file:/Users/fe-tu/Desktop/Personal/2048/assets/scripts/file:/Users/fe-tu/Desktop/Personal/2048/assets/scripts/MenuManager.ts","../file:/Users/fe-tu/Desktop/Personal/2048/assets/scripts/file:/Users/fe-tu/Desktop/Personal/2048/assets/scripts/NumberTileManager.ts","../file:/Users/fe-tu/Desktop/Personal/2048/assets/scripts/file:/Users/fe-tu/Desktop/Personal/2048/assets/scripts/PopupManager.ts"],"names":["ccclass","_decorator","property","DebugViewRuntimeControl","_dec","_dec2","Node","_dec3","_dec4","_class","_class2","_Component","_inheritsLoose","_this","_len","arguments","length","args","Array","_key","call","apply","concat","_initializerDefineProperty","_descriptor","_assertThisInitialized","_descriptor2","_descriptor3","_single","strSingle","strComposite","strMisc","compositeModeToggleList","singleModeToggleList","miscModeToggleList","textComponentList","labelComponentList","textContentList","hideButtonLabel","_currentColorIndex","strColor","color","Color","WHITE","BLACK","RED","GREEN","BLUE","_proto","prototype","start","canvas","node","parent","getComponent","Canvas","console","error","uiTransform","UITransform","halfScreenWidth","width","halfScreenHeight","height","x","y","miscNode","getChildByName","buttonNode","instantiate","name","titleNode","i","newLabel","EnableAllCompositeModeButton","setPosition","setScale","labelComponent","Label","string","overflow","currentRow","newNode","singleModeToggle","textComponent","getComponentInChildren","RichText","on","Toggle","EventType","TOGGLE","toggleSingleMode","Button","CLICK","enableAllCompositeMode","changeColorButton","changeTextColor","HideButton","hideUI","compositeModeToggle","toggleComponent","isChecked","toggleLightingWithAlbedo","toggleCSMColoration","toggleCompositeMode","isTextMatched","textUI","textDescription","tempText","String","findIndex","search","substr","toggle","debugView","director","root","singleMode","enableCompositeMode","lightingWithAlbedo","csmLayerColoration","button","activeValue","active","onLoad","update","deltaTime","Component","_applyDecoratedDescriptor","configurable","enumerable","writable","initializer","_RF","pop","DebugNodeInfo","_label","dt","targetNode","Math","floor","getPosition","DragAndDrop","_isDragging","MOUSE_DOWN","onMouseDown","MOUSE_UP","onMouseUp","MOUSE_MOVE","onMouseMove","event","setPositionTarget","getLocation","worldPos","mouseWorldPos","v3","target","setWorldPosition","TABLE_WIDTH","TABLE_HEIGHT","TABLE_FORMAT","ROW_SIZE","COL_SIZE","MAX_TILES","MOVE_SPEED","col","row","startX","startY","Vec3","moveNumberToPos","numberTile","newPos","Promise","resolve","_","tween","to","position","canAddUp","nextNumberTile","canAdd","value","shaking","_ref","_ref$duration","duration","_ref$distance","distance","_ref$repeat","repeat","dur","shake","by","tweenShake","stop","GameManager","Prefab","_dec5","_dec6","_dec7","_dec8","_dec9","_class3","_descriptor4","_descriptor5","_descriptor6","_descriptor7","_descriptor8","tableData","canMove","currentScore","isPlaying","pool","currentHighestValue","currentRandomLevel","isShowingPopup","input","Input","KEY_DOWN","onKeyDown","fill","map","index","NodePool","numberTilePrefab","put","instance","testWinCondition","spawnRandomTile","testLoseCondition","randomCol","randomRow","updateScore","_this2","allPromises","keyCode","KeyCode","SPACE","moveDown","KEY_A","ARROW_LEFT","moveLeft","KEY_D","ARROW_RIGHT","moveRight","KEY_S","ARROW_DOWN","KEY_W","ARROW_UP","moveUp","all","then","isWin","winPopup","emit","isLost","losePopup","log","globalThis","flatten","reduce","acc","curr","scoreLabel","toString","isFullTable","filter","element","availableMove","currVal","getNumberTile","size","get","removeNumberTile","setParent","data","_Object$assign","Object","assign","getRandomColRow","randomPos","randomPool","slice","randomValue","random","table","manager","NumberTileManager","updateValue","addUpTile","_this3","newValue","levelManager","promises","nextRow","isAddUp","push","nextCol","gameReset","removeAllChildren","onRetryGame","gameStart","onMenuClick","menuPopup","HighscorePopup","showPopup","hidePopup","highscoreData","JSON","parse","sys","localStorage","getItem","STORAGE_KEY","sort","a","b","score","dataTable","forEach","dataCell","getComponentsInChildren","label","UIOpacity","opacity","BlockInputEvents","enabled","HighscoreStorage","EditBox","submitButton","interactable","onEditEnd","playerName","submitScore","_GameManager$instance","_GameManager$instance2","userData","find","_GameManager$instance3","_GameManager$instance4","setItem","stringify","tweenBezier2DTo","c1","c2","opts","c0x","c0y","c1x","c1y","_targetX","_targetY","aOpts","create","progress","endX","currentX","t","bezier","onUpdate","z","bOpts","endY","currentY","LevelManager","updateLevel","resetLevel","levelUI","children","levelIndex","min","showAnimationLevelUp","levelTile","gradient","content","originalPos","v2","point1","point2","highlightLevelTween","Animation","play","delay","MenuManager","opacityComp","buttonComps","isStartGame","playButton","SpriteFrame","spriteIndex","log2","Sprite","spriteFrame","numberSpriteFrames","LosePopup","fadeInList","addComponent"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACA,UAAQA,OAAO,GAAeC,UAAU,CAAhCD,OAAR;AAAA,UAAiBE,QAAQ,GAAKD,UAAU,CAAvBC,QAAjB;UAGaC,uBAAuB,uCAAAC,IAAA,GADnCJ,OAAO,CAAC,kCAAD,CAC4BI,EADQC,KAAA,GAEvCH,QAAQ,CAACI,IAAD,CADuBF,EACjBG,KAAA,GAEdL,QAAQ,CAACI,IAAD,CAHuBF,EAGjBI,KAAA,GAEdN,QAAQ,CAACI,IAAD,CALuBF,EAKjBA,IAAA,CAAAK,MAAA,IAAAC,OAAA,0BAAAC;AAAAC,QAAAA,cAAA,CAAAT,uBAAA,EAAAQ,UAAA,CAAAC;;AAAA,iBAAAT,uBAAA;AAAA,cAAAU,KAAA;;AAAA,mBAAAC,IAAA,GAAAC,SAAA,CAAAC,QAAAC,IAAA,OAAAC,MAAAJ,OAAAK,IAAA,IAAA,EAAAA,IAAA,GAAAL,IAAA,EAAAK,IAAA,EAAA;AAAAF,YAAAA,IAAA,CAAAE,IAAA,CAAAF,GAAAF,SAAA,CAAAI,IAAA,CAAAF;;;AAAAJ,UAAAA,KAAA,GAAAF,UAAA,CAAAS,IAAAT,CAAAU,KAAAV,CAAAA,UAAAA,SAAAW,OAAAL,KAAAN,SAAAE;;AAAAU,UAAAA,0BAAA,CAAAV,KAAA,uBAAA,EAAAW,WAAA,EAAAC,sBAAA,CAAAZ,KAAA,CAAA,CAAAU;;AAAAA,UAAAA,0BAAA,CAAAV,KAAA,oBAAA,EAAAa,YAAA,EAAAD,sBAAA,CAAAZ,KAAA,CAAA,CAAAU;;AAAAA,UAAAA,0BAAA,CAAAV,KAAA,gCAAA,EAAAc,YAAA,EAAAF,sBAAA,CAAAZ,KAAA,CAAA,CAAAU;;AAAAV,UAAAA,KAAA,CAElBe,OAFkBf,GAEA,CAFAA;AAECA,UAAAA,KAAA,CAERgB,SAFQhB,GAEc,CAC1B,iBAD0B,EAE1B,cAF0B,EAG1B,eAH0B,EAI1B,gBAJ0B,EAK1B,gBAL0B,EAM1B,eAN0B,EAO1B,WAP0B,EAQ1B,KAR0B,EAS1B,KAT0B,EAU1B,aAV0B,EAW1B,eAX0B,EAY1B,cAZ0B,EAc1B,iBAd0B,EAe1B,kBAf0B,EAgB1B,mBAhB0B,EAiB1B,YAjB0B,EAkB1B,eAlB0B,EAmB1B,gBAnB0B,EAoB1B,cApB0B,EAqB1B,UArB0B,EAsB1B,WAtB0B,EAuB1B,oBAvB0B,EAwB1B,KAxB0B,EA0B1B,gBA1B0B,EA2B1B,iBA3B0B,EA4B1B,YA5B0B,EA6B1B,aA7B0B,EA8B1B,cA9B0B,EA+B1B,SA/B0B,EAgC1B,UAhC0B,EAiC1B,WAjC0B,EAkC1B,QAlC0B,EAmC1B,IAnC0B,EAqC1B,SArC0B,EAsC1B,yBAtC0B,EAuC1B,0BAvC0B,EAwC1B,sBAxC0B,EAyC1B,uBAzC0B,EA0C1B,cA1C0B,EA2C1B,0BA3C0B,EA4C1B,uBA5C0B,EA6C1B,cA7C0B,EA+C1B,KA/C0B,CAFdA;AAkDfA,UAAAA,KAAA,CACOiB,YADPjB,GACgC,CAC7B,gBAD6B,EAE7B,iBAF6B,EAG7B,aAH6B,EAI7B,cAJ6B,EAK7B,UAL6B,EAM7B,WAN6B,EAO7B,QAP6B,EAQ7B,IAR6B,EAU7B,YAV6B,EAW7B,KAX6B,EAa7B,cAb6B,EAc7B,kBAd6B,EAgB7B,SAhB6B,EAiB7B,kBAjB6B,EAkB7B,mBAlB6B,EAmB7B,mBAnB6B,EAoB7B,IApB6B,CADhCA;AAsBAA,UAAAA,KAAA,CACOkB,OADPlB,GAC2B,CACxB,sBADwB,EAExB,sBAFwB,CAD3BA;AAIAA,UAAAA,KAAA,CAEOmB,uBAFPnB,GAEyC,EAFzCA;AAE2CA,UAAAA,KAAA,CACpCoB,oBADoCpB,GACL,EADKA;AACHA,UAAAA,KAAA,CACjCqB,kBADiCrB,GACJ,EADIA;AACFA,UAAAA,KAAA,CAC/BsB,iBAD+BtB,GACC,EADDA;AACGA,UAAAA,KAAA,CAClCuB,kBADkCvB,GACJ,EADIA;AACFA,UAAAA,KAAA,CAChCwB,eADgCxB,GACJ,EADIA;AACFA,UAAAA,KAAA,CAC9ByB,eAD8BzB,SAAAA;AACfA,UAAAA,KAAA,CA8Lf0B,kBA9Le1B,GA8LM,CA9LNA;AA8LOA,UAAAA,KAAA,CACtB2B,QADsB3B,GACD,CACzB,iBADyB,EAEzB,iBAFyB,EAGzB,iBAHyB,EAIzB,iBAJyB,EAKzB,iBALyB,CADCA;AAO7BA,UAAAA,KAAA,CACO4B,KADP5B,GACwB,CACrB6B,KAAK,CAACC,KADe,EAErBD,KAAK,CAACE,KAFe,EAGrBF,KAAK,CAACG,GAHe,EAIrBH,KAAK,CAACI,KAJe,EAKrBJ,KAAK,CAACK,IALe,CADxBlC;AAOA,iBAAAA,KAAA;;;AAAA,YAAAmC,MAAA,GAAA7C,uBAAA,CAAA8C,SAAA;;AAAAD,QAAAA,MAAA,CA3MDE,KA2MCF,GA3MD,SAAAE,KAAA,GAAQ;;AAEJ,cAAMC,MAAM,GAAG,KAAKC,IAAL,CAAUC,MAAV,CAAiBC,YAAjB,CAA8BC,MAA9B,CAAf;;AACA,cAAI,CAACJ,MAAL,EAAa;AACTK,YAAAA,OAAO,CAACC,KAARD,CAAc,sDAAdA;AACA;;;AAGJ,cAAME,WAAW,GAAG,KAAKN,IAAL,CAAUC,MAAV,CAAiBC,YAAjB,CAA8BK,WAA9B,CAApB;AACA,cAAMC,eAAe,GAAGF,WAAW,CAACG,KAAZH,GAAoB,GAA5C;AACA,cAAMI,gBAAgB,GAAGJ,WAAW,CAACK,MAAZL,GAAqB,GAA9C;AAEA,cAAIM,CAAC,GAAG,CAACJ,eAAD,GAAmBA,eAAe,GAAG,GAA7C;AAAA,cAAkDK,CAAC,GAAGH,gBAAgB,GAAGA,gBAAgB,GAAG,GAA5F;AACA,cAAMD,KAAK,GAAG,GAAd;AAAA,cAAmBE,MAAM,GAAG,EAA5B,CAbI;;AAgBJ,cAAMG,QAAQ,GAAG,KAAKd,IAAL,CAAUe,cAAV,CAAyB,UAAzB,CAAjB;AACA,cAAMC,UAAU,GAAGC,WAAW,CAACH,QAAD,CAA9B;AACAE,UAAAA,UAAU,CAACf,MAAXe,GAAoB,KAAKhB,IAAzBgB;AACAA,UAAAA,UAAU,CAACE,IAAXF,GAAkB,SAAlBA;AACA,cAAMG,SAAS,GAAGF,WAAW,CAACH,QAAD,CAA7B;AACAK,UAAAA,SAAS,CAAClB,MAAVkB,GAAmB,KAAKnB,IAAxBmB;AACAA,UAAAA,SAAS,CAACD,IAAVC,GAAiB,QAAjBA,CAtBI;;AAyBJ,eAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,CAApB,EAAuBA,CAAC,EAAxB,EAA4B;AACxB,gBAAMC,QAAQ,GAAGJ,WAAW,CAAC,KAAKK,4BAAL,CAAkCP,cAAlC,CAAiD,OAAjD,CAAD,CAA5B;AACAM,YAAAA,QAAQ,CAACE,WAATF,CAAqBT,CAAC,IAAIQ,CAAC,GAAG,CAAJA,GAAQ,KAAKX,KAAK,GAAG,CAArBW,GAAyB,GAA7B,CAAtBC,EAAyDR,CAAzDQ,EAA4D,GAA5DA;AACAA,YAAAA,QAAQ,CAACG,QAATH,CAAkB,IAAlBA,EAAwB,IAAxBA,EAA8B,IAA9BA;AACAA,YAAAA,QAAQ,CAACpB,MAAToB,GAAkBF,SAAlBE;;AACA,gBAAMI,eAAc,GAAGJ,QAAQ,CAACnB,YAATmB,CAAsBK,KAAtBL,CAAvB;;AACAI,YAAAA,eAAc,CAACE,MAAfF,GAAwBL,CAAC,GAAG,oCAAH,GAA0C,iCAAnEK;AACAA,YAAAA,eAAc,CAACpC,KAAfoC,GAAuBnC,KAAK,CAACC,KAA7BkC;AACAA,YAAAA,eAAc,CAACG,QAAfH,GAA0B,CAA1BA;AACA,iBAAKzC,kBAAL,CAAwB,KAAKA,kBAAL,CAAwBpB,MAAhD,IAA0D6D,eAA1D;;;AAGJZ,UAAAA,CAAC,IAAIF,MAALE,CArCI;;AAuCJ,cAAIgB,UAAU,GAAG,CAAjB;;AACA,eAAK,IAAIT,EAAC,GAAG,CAAb,EAAgBA,EAAC,GAAG,KAAK3C,SAAL,CAAeb,MAAnC,EAA2CwD,EAAC,IAAIS,UAAU,EAA1D,EAA8D;AAC1D,gBAAIT,EAAC,KAAK,KAAK3C,SAAL,CAAeb,MAAf,IAAyB,CAAnC,EAAsC;AAClCgD,cAAAA,CAAC,IAAIH,KAALG;AACAiB,cAAAA,UAAU,GAAG,CAAbA;;;AAEJ,gBAAMC,OAAO,GAAGV,EAAC,GAAGH,WAAW,CAAC,KAAKc,gBAAN,CAAd,GAAwC,KAAKA,gBAA9D;AACAD,YAAAA,OAAO,CAACP,WAARO,CAAoBlB,CAApBkB,EAAuBjB,CAAC,GAAGF,MAAM,GAAGkB,UAApCC,EAAgD,GAAhDA;AACAA,YAAAA,OAAO,CAACN,QAARM,CAAiB,GAAjBA,EAAsB,GAAtBA,EAA2B,GAA3BA;AACAA,YAAAA,OAAO,CAAC7B,MAAR6B,GAAiB,KAAKC,gBAAL,CAAsB9B,MAAvC6B;AAEA,gBAAME,aAAa,GAAGF,OAAO,CAACG,sBAARH,CAA+BI,QAA/BJ,CAAtB;AACAE,YAAAA,aAAa,CAACL,MAAdK,GAAuB,KAAKvD,SAAL,CAAe2C,EAAf,CAAvBY;AACA,iBAAKjD,iBAAL,CAAuB,KAAKA,iBAAL,CAAuBnB,MAA9C,IAAwDoE,aAAxD;AACA,iBAAK/C,eAAL,CAAqB,KAAKA,eAAL,CAAqBrB,MAA1C,IAAoDoE,aAAa,CAACL,MAAlE;AAEAG,YAAAA,OAAO,CAACK,EAARL,CAAWM,MAAM,CAACC,SAAPD,CAAiBE,MAA5BR,EAAoC,KAAKS,gBAAzCT,EAA2D,IAA3DA;AAEA,iBAAKjD,oBAAL,CAA0BuC,EAA1B,IAA+BU,OAA/B;;;AAGJlB,UAAAA,CAAC,IAAIH,KAALG,CA5DI;;AA8DJ,eAAKU,4BAAL,CAAkCC,WAAlC,CAA8CX,CAAC,GAAG,EAAlD,EAAsDC,CAAtD,EAAyD,GAAzD;AACA,eAAKS,4BAAL,CAAkCE,QAAlC,CAA2C,GAA3C,EAAgD,GAAhD,EAAqD,GAArD;AACA,eAAKF,4BAAL,CAAkCa,EAAlC,CAAqCK,MAAM,CAACH,SAAPG,CAAiBC,KAAtD,EAA6D,KAAKC,sBAAlE,EAA0F,IAA1F;AACA,eAAKpB,4BAAL,CAAkCrB,MAAlC,GAA2Ce,UAA3C;AACA,cAAIS,cAAc,GAAG,KAAKH,4BAAL,CAAkCW,sBAAlC,CAAyDP,KAAzD,CAArB;AACA,eAAK1C,kBAAL,CAAwB,KAAKA,kBAAL,CAAwBpB,MAAhD,IAA0D6D,cAA1D;AAEA,cAAMkB,iBAAiB,GAAG1B,WAAW,CAAC,KAAKK,4BAAN,CAArC;AACAqB,UAAAA,iBAAiB,CAACpB,WAAlBoB,CAA8B/B,CAAC,GAAG,EAAlC+B,EAAsC9B,CAAtC8B,EAAyC,GAAzCA;AACAA,UAAAA,iBAAiB,CAACnB,QAAlBmB,CAA2B,GAA3BA,EAAgC,GAAhCA,EAAqC,GAArCA;AACAA,UAAAA,iBAAiB,CAACR,EAAlBQ,CAAqBH,MAAM,CAACH,SAAPG,CAAiBC,KAAtCE,EAA6C,KAAKC,eAAlDD,EAAmE,IAAnEA;AACAA,UAAAA,iBAAiB,CAAC1C,MAAlB0C,GAA2B3B,UAA3B2B;AACAlB,UAAAA,cAAc,GAAGkB,iBAAiB,CAACV,sBAAlBU,CAAyCjB,KAAzCiB,CAAjBlB;AACAA,UAAAA,cAAc,CAACE,MAAfF,GAAwB,WAAxBA;AACA,eAAKzC,kBAAL,CAAwB,KAAKA,kBAAL,CAAwBpB,MAAhD,IAA0D6D,cAA1D;AAEA,cAAMoB,UAAU,GAAG5B,WAAW,CAAC,KAAKK,4BAAN,CAA9B;AACAuB,UAAAA,UAAU,CAACtB,WAAXsB,CAAuBjC,CAAC,GAAG,GAA3BiC,EAAgChC,CAAhCgC,EAAmC,GAAnCA;AACAA,UAAAA,UAAU,CAACrB,QAAXqB,CAAoB,GAApBA,EAAyB,GAAzBA,EAA8B,GAA9BA;AACAA,UAAAA,UAAU,CAACV,EAAXU,CAAcL,MAAM,CAACH,SAAPG,CAAiBC,KAA/BI,EAAsC,KAAKC,MAA3CD,EAAmD,IAAnDA;AACAA,UAAAA,UAAU,CAAC5C,MAAX4C,GAAoB,KAAK7C,IAAL,CAAUC,MAA9B4C;AACApB,UAAAA,cAAc,GAAGoB,UAAU,CAACZ,sBAAXY,CAAkCnB,KAAlCmB,CAAjBpB;AACAA,UAAAA,cAAc,CAACE,MAAfF,GAAwB,SAAxBA;AACA,eAAKzC,kBAAL,CAAwB,KAAKA,kBAAL,CAAwBpB,MAAhD,IAA0D6D,cAA1D;AACA,eAAKvC,eAAL,GAAuBuC,cAAvB,CAtFI;;AAyFJZ,UAAAA,CAAC,IAAI,EAALA;;AACA,eAAK,IAAIO,GAAC,GAAG,CAAb,EAAgBA,GAAC,GAAG,KAAKzC,OAAL,CAAaf,MAAjC,EAAyCwD,GAAC,EAA1C,EAA8C;AAC1C,gBAAMU,QAAO,GAAGb,WAAW,CAAC,KAAK8B,mBAAN,CAA3B;;AACAjB,YAAAA,QAAO,CAACP,WAARO,CAAoBlB,CAApBkB,EAAuBjB,CAAC,GAAGF,MAAM,GAAGS,GAApCU,EAAuC,GAAvCA;;AACAA,YAAAA,QAAO,CAACN,QAARM,CAAiB,GAAjBA,EAAsB,GAAtBA,EAA2B,GAA3BA;;AACAA,YAAAA,QAAO,CAAC7B,MAAR6B,GAAiBhB,QAAjBgB;;AAEA,gBAAME,cAAa,GAAGF,QAAO,CAACG,sBAARH,CAA+BI,QAA/BJ,CAAtB;;AACAE,YAAAA,cAAa,CAACL,MAAdK,GAAuB,KAAKrD,OAAL,CAAayC,GAAb,CAAvBY;AACA,iBAAKjD,iBAAL,CAAuB,KAAKA,iBAAL,CAAuBnB,MAA9C,IAAwDoE,cAAxD;AACA,iBAAK/C,eAAL,CAAqB,KAAKA,eAAL,CAAqBrB,MAA1C,IAAoDoE,cAAa,CAACL,MAAlE;;AAEA,gBAAMqB,eAAe,GAAGlB,QAAO,CAAC5B,YAAR4B,CAAqBM,MAArBN,CAAxB;;AACAkB,YAAAA,eAAe,CAACC,SAAhBD,GAA4B5B,GAAC,GAAG,IAAH,GAAU,KAAvC4B;;AACAlB,YAAAA,QAAO,CAACK,EAARL,CAAWM,MAAM,CAACC,SAAPD,CAAiBE,MAA5BR,EAAoCV,GAAC,GAAG,KAAK8B,wBAAR,GAAmC,KAAKC,mBAA7ErB,EAAkG,IAAlGA;;AACA,iBAAKhD,kBAAL,CAAwBsC,GAAxB,IAA6BU,QAA7B;WAxGA;;;AA4GJjB,UAAAA,CAAC,IAAI,GAALA;;AACA,eAAK,IAAIO,GAAC,GAAG,CAAb,EAAgBA,GAAC,GAAG,KAAK1C,YAAL,CAAkBd,MAAtC,EAA8CwD,GAAC,EAA/C,EAAmD;AAC/C,gBAAMU,SAAO,GAAGV,GAAC,GAAGH,WAAW,CAAC,KAAK8B,mBAAN,CAAd,GAA2C,KAAKA,mBAAjE;;AACAjB,YAAAA,SAAO,CAACP,WAARO,CAAoBlB,CAApBkB,EAAuBjB,CAAC,GAAGF,MAAM,GAAGS,GAApCU,EAAuC,GAAvCA;;AACAA,YAAAA,SAAO,CAACN,QAARM,CAAiB,GAAjBA,EAAsB,GAAtBA,EAA2B,GAA3BA;;AACAA,YAAAA,SAAO,CAAC7B,MAAR6B,GAAiB,KAAKiB,mBAAL,CAAyB9C,MAA1C6B;;AAEA,gBAAME,eAAa,GAAGF,SAAO,CAACG,sBAARH,CAA+BI,QAA/BJ,CAAtB;;AACAE,YAAAA,eAAa,CAACL,MAAdK,GAAuB,KAAKtD,YAAL,CAAkB0C,GAAlB,CAAvBY;AACA,iBAAKjD,iBAAL,CAAuB,KAAKA,iBAAL,CAAuBnB,MAA9C,IAAwDoE,eAAxD;AACA,iBAAK/C,eAAL,CAAqB,KAAKA,eAAL,CAAqBrB,MAA1C,IAAoDoE,eAAa,CAACL,MAAlE;;AAEAG,YAAAA,SAAO,CAACK,EAARL,CAAWM,MAAM,CAACC,SAAPD,CAAiBE,MAA5BR,EAAoC,KAAKsB,mBAAzCtB,EAA8D,IAA9DA;;AAEA,iBAAKlD,uBAAL,CAA6BwC,GAA7B,IAAkCU,SAAlC;;AAEP,SA+EAlC;;AA/EAA,QAAAA,MAAA,CAEDyD,aAFCzD,GAED,SAAAyD,aAAA,CAAcC,MAAd,EAAsBC,eAAtB,EAAiD;AAC7C,cAAIC,QAAQ,GAAG,IAAIC,MAAJ,CAAWH,MAAX,CAAf;AACA,cAAMI,SAAS,GAAGF,QAAQ,CAACG,MAATH,CAAgB,GAAhBA,CAAlB;;AACA,cAAIE,SAAS,KAAK,CAAC,CAAnB,EAAsB;AAClB,mBAAOJ,MAAM,KAAKC,eAAlB;AACH,WAFD,MAEO;AACHC,YAAAA,QAAQ,GAAGA,QAAQ,CAACI,MAATJ,CAAgBE,SAAS,GAAG,CAA5BF,CAAXA;AACAA,YAAAA,QAAQ,GAAGA,QAAQ,CAACI,MAATJ,CAAgB,CAAhBA,EAAmBA,QAAQ,CAACG,MAATH,CAAgB,GAAhBA,CAAnBA,CAAXA;AACA,mBAAOA,QAAQ,KAAKD,eAApB;;AAEP,SAZA3D;;AAYAA,QAAAA,MAAA,CACD2C,gBADC3C,GACD,SAAA2C,gBAAA,CAAiBsB,MAAjB,EAAiC;AAC7B,cAAMC,SAAS,GAAGC,QAAQ,CAACC,IAATD,CAAeD,SAAjC;AACA,cAAM9B,aAAa,GAAG6B,MAAM,CAAC5B,sBAAP4B,CAA8B3B,QAA9B2B,CAAtB;;AACA,eAAK,IAAIzC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAK3C,SAAL,CAAeb,MAAnC,EAA2CwD,CAAC,EAA5C,EAAgD;AAC5C,gBAAI,KAAKiC,aAAL,CAAmBrB,aAAa,CAACL,MAAjC,EAAyC,KAAKlD,SAAL,CAAe2C,CAAf,CAAzC,CAAJ,EAAiE;AAC7D0C,cAAAA,SAAS,CAACG,UAAVH,GAAuB1C,CAAvB0C;;;AAGX,SATAlE;;AASAA,QAAAA,MAAA,CACDwD,mBADCxD,GACD,SAAAwD,mBAAA,CAAoBS,MAApB,EAAoC;AAChC,cAAMC,SAAS,GAAGC,QAAQ,CAACC,IAATD,CAAeD,SAAjC;AACA,cAAM9B,aAAa,GAAG6B,MAAM,CAAC5B,sBAAP4B,CAA8B3B,QAA9B2B,CAAtB;;AACA,eAAK,IAAIzC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAK1C,YAAL,CAAkBd,MAAtC,EAA8CwD,CAAC,EAA/C,EAAmD;AAC/C,gBAAI,KAAKiC,aAAL,CAAmBrB,aAAa,CAACL,MAAjC,EAAyC,KAAKjD,YAAL,CAAkB0C,CAAlB,CAAzC,CAAJ,EAAoE;AAChE0C,cAAAA,SAAS,CAACI,mBAAVJ,CAA8B1C,CAA9B0C,EAAiCD,MAAM,CAACZ,SAAxCa;;;AAGX,SATAlE;;AASAA,QAAAA,MAAA,CACDsD,wBADCtD,GACD,SAAAsD,wBAAA,CAAyBW,MAAzB,EAAyC;AACrC,cAAMC,SAAS,GAAGC,QAAQ,CAACC,IAATD,CAAeD,SAAjC;AACAA,UAAAA,SAAS,CAACK,kBAAVL,GAA+BD,MAAM,CAACZ,SAAtCa;AACH,SAJAlE;;AAIAA,QAAAA,MAAA,CACDuD,mBADCvD,GACD,SAAAuD,mBAAA,CAAoBU,MAApB,EAAoC;AAChC,cAAMC,SAAS,GAAGC,QAAQ,CAACC,IAATD,CAAeD,SAAjC;AACAA,UAAAA,SAAS,CAACM,kBAAVN,GAA+BD,MAAM,CAACZ,SAAtCa;AACH,SAJAlE;;AAIAA,QAAAA,MAAA,CACD8C,sBADC9C,GACD,SAAA8C,sBAAA,CAAuB2B,MAAvB,EAAuC;AACnC,cAAMP,SAAS,GAAGC,QAAQ,CAACC,IAATD,CAAeD,SAAjC;AACAA,UAAAA,SAAS,CAACpB,sBAAVoB,CAAiC,IAAjCA;;AACA,eAAK,IAAI1C,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKxC,uBAAL,CAA6BhB,MAAjD,EAAyDwD,CAAC,EAA1D,EAA8D;AAC1D,gBAAM4B,gBAAe,GAAG,KAAKpE,uBAAL,CAA6BwC,CAA7B,EAAgClB,YAAhC,CAA6CkC,MAA7C,CAAxB;;AACAY,YAAAA,gBAAe,CAACC,SAAhBD,GAA4B,IAA5BA;;;AAGJ,cAAIA,eAAe,GAAG,KAAKlE,kBAAL,CAAwB,CAAxB,EAA2BoB,YAA3B,CAAwCkC,MAAxC,CAAtB;AACAY,UAAAA,eAAe,CAACC,SAAhBD,GAA4B,KAA5BA;AACAc,UAAAA,SAAS,CAACM,kBAAVN,GAA+B,KAA/BA;AACAd,UAAAA,eAAe,GAAG,KAAKlE,kBAAL,CAAwB,CAAxB,EAA2BoB,YAA3B,CAAwCkC,MAAxC,CAAlBY;AACAA,UAAAA,eAAe,CAACC,SAAhBD,GAA4B,IAA5BA;AACAc,UAAAA,SAAS,CAACK,kBAAVL,GAA+B,IAA/BA;AACH,SAfAlE;;AAeAA,QAAAA,MAAA,CACDkD,MADClD,GACD,SAAAkD,MAAA,CAAOuB,MAAP,EAAuB;AACnB,cAAMlD,SAAS,GAAG,KAAKnB,IAAL,CAAUe,cAAV,CAAyB,QAAzB,CAAlB;AACA,cAAMuD,WAAW,GAAG,CAACnD,SAAS,CAACoD,MAA/B;AACA,eAAK1F,oBAAL,CAA0B,CAA1B,EAA6BoB,MAA7B,CAAoCsE,MAApC,GAA6CD,WAA7C;AACA,eAAKxF,kBAAL,CAAwB,CAAxB,EAA2BmB,MAA3B,CAAkCsE,MAAlC,GAA2CD,WAA3C;AACA,eAAK1F,uBAAL,CAA6B,CAA7B,EAAgCqB,MAAhC,CAAuCsE,MAAvC,GAAgDD,WAAhD;AACA,eAAKhD,4BAAL,CAAkCrB,MAAlC,CAAyCsE,MAAzC,GAAkDD,WAAlD;AACAnD,UAAAA,SAAS,CAACoD,MAAVpD,GAAmBmD,WAAnBnD;AACA,eAAKjC,eAAL,CAAqByC,MAArB,GAA8B2C,WAAW,GAAG,SAAH,GAAe,SAAxD;AACH,SAVA1E;;AAUAA,QAAAA,MAAA,CAiBDgD,eAjBChD,GAiBD,SAAAgD,eAAA,CAAgByB,MAAhB,EAAgC;AAC5B,eAAKlF,kBAAL;;AACA,cAAI,KAAKA,kBAAL,IAA2B,KAAKC,QAAL,CAAcxB,MAA7C,EAAqD;AACjD,iBAAKuB,kBAAL,GAA0B,CAA1B;;;AAEJ,eAAK,IAAIiC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKrC,iBAAL,CAAuBnB,MAA3C,EAAmDwD,CAAC,EAApD,EAAwD;AACpD,iBAAKrC,iBAAL,CAAuBqC,CAAvB,EAA0BO,MAA1B,GAAmC,KAAKvC,QAAL,CAAc,KAAKD,kBAAnB,IAAyC,KAAKF,eAAL,CAAqBmC,CAArB,CAAzC,GAAmE,UAAtG;;;AAEJ,eAAK,IAAIA,GAAC,GAAG,CAAb,EAAgBA,GAAC,GAAG,KAAKpC,kBAAL,CAAwBpB,MAA5C,EAAoDwD,GAAC,EAArD,EAAyD;AACrD,iBAAKpC,kBAAL,CAAwBoC,GAAxB,EAA2B/B,KAA3B,GAAmC,KAAKA,KAAL,CAAW,KAAKF,kBAAhB,CAAnC;;AAEP,SA5BAS;;AA4BAA,QAAAA,MAAA,CAED4E,MAFC5E,GAED,SAAA4E,MAAA,GAAS,CACR,CAHA5E;;AAGAA,QAAAA,MAAA,CACD6E,MADC7E,GACD,SAAA6E,MAAA,CAAOC,SAAP,EAA0B,CACzB,CAFA9E;;AAEA,eAAA7C,uBAAA;QAxTwC4H,UAK1BrH,GALmCc,WAAA,GAAAwG,yBAAA,CAAAtH,OAAA,CAAAuC,SAAA,uBAAA,GAAA5C,MAAA;AAAA4H,QAAAA,YAAA;AAAAC,QAAAA,UAAA;AAAAC,QAAAA,QAAA;AAAAC,QAAAA,WAAA,WAAAA;AAAA,iBAEf,IAFe;;OAAA,CAAA5G,EAEXE,YAAA,GAAAsG,yBAAA,CAAAtH,OAAA,CAAAuC,SAAA,oBAAA,GAAA1C,MAAA;AAAA0H,QAAAA,YAAA;AAAAC,QAAAA,UAAA;AAAAC,QAAAA,QAAA;AAAAC,QAAAA,WAAA,WAAAA;AAAA,iBAEP,IAFO;;OAAA,CAFW5G,EAIdG,YAAA,GAAAqG,yBAAA,CAAAtH,OAAA,CAAAuC,SAAA,gCAAA,GAAAzC,MAAA;AAAAyH,QAAAA,YAAA;AAAAC,QAAAA,UAAA;AAAAC,QAAAA,QAAA;AAAAC,QAAAA,WAAA,WAAAA;AAAA,iBAEQ,IAFR;;OAAA,CACrB1H,GACiCA,OADjC,CAAA,CAAAN,IACiCK;;cAmTnD,CAAA4H,IAAAC;;;;;;;;;;;;;;;;;;;;;;;;;;AC5TD,UAAQtI,OAAO,GAAeC,UAAU,CAAhCD,OAAR;AAAA,UAAiBE,QAAQ,GAAKD,UAAU,CAAvBC,QAAjB;UAGaqI,aAAa,6BAAAnI,IAAA,GADzBJ,OAAO,CAAC,eAAD,CACkBI,EADDC,KAAA,GAGpBH,QAAQ,CAACI,IAAD,CAFaF,EAEPA,IAAA,CAAAK,MAAA,IAAAC,OAAA,0BAAAC;AAAAC,QAAAA,cAAA,CAAA2H,aAAA,EAAA5H,UAAA,CAAAC;;AAAA,iBAAA2H,aAAA;AAAA,cAAA1H,KAAA;;AAAA,mBAAAC,IAAA,GAAAC,SAAA,CAAAC,QAAAC,IAAA,OAAAC,MAAAJ,OAAAK,IAAA,IAAA,EAAAA,IAAA,GAAAL,IAAA,EAAAK,IAAA,EAAA;AAAAF,YAAAA,IAAA,CAAAE,IAAA,CAAAF,GAAAF,SAAA,CAAAI,IAAA,CAAAF;;;AAAAJ,UAAAA,KAAA,GAAAF,UAAA,CAAAS,IAAAT,CAAAU,KAAAV,CAAAA,UAAAA,SAAAW,OAAAL,KAAAN,SAAAE;;AAAAU,UAAAA,0BAAA,CAAAV,KAAA,cAAA,EAAAW,WAAA,EAAAC,sBAAA,CAAAZ,KAAA,CAAA,CAAAU;;AAAAV,UAAAA,KAAA,CAEf2H,MAFe3H,SAAAA;AAET,iBAAAA,KAAA;;;AAAA,YAAAmC,MAAA,GAAAuF,aAAA,CAAAtF,SAAA;;AAAAD,QAAAA,MAAA,CAENE,KAFMF,GAEN,SAAAE,KAAA,GAAQ;AACJ,eAAKsF,MAAL,GAAc,KAAKpF,IAAL,CAAUE,YAAV,CAAuBwB,KAAvB,CAAd;AACH,SAJK9B;;AAILA,QAAAA,MAAA,CAED6E,MAFC7E,GAED,SAAA6E,MAAA,CAAOY,EAAP,EAAyB;AACrB,cAAI,CAAC,KAAKC,UAAV,EAAsB;AAClB,iBAAKF,MAAL,CAAYzD,MAAZ,GAAqB,aAArB;AACA;;;AAGJ,cAAI,KAAKyD,MAAT,EAAiB;AACb,iBAAKA,MAAL,CAAYzD,MAAZ,2BAA2C4D,IAAI,CAACC,KAALD,CAAW,KAAKD,UAAL,CAAgBG,WAAhB,GAA8B7E,CAAzC2E,cAAmDA,IAAI,CAACC,KAALD,CAAW,KAAKD,UAAL,CAAgBG,WAAhB,GAA8B5E,CAAzC0E,CAA9F;;AAEP,SAXA3F;;AAWA,eAAAuF,aAAA;QAnB8BR,UAEhBrH,EAFyBc,WAAA,GAAAwG,yBAAA,CAAAtH,OAAA,CAAAuC,SAAA,cAAA,GAAA5C,MAAA;AAAA4H,QAAAA,YAAA;AAAAC,QAAAA,UAAA;AAAAC,QAAAA,QAAA;AAAAC,QAAAA,WAAA;OAAA,CAEzB1H,EAFyBA,OAEzB,CAAA,CAAAN,IAFyBK;;cAqB3C,CAAA4H,IAAAC;;;;;;;;;;;;;;;;;;;;;;;;;;ACxBD,UAAQtI,OAAO,GAAeC,UAAU,CAAhCD,OAAR;AAAA,UAAiBE,QAAQ,GAAKD,UAAU,CAAvBC,QAAjB;UAGa4I,WAAW,2BAAA1I,IAAA,GADvBJ,OAAO,CAAC,aAAD,CACgBI,EADDC,KAAA,GAGlBH,QAAQ,CAACI,IAAD,CAFWF,EAELA,IAAA,CAAAK,MAAA,IAAAC,OAAA,0BAAAC;AAAAC,QAAAA,cAAA,CAAAkI,WAAA,EAAAnI,UAAA,CAAAC;;AAAA,iBAAAkI,WAAA;AAAA,cAAAjI,KAAA;;AAAA,mBAAAC,IAAA,GAAAC,SAAA,CAAAC,QAAAC,IAAA,OAAAC,MAAAJ,OAAAK,IAAA,IAAA,EAAAA,IAAA,GAAAL,IAAA,EAAAK,IAAA,EAAA;AAAAF,YAAAA,IAAA,CAAAE,IAAA,CAAAF,GAAAF,SAAA,CAAAI,IAAA,CAAAF;;;AAAAJ,UAAAA,KAAA,GAAAF,UAAA,CAAAS,IAAAT,CAAAU,KAAAV,CAAAA,UAAAA,SAAAW,OAAAL,KAAAN,SAAAE;;AAAAU,UAAAA,0BAAA,CAAAV,KAAA,UAAA,EAAAW,WAAA,EAAAC,sBAAA,CAAAZ,KAAA,CAAA,CAAAU;;AAAAV,UAAAA,KAAA,CACfkI,WADelI,SAAAA;AACJ,iBAAAA,KAAA;;;AAAA,YAAAmC,MAAA,GAAA8F,WAAA,CAAA7F,SAAA;;AAAAD,QAAAA,MAAA,CAEDE,KAFCF,GAEX,SAAAE,KAAA,GAAwB;AACpB,eAAKE,IAAL,CAAUmC,EAAV,CAAajF,IAAI,CAACmF,SAALnF,CAAe0I,UAA5B,EAAwC,KAAKC,WAA7C,EAA0D,IAA1D;AACA,eAAK7F,IAAL,CAAUmC,EAAV,CAAajF,IAAI,CAACmF,SAALnF,CAAe4I,QAA5B,EAAsC,KAAKC,SAA3C,EAAsD,IAAtD;AACA,eAAK/F,IAAL,CAAUmC,EAAV,CAAajF,IAAI,CAACmF,SAALnF,CAAe8I,UAA5B,EAAwC,KAAKC,WAA7C,EAA0D,IAA1D;AACH,SANUrG;;AAMVA,QAAAA,MAAA,CAEDiG,WAFCjG,GAED,SAAAiG,WAAA,CAAYK,KAAZ,EAA+B;AAC3B,eAAKP,WAAL,GAAmB,IAAnB;AACA,eAAKQ,iBAAL,CAAuBD,KAAK,CAACE,WAANF,EAAvB;AACH,SALAtG;;AAKAA,QAAAA,MAAA,CAEDqG,WAFCrG,GAED,SAAAqG,WAAA,CAAYC,KAAZ,EAA+B;AAC3B,cAAI,KAAKP,WAAT,EAAsB;AAClB,iBAAKQ,iBAAL,CAAuBD,KAAK,CAACE,WAANF,EAAvB;;AAEP,SANAtG;;AAMAA,QAAAA,MAAA,CAEDmG,SAFCnG,GAED,SAAAmG,SAAA,CAAUG,KAAV,EAA6B;AACzB,eAAKP,WAAL,GAAmB,KAAnB;AACH,SAJA/F;;AAIAA,QAAAA,MAAA,CAEDuG,iBAFCvG,GAED,SAAAuG,iBAAA,CAAkBE,QAAlB,EAA4B;AACxB,cAAMC,aAAa,GAAGC,EAAE,CAACF,QAAQ,CAACzF,CAAV,EAAayF,QAAQ,CAACxF,CAAtB,EAAyB,CAAzB,CAAxB;AACA,eAAK2F,MAAL,CAAYC,gBAAZ,CAA6BH,aAA7B;AACH,SALA1G;;AAKA,eAAA8F,WAAA;QA7B4Bf,UAEdrH,EAFuBc,WAAA,GAAAwG,yBAAA,CAAAtH,OAAA,CAAAuC,SAAA,UAAA,GAAA5C,MAAA;AAAA4H,QAAAA,YAAA;AAAAC,QAAAA,UAAA;AAAAC,QAAAA,QAAA;AAAAC,QAAAA,WAAA;OAAA,CAEvB1H,EAFuBA,OAEvB,CAAA,CAAAN,IAFuBK;;cA+BzC,CAAA4H,IAAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACjCD,UAAQtI,OAAO,GAAeC,UAAU,CAAhCD,OAAR;AAAA,UAAiBE,QAAQ,GAAKD,UAAU,CAAvBC,QAAjB;AAEA,UAAM4J,WAAW,GAAG,GAApB;AAAA,UAAyBC,YAAY,GAAG,GAAxC;AACA,UAAMC,YAAY,GAAG,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,CAArB;AACA,UAAMC,QAAQ,GAAGF,YAAY,GAAGC,YAAY,CAAChJ,MAA7C;AACA,UAAMkJ,QAAQ,GAAGJ,WAAW,GAAGE,YAAY,CAAC,CAAD,CAA3C;AACA,UAAMG,SAAS,GAAGH,YAAY,CAAChJ,MAAbgJ,GAAsBA,YAAY,CAAC,CAAD,CAApD;AACA,UAAMI,UAAU,GAAG,GAAnB;;AAEA,eAASvB,WAAT,CAAqBwB,GAArB,EAA0BC,GAA1B,EAA+B;AAC3B,YAAMC,MAAM,GAAG,CAAC,CAACP,YAAY,CAAChJ,MAAd,GAAuB,CAAvB,GAA2B,GAA5B,IAAmCkJ,QAAlD;AACA,YAAMM,MAAM,GAAG,CAACR,YAAY,CAAC,CAAD,CAAZA,GAAkB,CAAlBA,GAAsB,GAAvB,IAA8BC,QAA7C;AAEA,eAAO,IAAIQ,IAAJ,CAASF,MAAM,GAAGL,QAAQ,GAAGG,GAA7B,EAAkCG,MAAM,GAAGP,QAAQ,GAAGK,GAAtD,EAA2D,CAA3D,CAAP;;;AAGJ,eAASI,eAAT,CAAyBC,UAAzB,EAAqCC,MAArC,EAA6C;AACzC,eAAO,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,CAAV,EAAgB;AAC/BJ,UAAAA,UAAU,CAAC,WAAD,CAAVA,GAA0BK,KAAK,CAACL,UAAD,CAALK,CACrBC,EADqBD,CAClBZ,UAAU,GAAG,CADKY,EACF;AAAEE,YAAAA,QAAQ,EAAEN;AAAZ,WADEI,EAErB5J,IAFqB4J,CAEhB,YAAM;AACRL,YAAAA,UAAU,CAAC,WAAD,CAAVA,GAA0B,IAA1BA;AACAG,YAAAA,OAAO,CAACH,UAAD,CAAPG;AACH,WALqBE,EAMrB9H,KANqB8H,EAA1BL;AAOH,SARM,CAAP;;;AAWJ,eAASQ,QAAT,CAAkBC,cAAlB,EAAkCT,UAAlC,EAA8C;AAC1C,eAAOS,cAAc,IAAIA,cAAc,CAACC,MAAjCD,IAA2CA,cAAc,KAAKT,UAA9DS,IAA4EA,cAAc,CAACE,KAAfF,IAAwBT,UAAU,CAACW,KAAtH;;;AAGJ,eAASC,OAAT,CAAiBnI,IAAjB,EAA2BoI,IAA3B,EAA6E;AAAA,YAAAC,aAAA,GAAAD,IAAA,CAA9CE,QAA8C;AAAA,YAA9CA,QAAQ,GAAAD,aAAA,WAAAA,GAAG,IAAHA,GAAOA,aAA+B;AAAA,YAA/BE,aAAA,GAAAH,IAAA,CAAEI,QAA6B;AAAA,YAA7BA,QAAQ,GAAAD,aAAA,WAAAA,GAAG,EAAHA,GAAKA,aAAgB;AAAA,YAAhBE,WAAA,GAAAL,IAAA,CAAEM,MAAc;AAAA,YAAdA,MAAM,GAAAD,WAAA,WAAAA,GAAG,CAAHA,GAAIA,WAAI;AACzE,YAAI,CAACzI,IAAI,CAAC,aAAD,CAAT,EAA0BA,IAAI,CAAC,aAAD,CAAJA,GAAsBA,IAAI,CAACyF,WAALzF,EAAtBA;AAC1B,YAAM2I,GAAG,GAAGL,QAAQ,GAAG,CAAvB;AACA,YAAMM,KAAK,GAAGhB,KAAK,GACdiB,EADSjB,CACNe,GADMf,EACD;AAAEE,UAAAA,QAAQ,EAAEvB,EAAE,CAAC,CAAD,EAAIiC,QAAJ;AAAd,SADCZ,EAETiB,EAFSjB,CAENe,GAFMf,EAED;AAAEE,UAAAA,QAAQ,EAAEvB,EAAE,CAAC,CAAD,EAAI,CAACiC,QAAL;AAAd,SAFCZ,EAGTiB,EAHSjB,CAGNe,GAHMf,EAGD;AAAEE,UAAAA,QAAQ,EAAEvB,EAAE,CAAC,CAAD,EAAI,CAACiC,QAAL;AAAd,SAHCZ,EAITiB,EAJSjB,CAINe,GAJMf,EAID;AAAEE,UAAAA,QAAQ,EAAEvB,EAAE,CAAC,CAAD,EAAIiC,QAAJ;AAAd,SAJCZ,EAKTiB,EALSjB,CAKNe,GALMf,EAKD;AAAEE,UAAAA,QAAQ,EAAEvB,EAAE,CAACiC,QAAD,EAAW,CAAX;AAAd,SALCZ,EAMTiB,EANSjB,CAMNe,GANMf,EAMD;AAAEE,UAAAA,QAAQ,EAAEvB,EAAE,CAAC,CAACiC,QAAF,EAAY,CAAZ;AAAd,SANCZ,EAOTiB,EAPSjB,CAONe,GAPMf,EAOD;AAAEE,UAAAA,QAAQ,EAAEvB,EAAE,CAAC,CAACiC,QAAF,EAAY,CAAZ;AAAd,SAPCZ,EAQTiB,EARSjB,CAQNe,GARMf,EAQD;AAAEE,UAAAA,QAAQ,EAAEvB,EAAE,CAACiC,QAAD,EAAW,CAAX;AAAd,SARCZ,EAST5J,IATS4J,CASJ,YAAM;AACR5H,UAAAA,IAAI,CAACuB,WAALvB,CAAiBA,IAAI,CAAC,aAAD,CAArBA;AACAA,UAAAA,IAAI,CAAC,YAAD,CAAJA,GAAqB,IAArBA;AACH,SAZS4H,CAAd;AAaA,YAAMkB,UAAU,GAAGlB,KAAK,CAAC5H,IAAD,CAAL4H,CAAYc,MAAZd,CAAmBc,MAAnBd,EAA2BgB,KAA3BhB,CAAnB;;AACA,YAAI5H,IAAI,CAAC,YAAD,CAAR,EAAwB;AACpBA,UAAAA,IAAI,CAAC,YAAD,CAAJA,CAAmB+I,IAAnB/I;AACAA,UAAAA,IAAI,CAACuB,WAALvB,CAAiBA,IAAI,CAAC,aAAD,CAArBA;;;AAEJA,QAAAA,IAAI,CAAC,YAAD,CAAJA,GAAqB8I,UAArB9I;AACAA,QAAAA,IAAI,CAAC,YAAD,CAAJA,CAAmBF,KAAnBE;AAEA,eAAO8I,UAAP;;;UAISE,WAAW,2BAAAhM,IAAA,GADvBJ,OAAO,CAAC,aAAD,CACgBI,EADDC,KAAA,GAGlBH,QAAQ,CAACI,IAAD,CAFWF,EAELG,KAAA,GACdL,QAAQ,CAACmM,MAAD,CAHWjM,EAGHI,KAAA,GAEhBN,QAAQ,CAAC4E,KAAD,CALW1E,EAKJkM,KAAA,GACfpM,QAAQ,CAAC4E,KAAD,CANW1E,EAMJmM,KAAA,GAEfrM,QAAQ,CAACI,IAAD,CARWF,EAQLoM,KAAA,GACdtM,QAAQ,CAACI,IAAD,CATWF,EASLqM,KAAA,GACdvM,QAAQ,CAACI,IAAD,CAVWF,EAULsM,KAAA,GAEdxM,QAAQ,CAACI,IAAD,CAZWF,EAYLA,IAAA,CAAAK,MAAA,IAAAC,OAAA,IAAAiM,OAAA,0BAAAhM;AAAAC,QAAAA,cAAA,CAAAwL,WAAA,EAAAzL,UAAA,CAAAC;;AAAA,iBAAAwL,WAAA;AAAA,cAAAvL,KAAA;;AAAA,mBAAAC,IAAA,GAAAC,SAAA,CAAAC,QAAAC,IAAA,OAAAC,MAAAJ,OAAAK,IAAA,IAAA,EAAAA,IAAA,GAAAL,IAAA,EAAAK,IAAA,EAAA;AAAAF,YAAAA,IAAA,CAAAE,IAAA,CAAAF,GAAAF,SAAA,CAAAI,IAAA,CAAAF;;;AAAAJ,UAAAA,KAAA,GAAAF,UAAA,CAAAS,IAAAT,CAAAU,KAAAV,CAAAA,UAAAA,SAAAW,OAAAL,KAAAN,SAAAE;;AAAAU,UAAAA,0BAAA,CAAAV,KAAA,SAAA,EAAAW,WAAA,EAAAC,sBAAA,CAAAZ,KAAA,CAAA,CAAAU;;AAAAA,UAAAA,0BAAA,CAAAV,KAAA,oBAAA,EAAAa,YAAA,EAAAD,sBAAA,CAAAZ,KAAA,CAAA,CAAAU;;AAAAA,UAAAA,0BAAA,CAAAV,KAAA,kBAAA,EAAAc,YAAA,EAAAF,sBAAA,CAAAZ,KAAA,CAAA,CAAAU;;AAAAA,UAAAA,0BAAA,CAAAV,KAAA,cAAA,EAAA+L,YAAA,EAAAnL,sBAAA,CAAAZ,KAAA,CAAA,CAAAU;;AAAAA,UAAAA,0BAAA,CAAAV,KAAA,aAAA,EAAAgM,YAAA,EAAApL,sBAAA,CAAAZ,KAAA,CAAA,CAAAU;;AAAAA,UAAAA,0BAAA,CAAAV,KAAA,YAAA,EAAAiM,YAAA,EAAArL,sBAAA,CAAAZ,KAAA,CAAA,CAAAU;;AAAAA,UAAAA,0BAAA,CAAAV,KAAA,aAAA,EAAAkM,YAAA,EAAAtL,sBAAA,CAAAZ,KAAA,CAAA,CAAAU;;AAAAA,UAAAA,0BAAA,CAAAV,KAAA,gBAAA,EAAAmM,YAAA,EAAAvL,sBAAA,CAAAZ,KAAA,CAAA,CAAAU;;AAAAV,UAAAA,KAAA,CAEfoM,SAFepM,SAAAA;AAENA,UAAAA,KAAA,CACTqM,OADSrM,GACU,IADVA;AACcA,UAAAA,KAAA,CACvBsM,YADuBtM,GACA,CADAA;AACCA,UAAAA,KAAA,CACxBuM,SADwBvM,GACH,KADGA;AACEA,UAAAA,KAAA,CAC1BwM,IAD0BxM,SAAAA;AACtBA,UAAAA,KAAA,CACJyM,mBADIzM,GAC0B,EAD1BA;AAC4BA,UAAAA,KAAA,CAChC0M,kBADgC1M,GACH,CADGA;AACFA,UAAAA,KAAA,CAC9B2M,cAD8B3M,SAAAA;AAChB,iBAAAA,KAAA;;;AAAA,YAAAmC,MAAA,GAAAoJ,WAAA,CAAAnJ,SAAA;;AAAAD,QAAAA,MAAA,CAIJ4E,MAJI5E,GAId,SAAA4E,MAAA,GAAyB;AACrB6F,UAAAA,KAAK,CAAClI,EAANkI,CAASC,KAAK,CAACjI,SAANiI,CAAgBC,QAAzBF,EAAmC,KAAKG,SAAxCH,EAAmD,IAAnDA;AAEA,eAAKR,SAAL,GAAiB,IAAI/L,KAAJ,CAAU8I,YAAY,CAAChJ,MAAvB,EAA+B6M,IAA/B,CAAoC,EAApC,EAAwCC,GAAxC,CAA4C,UAAC/C,CAAD,EAAIgD,KAAJ;AAAS,mBAAK,IAAI7M,KAAJ,CAAU8I,YAAY,CAAC+D,KAAD,CAAtB,EAA+BF,IAA/B,CAAoC,IAApC,CAAL;WAArD,CAAjB;AAEA,eAAKR,IAAL,GAAY,IAAIW,QAAJ,EAAZ;;AAEA,eAAK,IAAIxJ,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,EAApB,EAAwBA,CAAC,EAAzB,EAA6B;AACzB,gBAAMmG,UAAU,GAAGtG,WAAW,CAAC,KAAK4J,gBAAN,CAA9B;AACA,iBAAKZ,IAAL,CAAUa,GAAV,CAAcvD,UAAd;;AAEP,SAfa3H;;AAebA,QAAAA,MAAA,CAEDE,KAFCF,GAED,SAAAE,KAAA,GAAQ;;;;AAIJkJ,UAAAA,WAAW,CAAC+B,QAAZ/B,GAAuB,IAAvBA;AACH,SAPApJ;;AAOAA,QAAAA,MAAA,CAEDoL,gBAFCpL,GAED,SAAAoL,gBAAA,GAAmB;AACf,eAAKhB,SAAL,GAAiB,IAAjB;AACA,eAAKiB,eAAL,CAAqB;AAAE/C,YAAAA,KAAK,EAAE;AAAT,WAArB;AACH,SALAtI;;AAKAA,QAAAA,MAAA,CAEDsL,iBAFCtL,GAED,SAAAsL,iBAAA,GAAoB;AAChB,eAAKlB,SAAL,GAAiB,IAAjB;AACA,cAAI9B,KAAK,GAAG,CAAZ;;AACA,eAAK,IAAIjB,GAAG,GAAG,CAAf,EAAkBA,GAAG,GAAGL,YAAY,CAAChJ,MAArC,EAA6CqJ,GAAG,EAAhD,EAAoD;AAChD,iBAAK,IAAIC,GAAG,GAAG,CAAf,EAAkBA,GAAG,GAAGN,YAAY,CAACK,GAAD,CAApC,EAA2CC,GAAG,EAA9C,EAAkD;AAC9C,mBAAK+D,eAAL,CAAqB;AAAEE,gBAAAA,SAAS,EAAElE,GAAb;AAAkBmE,gBAAAA,SAAS,EAAElE,GAA7B;AAAkCgB,gBAAAA,KAAK,EAALA;AAAlC,eAArB;AACAA,cAAAA,KAAK,IAAI,CAATA;;;;AAGR,eAAKmD,WAAL;AACH,SAZAzL;;AAYAA,QAAAA,MAAA,CAED4K,SAFC5K,GAED,SAAA4K,SAAA,CAAUtE,KAAV,EAAgC;AAAA,cAAAoF,MAAA,OAAA;;AAC5B,cAAI,CAAC,KAAKxB,OAAN,IAAiB,KAAKM,cAA1B,EAA0C;AAC1C,cAAImB,WAAJ;;AAEA,kBAAQrF,KAAK,CAACsF,OAAd;AACI,iBAAKC,OAAO,CAACC,KAAb;AACIH,cAAAA,WAAW,GAAG,KAAKI,QAAL,EAAdJ;AACA;;AACJ,iBAAKE,OAAO,CAACG,KAAb;AACA,iBAAKH,OAAO,CAACI,UAAb;AACIN,cAAAA,WAAW,GAAG,KAAKO,QAAL,EAAdP;AACA;;AACJ,iBAAKE,OAAO,CAACM,KAAb;AACA,iBAAKN,OAAO,CAACO,WAAb;AACIT,cAAAA,WAAW,GAAG,KAAKU,SAAL,EAAdV;AACA;;AACJ,iBAAKE,OAAO,CAACS,KAAb;AACA,iBAAKT,OAAO,CAACU,UAAb;AACIZ,cAAAA,WAAW,GAAG,KAAKI,QAAL,EAAdJ;AACA;;AACJ,iBAAKE,OAAO,CAACW,KAAb;AACA,iBAAKX,OAAO,CAACY,QAAb;AACId,cAAAA,WAAW,GAAG,KAAKe,MAAL,EAAdf;AACA;AAnBR;;AAsBA,cAAIA,WAAW,IAAIA,WAAW,CAAC3N,MAAZ2N,GAAqB,CAAxC,EAA2C;AACvC,iBAAKzB,OAAL,GAAe,KAAf;AAEArC,YAAAA,OAAO,CAAC8E,GAAR9E,CAAY8D,WAAZ9D,EACK+E,IADL/E,CACU,YAAM;AACR6D,cAAAA,MAAI,CAACL,eAALK;;AACAA,cAAAA,MAAI,CAACD,WAALC;;AAEA,kBAAIA,MAAI,CAACmB,KAALnB,EAAJ,EAAkB;AACdA,gBAAAA,MAAI,CAACoB,QAALpB,CAAcqB,IAAdrB,CAAmB,YAAnBA,EAAiCA,MAAI,CAACvB,YAAtCuB;;AACAA,gBAAAA,MAAI,CAACtB,SAALsB,GAAiB,IAAjBA;AACH,eAHD,MAGO,IAAIA,MAAI,CAACsB,MAALtB,EAAJ,EAAmB;AACtBA,gBAAAA,MAAI,CAACuB,SAALvB,CAAeqB,IAAfrB,CAAoB,YAApBA,EAAkCA,MAAI,CAACvB,YAAvCuB;;AACAA,gBAAAA,MAAI,CAACtB,SAALsB,GAAiB,IAAjBA;AACH,eAHM,MAGA;AACHA,gBAAAA,MAAI,CAACxB,OAALwB,GAAe,IAAfA;;AAEP,aAdL7D;AAgBH,WAnBD,MAmBO,IAAI,KAAKmF,MAAL,EAAJ,EAAmB;AACtBxM,YAAAA,OAAO,CAAC0M,GAAR1M,CAAY,UAAZA;AACA,iBAAK0J,OAAL,GAAe,KAAf;AACA,iBAAKE,SAAL,GAAiB,IAAjB;AACA,iBAAK6C,SAAL,CAAeF,IAAf,CAAoB,YAApB,EAAkC,KAAK5C,YAAvC;AACH,WALM,MAKA;;AAEH5B,YAAAA,OAAO,CAAC,KAAKnI,IAAN,EAAY,EAAZ,CAAPmI;;AAEP,SAxDAvI;;AAwDAA,QAAAA,MAAA,CAEDyL,WAFCzL,GAED,SAAAyL,WAAA,GAAc;AACV,eAAKtB,YAAL,GAAoBgD,UAAU,CAACpF,CAAXoF,CAAaC,OAAbD,CAAqB,KAAKlD,SAA1BkD,EAAqCE,MAArCF,CAA4C,UAACG,GAAD,EAAMC,IAAN,EAAe;AAC3E,gBAAI,CAACA,IAAL,EAAW,OAAOD,GAAP;AACX,mBAAOA,GAAG,GAAGC,IAAI,CAACjF,KAAlB;AACH,WAHmB6E,EAGjB,CAHiBA,CAApB;AAKA,eAAKK,UAAL,CAAgBzL,MAAhB,GAAyB,KAAKoI,YAAL,CAAkBsD,QAAlB,EAAzB;AACH,SATAzN;;AASAA,QAAAA,MAAA,CAED6M,KAFC7M,GAED,SAAA6M,KAAA,GAAQ;AACJ,iBAAOM,UAAU,CAACpF,CAAXoF,CAAaC,OAAbD,CAAqB,KAAKlD,SAA1BkD,EAAqCrJ,SAArCqJ,CAA+C,UAAAxF,UAAA;AAAU,mBAAIA,UAAU,IAAIA,UAAU,CAACW,KAAXX,KAAqB,IAAvC;WAAzDwF,IAAwG,CAAC,CAAhH;AACH,SAJAnN;;AAIAA,QAAAA,MAAA,CAEDgN,MAFChN,GAED,SAAAgN,MAAA,GAAS;AACL,cAAMU,WAAW,GAAGP,UAAU,CAACpF,CAAXoF,CAAaC,OAAbD,CAAqB,KAAKlD,SAA1BkD,EAAqCQ,MAArCR,CAA4C,UAAAS,OAAA;AAAO,mBAAIA,OAAO,KAAK,IAAhB;WAAnDT,EAAyEnP,MAAzEmP,IAAmFhG,SAAvG;AAEA,cAAI,CAACuG,WAAL,EAAkB;AAClB,cAAIG,aAAa,GAAG,CAApB;;AAEA,eAAK,IAAIxG,GAAG,GAAG,CAAf,EAAkBA,GAAG,GAAGL,YAAY,CAAChJ,MAArC,EAA6CqJ,GAAG,EAAhD,EAAoD;AAChD,iBAAK,IAAIC,GAAG,GAAG,CAAf,EAAkBA,GAAG,GAAGN,YAAY,CAACK,GAAD,CAApC,EAA2CC,GAAG,EAA9C,EAAkD;AAC9C,kBAAI,CAAC,KAAK2C,SAAL,CAAe5C,GAAf,EAAoBC,GAApB,CAAL,EAA+B;AAE/B,kBAAMwG,OAAO,GAAG,KAAK7D,SAAL,CAAe5C,GAAf,EAAoBC,GAApB,EAAyBgB,KAAzC,CAH8C;;AAK9C,kBAAI,KAAK2B,SAAL,CAAe5C,GAAG,GAAG,CAArB,KAA2B,KAAK4C,SAAL,CAAe5C,GAAG,GAAG,CAArB,EAAwBC,GAAxB,CAA3B,IAA2D,KAAK2C,SAAL,CAAe5C,GAAG,GAAG,CAArB,EAAwBC,GAAxB,EAA6BgB,KAA7B,IAAsCwF,OAArG,EAA8G;AAC1GD,gBAAAA,aAAa;eAN6B;;;AAS9C,kBAAI,KAAK5D,SAAL,CAAe5C,GAAG,GAAG,CAArB,KAA2B,KAAK4C,SAAL,CAAe5C,GAAG,GAAG,CAArB,EAAwBC,GAAxB,CAA3B,IAA2D,KAAK2C,SAAL,CAAe5C,GAAG,GAAG,CAArB,EAAwBC,GAAxB,EAA6BgB,KAA7B,IAAsCwF,OAArG,EAA8G;AAC1GD,gBAAAA,aAAa;eAV6B;;;AAa9C,kBAAI,KAAK5D,SAAL,CAAe5C,GAAf,KAAuB,KAAK4C,SAAL,CAAe5C,GAAf,EAAoBC,GAAG,GAAG,CAA1B,CAAvB,IAAuD,KAAK2C,SAAL,CAAe5C,GAAf,EAAoBC,GAAG,GAAG,CAA1B,EAA6BgB,KAA7B,IAAsCwF,OAAjG,EAA0G;AACtGD,gBAAAA,aAAa;eAd6B;;;AAiB9C,kBAAI,KAAK5D,SAAL,CAAe5C,GAAf,KAAuB,KAAK4C,SAAL,CAAe5C,GAAf,EAAoBC,GAAG,GAAG,CAA1B,CAAvB,IAAuD,KAAK2C,SAAL,CAAe5C,GAAf,EAAoBC,GAAG,GAAG,CAA1B,EAA6BgB,KAA7B,IAAsCwF,OAAjG,EAA0G;AACtGD,gBAAAA,aAAa;;;;;AAMzB,iBAAOA,aAAa,IAAI,CAAxB;AACH,SAlCA7N;;AAkCAA,QAAAA,MAAA,CAED+N,aAFC/N,GAED,SAAA+N,aAAA,GAAgB;AACZ,cAAI,KAAK1D,IAAL,CAAU2D,IAAV,KAAmB,CAAvB,EAA0B;AACtB,mBAAO,KAAK3D,IAAL,CAAU4D,GAAV,EAAP;AACH,WAFD,MAEO;AACH,mBAAO5M,WAAW,CAAC,KAAK4J,gBAAN,CAAlB;;AAEP,SARAjL;;AAQAA,QAAAA,MAAA,CAEDkO,gBAFClO,GAED,SAAAkO,gBAAA,CAAiB9N,IAAjB,EAAuB;AACnBA,UAAAA,IAAI,CAAC+N,SAAL/N,CAAe,IAAfA;AACA,eAAKiK,IAAL,CAAUa,GAAV,CAAc9K,IAAd;AACH,SALAJ;;AAKAA,QAAAA,MAAA,CAEDqL,eAFCrL,GAED,SAAAqL,eAAA,CAAgB+C,IAAhB,EAA6B;AAAA,cAAbA,IAAI,WAAS;AAAbA,YAAAA,IAAI,GAAG,IAAPA;;;AACZ,cAAMzG,UAAe,GAAG,KAAKoG,aAAL,EAAxB;;AACA,cAAAM,cAAA,GAAwCC,MAAM,CAACC,MAAPD,CAAc,EAAdA,EAAkB,KAAKE,eAAL,EAAlBF,EAA0CF,IAA1CE,CAAxC;AAAA,cAAQ/C,SAAS,GAAA8C,cAAA,CAAT9C,SAAR;AAAA,cAAmBC,SAAS,GAAA6C,cAAA,CAAT7C,SAAnB;AAAA,cAA8BlD,KAAK,GAAA+F,cAAA,CAAL/F,KAA9B;;AACA,cAAMmG,SAAS,GAAG5I,WAAW,CAAC0F,SAAD,EAAYC,SAAZ,CAA7B;AACA,cAAMkD,UAAU,GAAG,CAAC,CAAD,EAAI,CAAJ,EAAOpQ,MAAP,CAAc,CAAC,CAAD,EAAI,EAAJ,EAAQ,EAAR,EAAY,EAAZ,EAAgBqQ,KAAhB,CAAsB,CAAtB,EAAyB,KAAKpE,kBAA9B,CAAd,CAAnB;AACA,cAAIqE,WAAW,GAAGF,UAAU,CAAC/I,IAAI,CAACC,KAALD,CAAW+I,UAAU,CAAC1Q,MAAX0Q,GAAoB/I,IAAI,CAACkJ,MAALlJ,EAA/BA,CAAD,CAA5B,CALyB;;AAOzB,cAAI2C,KAAJ,EAAW;AACPsG,YAAAA,WAAW,GAAGtG,KAAdsG;;;AAGJjH,UAAAA,UAAU,CAACwG,SAAXxG,CAAqB,KAAKmH,KAA1BnH;AACAA,UAAAA,UAAU,CAAChG,WAAXgG,CAAuB8G,SAAvB9G;AACAA,UAAAA,UAAU,CAACoH,OAAXpH,GAAqBA,UAAU,CAACrH,YAAXqH,CAAwBqH,iBAAxBrH,CAArBA;AACAA,UAAAA,UAAU,CAACW,KAAXX,GAAmBiH,WAAnBjH;AACAA,UAAAA,UAAU,CAACN,GAAXM,GAAiB4D,SAAjB5D;AACAA,UAAAA,UAAU,CAACL,GAAXK,GAAiB6D,SAAjB7D;AACAA,UAAAA,UAAU,CAACU,MAAXV,GAAoB,IAApBA;AAEAA,UAAAA,UAAU,CAACoH,OAAXpH,CAAmBsH,WAAnBtH,CAA+BiH,WAA/BjH;AACA,eAAKsC,SAAL,CAAesB,SAAf,EAA0BC,SAA1B,IAAuC7D,UAAvC;AACH,SAvBA3H;;AAuBAA,QAAAA,MAAA,CAEDwO,eAFCxO,GAED,SAAAwO,eAAA,GAAkB;AACd,cAAIjD,SAAS,GAAG5F,IAAI,CAACC,KAALD,CAAWqB,YAAY,CAAChJ,MAAbgJ,GAAsBrB,IAAI,CAACkJ,MAALlJ,EAAjCA,CAAhB;AACA,cAAI6F,SAAS,GAAG7F,IAAI,CAACC,KAALD,CAAWqB,YAAY,CAAC,CAAD,CAAZA,GAAkBrB,IAAI,CAACkJ,MAALlJ,EAA7BA,CAAhB;;AAEA,iBAAO,KAAKsE,SAAL,CAAesB,SAAf,EAA0BC,SAA1B,MAAyC,IAAhD,EAAsD;AAClDD,YAAAA,SAAS,GAAG5F,IAAI,CAACC,KAALD,CAAWqB,YAAY,CAAChJ,MAAbgJ,GAAsBrB,IAAI,CAACkJ,MAALlJ,EAAjCA,CAAZ4F;AACAC,YAAAA,SAAS,GAAG7F,IAAI,CAACC,KAALD,CAAWqB,YAAY,CAAC,CAAD,CAAZA,GAAkBrB,IAAI,CAACkJ,MAALlJ,EAA7BA,CAAZ6F;;;AAGJ,iBAAO;AAAED,YAAAA,SAAS,EAATA,SAAF;AAAaC,YAAAA,SAAS,EAATA;AAAb,WAAP;AACH,SAZAxL;;AAYAA,QAAAA,MAAA,CAEDkP,SAFClP,GAED,SAAAkP,SAAA,CAAU9G,cAAV,EAA0BT,UAA1B,EAAsCC,MAAtC,EAA8C;AAAA,cAAAuH,MAAA,OAAA;;AAC1C,cAAMC,QAAQ,GAAGzH,UAAU,CAAC,OAAD,CAAVA,GAAsB,CAAvC;;AACA,cAAIyH,QAAQ,GAAG,KAAK9E,mBAApB,EAAyC;AACrC,iBAAKA,mBAAL,GAA2B8E,QAA3B;AACA,iBAAKC,YAAL,CAAkBtC,IAAlB,CAAuB,cAAvB,EAAuC,KAAKxC,kBAA5C;AACA,iBAAKA,kBAAL;;;AAGJnC,UAAAA,cAAc,CAACE,KAAfF,GAAuBgH,QAAvBhH;AACAA,UAAAA,cAAc,CAACC,MAAfD,GAAwB,KAAxBA;AAEA,iBAAOV,eAAe,CAACC,UAAD,EAAaC,MAAb,CAAfF,CACFkF,IADElF,CACG,YAAM;AACRU,YAAAA,cAAc,CAAC2G,OAAf3G,CAAuB6G,WAAvB7G,CAAmCgH,QAAnChH;AACAA,YAAAA,cAAc,CAACC,MAAfD,GAAwB,IAAxBA;;AACA+G,YAAAA,MAAI,CAACjB,gBAALiB,CAAsBxH,UAAtBwH;AACH,WALEzH,CAAP;AAMH,SAnBA1H;;AAmBAA,QAAAA,MAAA,CAED+L,QAFC/L,GAED,SAAA+L,QAAA,GAAW;AACP,cAAIuD,QAAQ,GAAG,EAAf;;AACA,eAAK,IAAIjI,GAAG,GAAG,CAAf,EAAkBA,GAAG,GAAGL,YAAY,CAAChJ,MAArC,EAA6CqJ,GAAG,EAAhD,EAAoD;AAChD,iBAAK,IAAIC,GAAG,GAAGN,YAAY,CAACK,GAAD,CAAZL,GAAoB,CAAnC,EAAsCM,GAAG,IAAI,CAA7C,EAAgDA,GAAG,EAAnD,EAAuD;AACnD,kBAAI,CAAC,KAAK2C,SAAL,CAAe5C,GAAf,EAAoBC,GAApB,CAAL,EAA+B;AAC/B,kBAAMK,UAAU,GAAG,KAAKsC,SAAL,CAAe5C,GAAf,EAAoBC,GAApB,CAAnB;AAEA,kBAAIiI,OAAO,GAAGjI,GAAd;AACA,kBAAIc,cAAc,GAAG,KAAK6B,SAAL,CAAe5C,GAAf,EAAoBkI,OAAO,GAAG,CAA9B,CAArB;;AACA,qBAAOnH,cAAc,KAAK,IAAnBA,IAA2BD,QAAQ,CAACC,cAAD,EAAiBT,UAAjB,CAA1C,EAAwE;AACpE4H,gBAAAA,OAAO;AACPnH,gBAAAA,cAAc,GAAG,KAAK6B,SAAL,CAAe5C,GAAf,EAAoBkI,OAAO,GAAG,CAA9B,CAAjBnH;;;AAGJA,cAAAA,cAAc,GAAG,KAAK6B,SAAL,CAAe5C,GAAf,EAAoBkI,OAApB,CAAjBnH;AACA,mBAAK6B,SAAL,CAAe5C,GAAf,EAAoBC,GAApB,IAA2B,IAA3B;AAEA,kBAAMkI,OAAO,GAAGrH,QAAQ,CAACC,cAAD,EAAiBT,UAAjB,CAAxB;AACA,kBAAMC,MAAM,GAAG/B,WAAW,CAACwB,GAAD,EAAMkI,OAAN,CAA1B;;AAEA,kBAAIC,OAAJ,EAAa;AACTF,gBAAAA,QAAQ,CAACG,IAATH,CAAc,KAAKJ,SAAL,CAAe9G,cAAf,EAA+BT,UAA/B,EAA2CC,MAA3C,CAAd0H;AACH,eAFD,MAEO;AACH,qBAAKrF,SAAL,CAAe5C,GAAf,EAAoBkI,OAApB,IAA+B5H,UAA/B;AACA,oBAAIL,GAAG,IAAIiI,OAAX,EAAoB;AACpBD,gBAAAA,QAAQ,CAACG,IAATH,CAAc5H,eAAe,CAACC,UAAD,EAAaC,MAAb,CAA7B0H;;;;;AAKZ,iBAAOA,QAAP;AACH,SAjCAtP;;AAiCAA,QAAAA,MAAA,CAED0M,MAFC1M,GAED,SAAA0M,MAAA,GAAS;AACL,cAAI4C,QAAQ,GAAG,EAAf;;AAEA,eAAK,IAAIjI,GAAG,GAAG,CAAf,EAAkBA,GAAG,GAAGL,YAAY,CAAChJ,MAArC,EAA6CqJ,GAAG,EAAhD,EAAoD;AAChD,iBAAK,IAAIC,GAAG,GAAG,CAAf,EAAkBA,GAAG,GAAGN,YAAY,CAACK,GAAD,CAApC,EAA2CC,GAAG,EAA9C,EAAkD;AAC9C,kBAAI,CAAC,KAAK2C,SAAL,CAAe5C,GAAf,EAAoBC,GAApB,CAAL,EAA+B;AAC/B,kBAAMK,UAAU,GAAG,KAAKsC,SAAL,CAAe5C,GAAf,EAAoBC,GAApB,CAAnB;AAEA,kBAAIiI,OAAO,GAAGjI,GAAd;AACA,kBAAIc,cAAc,GAAG,KAAK6B,SAAL,CAAe5C,GAAf,EAAoBkI,OAAO,GAAG,CAA9B,CAArB;;AACA,qBAAOnH,cAAc,KAAK,IAAnBA,IAA2BD,QAAQ,CAACC,cAAD,EAAiBT,UAAjB,CAA1C,EAAwE;AACpE4H,gBAAAA,OAAO;AACPnH,gBAAAA,cAAc,GAAG,KAAK6B,SAAL,CAAe5C,GAAf,EAAoBkI,OAAO,GAAG,CAA9B,CAAjBnH;;;AAGJA,cAAAA,cAAc,GAAG,KAAK6B,SAAL,CAAe5C,GAAf,EAAoBkI,OAApB,CAAjBnH;AACA,mBAAK6B,SAAL,CAAe5C,GAAf,EAAoBC,GAApB,IAA2B,IAA3B;AAEA,kBAAMkI,OAAO,GAAGrH,QAAQ,CAACC,cAAD,EAAiBT,UAAjB,CAAxB;AACA,kBAAMC,MAAM,GAAG/B,WAAW,CAACwB,GAAD,EAAMkI,OAAN,CAA1B;;AAEA,kBAAIC,OAAJ,EAAa;AACTF,gBAAAA,QAAQ,CAACG,IAATH,CAAc,KAAKJ,SAAL,CAAe9G,cAAf,EAA+BT,UAA/B,EAA2CC,MAA3C,CAAd0H;AACH,eAFD,MAEO;AACH,qBAAKrF,SAAL,CAAe5C,GAAf,EAAoBkI,OAApB,IAA+B5H,UAA/B;AACA,oBAAIL,GAAG,IAAIiI,OAAX,EAAoB;AACpBD,gBAAAA,QAAQ,CAACG,IAATH,CAAc5H,eAAe,CAACC,UAAD,EAAaC,MAAb,CAA7B0H;;;;;AAKZ,iBAAOA,QAAP;AACH,SAlCAtP;;AAkCAA,QAAAA,MAAA,CAEDqM,SAFCrM,GAED,SAAAqM,SAAA,GAAY;AACR,cAAIiD,QAAQ,GAAG,EAAf;;AAEA,eAAK,IAAIhI,GAAG,GAAG,CAAf,EAAkBA,GAAG,GAAGN,YAAY,CAAC,CAAD,CAApC,EAAyCM,GAAG,EAA5C,EAAgD;AAC5C,iBAAK,IAAID,GAAG,GAAGL,YAAY,CAAChJ,MAA5B,EAAoCqJ,GAAG,IAAI,CAA3C,EAA8CA,GAAG,EAAjD,EAAqD;AACjD,kBAAI,CAAC,KAAK4C,SAAL,CAAe5C,GAAf,CAAD,IAAwB,CAAC,KAAK4C,SAAL,CAAe5C,GAAf,EAAoBC,GAApB,CAA7B,EAAuD;AACvD,kBAAMK,UAAU,GAAG,KAAKsC,SAAL,CAAe5C,GAAf,EAAoBC,GAApB,CAAnB;AAEA,kBAAIoI,OAAO,GAAGrI,GAAd;AACA,kBAAIe,cAAc,GAAG,KAAK6B,SAAL,CAAeyF,OAAO,GAAG,CAAzB,KAA+B,KAAKzF,SAAL,CAAeyF,OAAO,GAAG,CAAzB,EAA4BpI,GAA5B,CAApD;;AACA,qBAAOc,cAAc,KAAK,IAAnBA,IAA2BD,QAAQ,CAACC,cAAD,EAAiBT,UAAjB,CAA1C,EAAwE;AACpE+H,gBAAAA,OAAO;AACPtH,gBAAAA,cAAc,GAAG,KAAK6B,SAAL,CAAeyF,OAAO,GAAG,CAAzB,KAA+B,KAAKzF,SAAL,CAAeyF,OAAO,GAAG,CAAzB,EAA4BpI,GAA5B,CAAhDc;;;AAGJA,cAAAA,cAAc,GAAG,KAAK6B,SAAL,CAAeyF,OAAf,EAAwBpI,GAAxB,CAAjBc;AACA,mBAAK6B,SAAL,CAAe5C,GAAf,EAAoBC,GAApB,IAA2B,IAA3B;AAEA,kBAAMkI,OAAO,GAAGrH,QAAQ,CAACC,cAAD,EAAiBT,UAAjB,CAAxB;AACA,kBAAMC,MAAM,GAAG/B,WAAW,CAAC6J,OAAD,EAAUpI,GAAV,CAA1B;;AAEA,kBAAIkI,OAAJ,EAAa;AACTF,gBAAAA,QAAQ,CAACG,IAATH,CAAc,KAAKJ,SAAL,CAAe9G,cAAf,EAA+BT,UAA/B,EAA2CC,MAA3C,CAAd0H;AACH,eAFD,MAEO;AACH,qBAAKrF,SAAL,CAAeyF,OAAf,EAAwBpI,GAAxB,IAA+BK,UAA/B;AACA,oBAAIN,GAAG,IAAIqI,OAAX,EAAoB;AACpBJ,gBAAAA,QAAQ,CAACG,IAATH,CAAc5H,eAAe,CAACC,UAAD,EAAaC,MAAb,CAA7B0H;;;;;AAKZ,iBAAOA,QAAP;AACH,SAlCAtP;;AAkCAA,QAAAA,MAAA,CAEDkM,QAFClM,GAED,SAAAkM,QAAA,GAAW;AACP,cAAIoD,QAAQ,GAAG,EAAf;;AAEA,eAAK,IAAIhI,GAAG,GAAG,CAAf,EAAkBA,GAAG,GAAGN,YAAY,CAAC,CAAD,CAApC,EAAyCM,GAAG,EAA5C,EAAgD;AAC5C,iBAAK,IAAID,GAAG,GAAG,CAAf,EAAkBA,GAAG,GAAGL,YAAY,CAAChJ,MAArC,EAA6CqJ,GAAG,EAAhD,EAAoD;AAChD,kBAAI,CAAC,KAAK4C,SAAL,CAAe5C,GAAf,CAAD,IAAwB,CAAC,KAAK4C,SAAL,CAAe5C,GAAf,EAAoBC,GAApB,CAA7B,EAAuD;AACvD,kBAAMK,UAAU,GAAG,KAAKsC,SAAL,CAAe5C,GAAf,EAAoBC,GAApB,CAAnB;AAEA,kBAAIoI,OAAO,GAAGrI,GAAd;AACA,kBAAIe,cAAc,GAAG,KAAK6B,SAAL,CAAeyF,OAAO,GAAG,CAAzB,KAA+B,KAAKzF,SAAL,CAAeyF,OAAO,GAAG,CAAzB,EAA4BpI,GAA5B,CAApD;;AACA,qBAAOc,cAAc,KAAK,IAAnBA,IAA2BD,QAAQ,CAACC,cAAD,EAAiBT,UAAjB,CAA1C,EAAwE;AACpE+H,gBAAAA,OAAO;AACPtH,gBAAAA,cAAc,GAAG,KAAK6B,SAAL,CAAeyF,OAAO,GAAG,CAAzB,KAA+B,KAAKzF,SAAL,CAAeyF,OAAO,GAAG,CAAzB,EAA4BpI,GAA5B,CAAhDc;;;AAGJA,cAAAA,cAAc,GAAG,KAAK6B,SAAL,CAAeyF,OAAf,EAAwBpI,GAAxB,CAAjBc;AACA,mBAAK6B,SAAL,CAAe5C,GAAf,EAAoBC,GAApB,IAA2B,IAA3B;AAEA,kBAAMkI,OAAO,GAAGrH,QAAQ,CAACC,cAAD,EAAiBT,UAAjB,CAAxB;AACA,kBAAMC,MAAM,GAAG/B,WAAW,CAAC6J,OAAD,EAAUpI,GAAV,CAA1B;;AAEA,kBAAIkI,OAAJ,EAAa;AACTF,gBAAAA,QAAQ,CAACG,IAATH,CAAc,KAAKJ,SAAL,CAAe9G,cAAf,EAA+BT,UAA/B,EAA2CC,MAA3C,CAAd0H;AACH,eAFD,MAEO;AACH,qBAAKrF,SAAL,CAAeyF,OAAf,EAAwBpI,GAAxB,IAA+BK,UAA/B;AACA,oBAAIN,GAAG,IAAIqI,OAAX,EAAoB;AACpBJ,gBAAAA,QAAQ,CAACG,IAATH,CAAc5H,eAAe,CAACC,UAAD,EAAaC,MAAb,CAA7B0H;;;;;AAKZ,iBAAOA,QAAP;AACH,SAlCAtP;;AAkCAA,QAAAA,MAAA,CAED2P,SAFC3P,GAED,SAAA2P,SAAA,GAAY;AACR,eAAK1F,SAAL,GAAiB,IAAI/L,KAAJ,CAAU8I,YAAY,CAAChJ,MAAvB,EAA+B6M,IAA/B,CAAoC,EAApC,EAAwCC,GAAxC,CAA4C,UAAC/C,CAAD,EAAIgD,KAAJ;AAAS,mBAAK,IAAI7M,KAAJ,CAAU8I,YAAY,CAAC+D,KAAD,CAAtB,EAA+BF,IAA/B,CAAoC,IAApC,CAAL;WAArD,CAAjB;AACA,eAAKV,YAAL,GAAoB,CAApB;AACA,eAAKqD,UAAL,CAAgBzL,MAAhB,GAAyB,GAAzB;AACA,eAAKmI,OAAL,GAAe,IAAf;AACA,eAAKE,SAAL,GAAiB,KAAjB;AAEA,eAAK0E,KAAL,CAAWc,iBAAX;AACA,eAAK9C,QAAL,CAAcC,IAAd,CAAmB,YAAnB;AACA,eAAKE,SAAL,CAAeF,IAAf,CAAoB,YAApB;AACA,eAAKsC,YAAL,CAAkBtC,IAAlB,CAAuB,aAAvB;AACH,SAbA/M;;AAaAA,QAAAA,MAAA,CAED6P,WAFC7P,GAED,SAAA6P,WAAA,GAAc;AACV,eAAKF,SAAL;AACA,eAAKG,SAAL;AACH,SALA9P;;AAKAA,QAAAA,MAAA,CAED+P,WAFC/P,GAED,SAAA+P,WAAA,GAAc;AACV,eAAKJ,SAAL;AACA,eAAKK,SAAL,CAAejD,IAAf,CAAoB,YAApB;AACH,SALA/M;;AAKAA,QAAAA,MAAA,CAED8P,SAFC9P,GAED,SAAA8P,SAAA,GAAY;AACR,cAAI,KAAK1F,SAAT,EAAoB,OADZ;;;AAIR,eAAKA,SAAL,GAAiB,IAAjB;AACA,eAAKiB,eAAL;AACA,eAAKA,eAAL;AACA,eAAKI,WAAL;AACH,SAVAzL;;AAUA,eAAAoJ,WAAA;QA9Y4BrE,UAYd4E,EAZuBA,OAAA,CAuB/BwB,QAvB+BxB,SAYvBA,EAWAA,OAXA,CAAAjM,GAWAc,WAAA,GAAAwG,yBAAA,CAAAtH,OAAA,CAAAuC,SAAA,SAAA,GAAA5C,MAAA;AAAA4H,QAAAA,YAAA;AAAAC,QAAAA,UAAA;AAAAC,QAAAA,QAAA;AAAAC,QAAAA,WAAA;OAAA,CAAA5G,EAAAE,YAAA,GAAAsG,yBAAA,CAAAtH,OAAA,CAAAuC,SAAA,oBAAA,GAAA1C,MAAA;AAAA0H,QAAAA,YAAA;AAAAC,QAAAA,UAAA;AAAAC,QAAAA,QAAA;AAAAC,QAAAA,WAAA;OAAA,CAAA5G,EAAAG,YAAA,GAAAqG,yBAAA,CAAAtH,OAAA,CAAAuC,SAAA,kBAAA,GAAAzC,MAAA;AAAAyH,QAAAA,YAAA;AAAAC,QAAAA,UAAA;AAAAC,QAAAA,QAAA;AAAAC,QAAAA,WAAA;OAAA,CAAA5G,EAAAoL,YAAA,GAAA5E,yBAAA,CAAAtH,OAAA,CAAAuC,SAAA,cAAA,GAAAqJ,MAAA;AAAArE,QAAAA,YAAA;AAAAC,QAAAA,UAAA;AAAAC,QAAAA,QAAA;AAAAC,QAAAA,WAAA;OAAA,CAAA5G,EAAAqL,YAAA,GAAA7E,yBAAA,CAAAtH,OAAA,CAAAuC,SAAA,aAAA,GAAAsJ,MAAA;AAAAtE,QAAAA,YAAA;AAAAC,QAAAA,UAAA;AAAAC,QAAAA,QAAA;AAAAC,QAAAA,WAAA;OAAA,CAAA5G,EAAAsL,YAAA,GAAA9E,yBAAA,CAAAtH,OAAA,CAAAuC,SAAA,YAAA,GAAAuJ,MAAA;AAAAvE,QAAAA,YAAA;AAAAC,QAAAA,UAAA;AAAAC,QAAAA,QAAA;AAAAC,QAAAA,WAAA;OAAA,CAAA5G,EAAAuL,YAAA,GAAA/E,yBAAA,CAAAtH,OAAA,CAAAuC,SAAA,aAAA,GAAAwJ,MAAA;AAAAxE,QAAAA,YAAA;AAAAC,QAAAA,UAAA;AAAAC,QAAAA,QAAA;AAAAC,QAAAA,WAAA;OAAA,CAAA5G,EAAAwL,YAAA,GAAAhF,yBAAA,CAAAtH,OAAA,CAAAuC,SAAA,gBAAA,GAAAyJ,MAAA;AAAAzE,QAAAA,YAAA;AAAAC,QAAAA,UAAA;AAAAC,QAAAA,QAAA;AAAAC,QAAAA,WAAA;OAAA,CAXA1H,GAWAA,OAXA,CAAA,CAAAN,IAWAK;;cAwXlB,CAAA4H,IAAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC3cD,UAAQtI,OAAO,GAAeC,UAAU,CAAhCD,OAAR;AAAA,UAAiBE,QAAQ,GAAKD,UAAU,CAAvBC,QAAjB;UAGa+S,cAAc,8BAAA7S,IAAA,GAD1BJ,OAAO,CAAC,gBAAD,CACmBI,EADDC,KAAA,GAGrBH,QAAQ,CAACI,IAAD,CAFcF,EAERG,KAAA,GACdL,QAAQ,CAACmM,MAAD,CAHcjM,EAGNA,IAAA,CAAAK,MAAA,IAAAC,OAAA,0BAAAC;AAAAC,QAAAA,cAAA,CAAAqS,cAAA,EAAAtS,UAAA,CAAAC;;AAAA,iBAAAqS,cAAA;AAAA,cAAApS,KAAA;;AAAA,mBAAAC,IAAA,GAAAC,SAAA,CAAAC,QAAAC,IAAA,OAAAC,MAAAJ,OAAAK,IAAA,IAAA,EAAAA,IAAA,GAAAL,IAAA,EAAAK,IAAA,EAAA;AAAAF,YAAAA,IAAA,CAAAE,IAAA,CAAAF,GAAAF,SAAA,CAAAI,IAAA,CAAAF;;;AAAAJ,UAAAA,KAAA,GAAAF,UAAA,CAAAS,IAAAT,CAAAU,KAAAV,CAAAA,UAAAA,SAAAW,OAAAL,KAAAN,SAAAE;;AAAAU,UAAAA,0BAAA,CAAAV,KAAA,aAAA,EAAAW,WAAA,EAAAC,sBAAA,CAAAZ,KAAA,CAAA,CAAAU;;AAAAA,UAAAA,0BAAA,CAAAV,KAAA,YAAA,EAAAa,YAAA,EAAAD,sBAAA,CAAAZ,KAAA,CAAA,CAAAU;;AAAA,iBAAAV,KAAA;;;AAAA,YAAAmC,MAAA,GAAAiQ,cAAA,CAAAhQ,SAAA;;AAAAD,QAAAA,MAAA,CAEjBE,KAFiBF,GAEjB,SAAAE,KAAA,GAAQ;AACJ,eAAKE,IAAL,CAAUmC,EAAV,CAAa,YAAb,EAA2B,KAAK2N,SAAhC,EAA2C,IAA3C;AACA,eAAK9P,IAAL,CAAUmC,EAAV,CAAa,YAAb,EAA2B,KAAK4N,SAAhC,EAA2C,IAA3C;AACH,SALgBnQ;;AAKhBA,QAAAA,MAAA,CAEDkQ,SAFClQ,GAED,SAAAkQ,SAAA,GAAY;AAAA,cAAAxE,MAAA,OAAA;;AACR,cAAI0E,aAAa,GAAGC,IAAI,CAACC,KAALD,CAAWE,GAAG,CAACC,YAAJD,CAAiBE,OAAjBF,CAAyBG,WAAzBH,CAAXF,KAAqD,EAAzE,CADQ;;AAGRD,UAAAA,aAAa,CAACO,IAAdP,CAAmB,UAACQ,CAAD,EAAIC,CAAJ;AAAK,mBAAKA,CAAC,CAACC,KAAFD,GAAUD,CAAC,CAACE,KAAjB;WAAxBV;AACAA,UAAAA,aAAa,GAAGA,aAAa,CAACzB,KAAdyB,CAAoB,CAApBA,EAAuB,CAAvBA,CAAhBA;AACA,eAAKW,SAAL,CAAenB,iBAAf;AACAQ,UAAAA,aAAa,CAACY,OAAdZ,CAAsB,UAAAhC,IAAA,EAAQ;AAC1B,gBAAM6C,QAAQ,GAAG5P,WAAW,CAACqK,MAAI,CAACuF,QAAN,CAA5B;AACAA,YAAAA,QAAQ,CAAC9C,SAAT8C,CAAmBvF,MAAI,CAACqF,SAAxBE;AAEAA,YAAAA,QAAQ,CAACC,uBAATD,CAAiCnP,KAAjCmP,EAAwCD,OAAxCC,CAAgD,UAACE,KAAD,EAAQpG,KAAR,EAAkB;AAC9D,kBAAIA,KAAK,IAAI,CAAb,EAAgB;AACZoG,gBAAAA,KAAK,CAACpP,MAANoP,GAAe/C,IAAI,CAAC9M,IAApB6P;AACH,eAFD,MAEO;AACHA,gBAAAA,KAAK,CAACpP,MAANoP,GAAe/C,IAAI,CAAC0C,KAApBK;;AAEP,aANDF;AAOH,WAXDb;AAaA,eAAKhQ,IAAL,CAAUE,YAAV,CAAuB8Q,SAAvB,EAAkCC,OAAlC,GAA4C,CAA5C;AACA,eAAKjR,IAAL,CAAUiC,sBAAV,CAAiCiP,gBAAjC,EAAmDC,OAAnD,GAA6D,IAA7D;AACAvJ,UAAAA,KAAK,CAAC,KAAK5H,IAAL,CAAUE,YAAV,CAAuB8Q,SAAvB,CAAD,CAALpJ,CACKC,EADLD,CACQ,GADRA,EACa;AAAEqJ,YAAAA,OAAO,EAAE;AAAX,WADbrJ,EAEK9H,KAFL8H;AAGH,SA1BAhI;;AA0BAA,QAAAA,MAAA,CAEDmQ,SAFCnQ,GAED,SAAAmQ,SAAA,GAAY;AAAA,cAAAhB,MAAA,OAAA;;AACRnH,UAAAA,KAAK,CAAC,KAAK5H,IAAL,CAAUE,YAAV,CAAuB8Q,SAAvB,CAAD,CAALpJ,CACKC,EADLD,CACQ,GADRA,EACa;AAAEqJ,YAAAA,OAAO,EAAE;AAAX,WADbrJ,EAEK5J,IAFL4J,CAEU,YAAM;AACRmH,YAAAA,MAAI,CAAC/O,IAAL+O,CAAU9M,sBAAV8M,CAAiCmC,gBAAjCnC,EAAmDoC,OAAnDpC,GAA6D,KAA7DA;AACH,WAJLnH,EAKK9H,KALL8H;AAMH,SATAhI;;AASA,eAAAiQ,cAAA;QA3C+BlL,UAGfrH,GAHwBc,WAAA,GAAAwG,yBAAA,CAAAtH,OAAA,CAAAuC,SAAA,aAAA,GAAA5C,MAAA;AAAA4H,QAAAA,YAAA;AAAAC,QAAAA,UAAA;AAAAC,QAAAA,QAAA;AAAAC,QAAAA,WAAA;OAAA,CAAA5G,EAAAE,YAAA,GAAAsG,yBAAA,CAAAtH,OAAA,CAAAuC,SAAA,YAAA,GAAA1C,MAAA;AAAA0H,QAAAA,YAAA;AAAAC,QAAAA,UAAA;AAAAC,QAAAA,QAAA;AAAAC,QAAAA,WAAA;OAAA,CAGxB1H,GAHwBA,OAGxB,CAAA,CAAAN,IAHwBK;;cA6C5C,CAAA4H,IAAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AChDD,UAAQtI,OAAO,GAAeC,UAAU,CAAhCD,OAAR;AAAA,UAAiBE,QAAQ,GAAKD,UAAU,CAAvBC,QAAjB;UAEawT,WAAW,0BAAG;UAGdc,gBAAgB,gCAAApU,IAAA,GAD5BJ,OAAO,CAAC,kBAAD,CACqBI,EADDC,KAAA,GAGvBH,QAAQ,CAACuU,OAAD,CAFgBrU,EAEPG,KAAA,GACjBL,QAAQ,CAAC0F,MAAD,CAHgBxF,EAGRA,IAAA,CAAAK,MAAA,IAAAC,OAAA,0BAAAC;AAAAC,QAAAA,cAAA,CAAA4T,gBAAA,EAAA7T,UAAA,CAAAC;;AAAA,iBAAA4T,gBAAA;AAAA,cAAA3T,KAAA;;AAAA,mBAAAC,IAAA,GAAAC,SAAA,CAAAC,QAAAC,IAAA,OAAAC,MAAAJ,OAAAK,IAAA,IAAA,EAAAA,IAAA,GAAAL,IAAA,EAAAK,IAAA,EAAA;AAAAF,YAAAA,IAAA,CAAAE,IAAA,CAAAF,GAAAF,SAAA,CAAAI,IAAA,CAAAF;;;AAAAJ,UAAAA,KAAA,GAAAF,UAAA,CAAAS,IAAAT,CAAAU,KAAAV,CAAAA,UAAAA,SAAAW,OAAAL,KAAAN,SAAAE;;AAAAU,UAAAA,0BAAA,CAAAV,KAAA,cAAA,EAAAW,WAAA,EAAAC,sBAAA,CAAAZ,KAAA,CAAA,CAAAU;;AAAAA,UAAAA,0BAAA,CAAAV,KAAA,gBAAA,EAAAa,YAAA,EAAAD,sBAAA,CAAAZ,KAAA,CAAA,CAAAU;;AAAA,iBAAAV,KAAA;;;AAAA,YAAAmC,MAAA,GAAAwR,gBAAA,CAAAvR,SAAA;;AAAAD,QAAAA,MAAA,CAEPE,KAFOF,GAEjB,SAAAE,KAAA,GAAwB;AACpB,eAAKwR,YAAL,CAAkBC,YAAlB,GAAiC,KAAjC;AACH,SAJgB3R;;AAIhBA,QAAAA,MAAA,CAED4R,SAFC5R,GAED,SAAA4R,SAAA,GAAY;AACR,cAAI,CAAC,KAAKC,UAAL,CAAgB9P,MAArB,EAA6B;AACzB,iBAAK2P,YAAL,CAAkBC,YAAlB,GAAiC,KAAjC;AACH,WAFD,MAEO;AACH,iBAAKD,YAAL,CAAkBC,YAAlB,GAAiC,IAAjC;;AAEP,SARA3R;;AAQAA,QAAAA,MAAA,CAED8R,WAFC9R,GAED,SAAA8R,WAAA,GAAc;AAAA,cAAAC,qBAAA;AAAA,cAAAC,sBAAA;AAAA,cAAAtG,MAAA,OAAA;;AACV,cAAM0E,aAAa,GAAGC,IAAI,CAACC,KAALD,CAAWE,GAAG,CAACC,YAAJD,CAAiBE,OAAjBF,CAAyBG,WAAzBH,CAAXF,KAAqD,EAA3E;AAEA,cAAM4B,QAAQ,GAAG;AACb3Q,YAAAA,IAAI,EAAE,KAAKuQ,UAAL,CAAgB9P,MADT;AAEb+O,YAAAA,KAAK,GAAAiB,qBAAA,GAAE3I,WAAW,QAAXA,KAAW4I,sBAAA,GAAX5I,WAAW,CAAE+B,iBAAb/B,SAAAA,GAAA4I,sBAAA,CAAuB7H,wBAAY4H,wBAAI;AAFjC,WAAjB;;AAKA,cAAI3B,aAAa,CAAC8B,IAAd9B,CAAmB,UAAAhC,IAAA;AAAI,mBAAI1C,MAAI,CAACmG,UAALnG,CAAgB3J,MAAhB2J,IAA0B0C,IAAI,CAAC9M,IAAnC;WAAvB8O,CAAJ,EAAqE;AAAA,gBAAA+B,sBAAA,EAAAC,sBAAA;;AACjEhC,YAAAA,aAAa,CAAC8B,IAAd9B,CAAmB,UAAAhC,IAAA;AAAI,qBAAI1C,MAAI,CAACmG,UAALnG,CAAgB3J,MAAhB2J,IAA0B0C,IAAI,CAAC9M,IAAnC;aAAvB8O,EAAgEU,KAAhEV,IAAqE+B,sBAAA,GAAG/I,WAAW,QAAXA,KAAWgJ,sBAAA,GAAXhJ,WAAW,CAAE+B,iBAAb/B,SAAAA,GAAAgJ,sBAAA,CAAuBjI,wBAAYgI,yBAAI,CAA/G/B;AACH,WAFD,MAEO;AACHA,YAAAA,aAAa,CAACX,IAAdW,CAAmB6B,QAAnB7B;;;AAGJG,UAAAA,GAAG,CAACC,YAAJD,CAAiB8B,OAAjB9B,CAAyBG,WAAzBH,EAAsCF,IAAI,CAACiC,SAALjC,CAAeD,aAAfC,CAAtCE;AACA/P,UAAAA,OAAO,CAAC0M,GAAR1M,CAAY+P,GAAG,CAACC,YAAhBhQ;AACH,SAlBAR;;AAkBA,eAAAwR,gBAAA;QAjCiCzM,UAGjBrH,GAH0Bc,WAAA,GAAAwG,yBAAA,CAAAtH,OAAA,CAAAuC,SAAA,cAAA,GAAA5C,MAAA;AAAA4H,QAAAA,YAAA;AAAAC,QAAAA,UAAA;AAAAC,QAAAA,QAAA;AAAAC,QAAAA,WAAA;OAAA,CAAA5G,EAAAE,YAAA,GAAAsG,yBAAA,CAAAtH,OAAA,CAAAuC,SAAA,gBAAA,GAAA1C,MAAA;AAAA0H,QAAAA,YAAA;AAAAC,QAAAA,UAAA;AAAAC,QAAAA,QAAA;AAAAC,QAAAA,WAAA;OAAA,CAG1B1H,GAH0BA,OAG1B,CAAA,CAAAN,IAH0BK;;cAmC9C,CAAA4H,IAAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACxCD,UAAQtI,OAAO,GAAeC,UAAU,CAAhCD,OAAR;AAAA,UAAiBE,QAAQ,GAAKD,UAAU,CAAvBC,QAAjB;;AAEA,eAASqV,eAAT,CAAyB3L,MAAzB,EAAuC8B,QAAvC,EAAyD8J,EAAzD,EAAmEC,EAAnE,EAA6ExK,EAA7E,EAAuFyK,IAAvF,EAA4G;AACxG,YAAI9L,MAAM,CAAC,SAAD,CAAV,EAAuBA,MAAM,CAAC,SAAD,CAANA,CAAkBuC,IAAlBvC;AACvB,YAAIA,MAAM,CAAC,SAAD,CAAV,EAAuBA,MAAM,CAAC,SAAD,CAANA,CAAkBuC,IAAlBvC;AAEvB,YAAI+L,GAAG,GAAGH,EAAE,CAACxR,CAAb;AAAA,YAAgB4R,GAAG,GAAGJ,EAAE,CAACvR,CAAzB;AAAA,YACI4R,GAAG,GAAGJ,EAAE,CAACzR,CADb;AAAA,YACgB8R,GAAG,GAAGL,EAAE,CAACxR,CADzB;AAEA,YAAM8R,QAAQ,GAAG;AAAEzK,UAAAA,KAAK,EAAE1B,MAAM,CAACf,WAAPe,GAAqB5F;AAA9B,SAAjB;AACA,YAAMgS,QAAQ,GAAG;AAAE1K,UAAAA,KAAK,EAAE1B,MAAM,CAACf,WAAPe,GAAqB3F;AAA9B,SAAjB;AACA,YAAMgS,KAAmB,GAAGP,IAAI,IAAIpE,MAAM,CAAC4E,MAAP5E,CAAc,IAAdA,CAApC;;AACA2E,QAAAA,KAAK,CAACE,QAANF,GAAiB,UAAU1L,MAAV,EAA0B6L,IAA1B,EAAwCC,QAAxC,EAA0DC,CAA1D,EAAqE;AAClFD,UAAAA,QAAQ,GAAGE,MAAM,CAAChM,MAAD,EAASoL,GAAT,EAAcE,GAAd,EAAmBO,IAAnB,EAAyBE,CAAzB,CAAjBD;AACA,iBAAOA,QAAP;AACH,SAHDJ;;AAIAA,QAAAA,KAAK,CAACO,QAANP,GAAiB,YAAY;AACzB,cAAIrM,MAAM,IAAIA,MAAM,CAACsB,QAArB,EAA+B;AAC3BtB,YAAAA,MAAM,CAACjF,WAAPiF,CAAmB,IAAIa,IAAJ,CAASsL,QAAQ,CAACzK,KAAlB,EAAyB1B,MAAM,CAACsB,QAAPtB,CAAgB3F,CAAzC,EAA4C2F,MAAM,CAACsB,QAAPtB,CAAgB6M,CAA5D,CAAnB7M;;AAEP,SAJDqM;;AAKA,YAAMS,KAAmB,GAAGhB,IAAI,IAAIpE,MAAM,CAAC4E,MAAP5E,CAAc,IAAdA,CAApC;;AACAoF,QAAAA,KAAK,CAACP,QAANO,GAAiB,UAAUlM,MAAV,EAA0BmM,IAA1B,EAAwCC,QAAxC,EAA0DN,CAA1D,EAAqE;AAClFM,UAAAA,QAAQ,GAAGL,MAAM,CAAC/L,MAAD,EAASoL,GAAT,EAAcE,GAAd,EAAmBa,IAAnB,EAAyBL,CAAzB,CAAjBM;AACA,iBAAOA,QAAP;AACH,SAHDF;;AAIAA,QAAAA,KAAK,CAACF,QAANE,GAAiB,YAAY;AACzB,cAAI9M,MAAM,IAAIA,MAAM,CAACsB,QAArB,EAA+B;AAC3BtB,YAAAA,MAAM,CAACjF,WAAPiF,CAAmB,IAAIa,IAAJ,CAASb,MAAM,CAACsB,QAAPtB,CAAgB5F,CAAzB,EAA4BgS,QAAQ,CAAC1K,KAArC,EAA4C1B,MAAM,CAACsB,QAAPtB,CAAgB6M,CAA5D,CAAnB7M;;AAEP,SAJD8M;;AAKA9M,QAAAA,MAAM,CAAC,SAAD,CAANA,GAAoBoB,KAAK,CAAC+K,QAAD,CAAL/K,CACfC,EADeD,CACZU,QADYV,EACF;AAAEM,UAAAA,KAAK,EAAEL,EAAE,CAACjH;AAAZ,SADEgH,EACeiL,KADfjL,EAEf5J,IAFe4J,CAEV,YAAM;AACRpB,UAAAA,MAAM,CAAC,SAAD,CAANA,GAAoB,IAApBA;AACH,SAJeoB,EAKf9H,KALe8H,EAApBpB;AAMAA,QAAAA,MAAM,CAAC,SAAD,CAANA,GAAoBoB,KAAK,CAACgL,QAAD,CAALhL,CACfC,EADeD,CACZU,QADYV,EACF;AAAEM,UAAAA,KAAK,EAAEL,EAAE,CAAChH;AAAZ,SADE+G,EACe0L,KADf1L,EAEf5J,IAFe4J,CAEV,YAAM;AACRpB,UAAAA,MAAM,CAAC,SAAD,CAANA,GAAoB,IAApBA;AACH,SAJeoB,EAKf9H,KALe8H,EAApBpB;;;UASSiN,YAAY,4BAAAzW,IAAA,GADxBJ,OAAO,CAAC,cAAD,CACiBI,EADDC,KAAA,GAGnBH,QAAQ,CAACI,IAAD,CAFYF,EAENG,KAAA,GACdL,QAAQ,CAACI,IAAD,CAHYF,EAGNI,KAAA,GACdN,QAAQ,CAACI,IAAD,CAJYF,EAINA,IAAA,CAAAK,MAAA,IAAAC,OAAA,0BAAAC;AAAAC,QAAAA,cAAA,CAAAiW,YAAA,EAAAlW,UAAA,CAAAC;;AAAA,iBAAAiW,YAAA;AAAA,cAAAhW,KAAA;;AAAA,mBAAAC,IAAA,GAAAC,SAAA,CAAAC,QAAAC,IAAA,OAAAC,MAAAJ,OAAAK,IAAA,IAAA,EAAAA,IAAA,GAAAL,IAAA,EAAAK,IAAA,EAAA;AAAAF,YAAAA,IAAA,CAAAE,IAAA,CAAAF,GAAAF,SAAA,CAAAI,IAAA,CAAAF;;;AAAAJ,UAAAA,KAAA,GAAAF,UAAA,CAAAS,IAAAT,CAAAU,KAAAV,CAAAA,UAAAA,SAAAW,OAAAL,KAAAN,SAAAE;;AAAAU,UAAAA,0BAAA,CAAAV,KAAA,YAAA,EAAAW,WAAA,EAAAC,sBAAA,CAAAZ,KAAA,CAAA,CAAAU;;AAAAA,UAAAA,0BAAA,CAAAV,KAAA,WAAA,EAAAa,YAAA,EAAAD,sBAAA,CAAAZ,KAAA,CAAA,CAAAU;;AAAAA,UAAAA,0BAAA,CAAAV,KAAA,WAAA,EAAAc,YAAA,EAAAF,sBAAA,CAAAZ,KAAA,CAAA,CAAAU;;AAAA,iBAAAV,KAAA;;;AAAA,YAAAmC,MAAA,GAAA6T,YAAA,CAAA5T,SAAA;;AAAAD,QAAAA,MAAA,CAELE,KAFKF,GAEf,SAAAE,KAAA,GAAwB;AACpB,eAAKE,IAAL,CAAUmC,EAAV,CAAa,cAAb,EAA6B,KAAKuR,WAAlC,EAA+C,IAA/C;AACA,eAAK1T,IAAL,CAAUmC,EAAV,CAAa,aAAb,EAA4B,KAAKwR,UAAjC,EAA6C,IAA7C,EAFoB;AAIvB,SANc/T;;AAMdA,QAAAA,MAAA,CAED+T,UAFC/T,GAED,SAAA+T,UAAA,GAAa;AACT,eAAKC,OAAL,CAAaC,QAAb,CAAsBjD,OAAtB,CAA8B,UAAC5Q,IAAD,EAAU;AACpCA,YAAAA,IAAI,CAACuE,MAALvE,GAAc,KAAdA;AACH,WAFD;AAGH,SANAJ;;AAMAA,QAAAA,MAAA,CAED8T,WAFC9T,GAED,SAAA8T,WAAA,CAAYI,UAAZ,EAAwB;AACpBA,UAAAA,UAAU,GAAGvO,IAAI,CAACwO,GAALxO,CAASuO,UAATvO,EAAqB,KAAKqO,OAAL,CAAaC,QAAb,CAAsBjW,MAAtB,GAA+B,CAApD2H,CAAbuO;;AAEA,cAAI,CAAC,KAAKF,OAAL,CAAaC,QAAb,CAAsBC,UAAtB,EAAkCvP,MAAvC,EAA+C;AAC3C,mBAAO,KAAKyP,oBAAL,CAA0B,KAAKJ,OAAL,CAAaC,QAAb,CAAsBC,UAAtB,CAA1B,CAAP;;;AAEJ,eAAKF,OAAL,CAAaC,QAAb,CAAsBjD,OAAtB,CAA8B,UAAC5Q,IAAD,EAAO2K,KAAP,EAAiB;AAC3C,gBAAIA,KAAK,GAAGmJ,UAAZ,EAAwB;AACpB9T,cAAAA,IAAI,CAACuE,MAALvE,GAAc,KAAdA;AACH,aAFD,MAEO;AACHA,cAAAA,IAAI,CAACuE,MAALvE,GAAc,IAAdA;;AAEP,WAND;AAQH,SAhBAJ;;AAgBAA,QAAAA,MAAA,CAEDoU,oBAFCpU,GAED,SAAAoU,oBAAA,CAAqBC,SAArB,EAAgC;AAAA,cAAA3I,MAAA,OAAA;;AAC5BtC,UAAAA,WAAW,CAAC+B,QAAZ/B,CAAqBoB,cAArBpB,GAAsC,IAAtCA;AACA,eAAKkL,QAAL,CAAchU,YAAd,CAA2BgR,gBAA3B,EAA6CC,OAA7C,GAAuD,IAAvD;AACA,eAAK+C,QAAL,CAAchU,YAAd,CAA2B8Q,SAA3B,EAAsCC,OAAtC,GAAgD,CAAhD;AACA,eAAKkD,OAAL,CAAajU,YAAb,CAA0B8Q,SAA1B,EAAqCC,OAArC,GAA+C,CAA/C;AACAgD,UAAAA,SAAS,CAAC1P,MAAV0P,GAAmB,IAAnBA;AACAA,UAAAA,SAAS,CAAC/T,YAAV+T,CAAuBjD,SAAvBiD,EAAkChD,OAAlCgD,GAA4C,CAA5CA;AACA,cAAMG,WAAW,GAAGH,SAAS,CAACxO,WAAVwO,EAApB;AACAA,UAAAA,SAAS,CAAC1S,WAAV0S,CAAsBI,EAAE,CAAC,CAAD,EAAI,CAAJ,CAAxBJ;AACA,cAAMK,MAAM,GAAGD,EAAE,CAACD,WAAW,CAACxT,CAAZwT,GAAgB,CAAhBA,GAAoB,CAArB,EAAwB,EAAxB,CAAjB;AACA,cAAMG,MAAM,GAAGF,EAAE,CAACD,WAAW,CAACxT,CAAZwT,GAAgB,CAAhBA,GAAoB,CAArB,EAAwB,EAAxB,CAAjB;AAEA,cAAMI,mBAAmB,GAAG5M,KAAK,CAACqM,SAAS,CAAC/T,YAAV+T,CAAuBjD,SAAvBiD,CAAD,CAALrM,CACvBC,EADuBD,CACpB,GADoBA,EACf;AAAEqJ,YAAAA,OAAO,EAAE;AAAX,WADerJ,EAEvB5J,IAFuB4J,CAElB,YAAM;AACRqM,YAAAA,SAAS,CAAC/T,YAAV+T,CAAuBQ,SAAvBR,EAAkCS,IAAlCT,CAAuC,aAAvCA;AACH,WAJuBrM,EAKvB+M,KALuB/M,CAKjB,GALiBA,EAMvB5J,IANuB4J,CAMlB,YAAM;AACRqM,YAAAA,SAAS,CAAC/T,YAAV+T,CAAuBQ,SAAvBR,EAAkCS,IAAlCT,CAAuC,aAAvCA;AACH,WARuBrM,EASvB+M,KATuB/M,CASjB,CATiBA,EAUvB5J,IAVuB4J,CAUlB,YAAM;AACRuK,YAAAA,eAAe,CAAC8B,SAAD,EAAY,GAAZ,EAAiBK,MAAjB,EAAyBC,MAAzB,EAAiCH,WAAjC,CAAfjC;AACH,WAZuBvK,EAavB+M,KAbuB/M,CAajB,GAbiBA,EAcvB5J,IAduB4J,CAclB,YAAM;AACRqM,YAAAA,SAAS,CAAC/T,YAAV+T,CAAuBQ,SAAvBR,EAAkCS,IAAlCT,CAAuC,aAAvCA;AACH,WAhBuBrM,CAA5B;AAkBAA,UAAAA,KAAK,CAAC,KAAKsM,QAAL,CAAchU,YAAd,CAA2B8Q,SAA3B,CAAD,CAALpJ,CACKC,EADLD,CACQ,GADRA,EACa;AAAEqJ,YAAAA,OAAO,EAAE;AAAX,WADbrJ,EAEK5J,IAFL4J,CAEU,YAAM;AACRA,YAAAA,KAAK,CAAC0D,MAAI,CAAC6I,OAAL7I,CAAapL,YAAboL,CAA0B0F,SAA1B1F,CAAD,CAAL1D,CACKC,EADLD,CACQ,GADRA,EACa;AAAEqJ,cAAAA,OAAO,EAAE;AAAX,aADbrJ,EAEK9H,KAFL8H;AAGH,WANLA,EAOK+M,KAPL/M,CAOW,GAPXA,EAQK5J,IARL4J,CAQU,YAAM;AACR4M,YAAAA,mBAAmB,CAAC1U,KAApB0U;AACH,WAVL5M,EAWK+M,KAXL/M,CAWW,GAXXA,EAYK5J,IAZL4J,CAYU,YAAM;AACRA,YAAAA,KAAK,CAAC0D,MAAI,CAAC6I,OAAL7I,CAAapL,YAAboL,CAA0B0F,SAA1B1F,CAAD,CAAL1D,CACKC,EADLD,CACQ,GADRA,EACa;AAAEqJ,cAAAA,OAAO,EAAE;AAAX,aADbrJ,EAEK9H,KAFL8H;AAGH,WAhBLA,EAiBKC,EAjBLD,CAiBQ,GAjBRA,EAiBa;AAAEqJ,YAAAA,OAAO,EAAE;AAAX,WAjBbrJ,EAkBK5J,IAlBL4J,CAkBU,YAAM;AACR0D,YAAAA,MAAI,CAAC4I,QAAL5I,CAAcpL,YAAdoL,CAA2B4F,gBAA3B5F,EAA6C6F,OAA7C7F,GAAuD,KAAvDA;AACAtC,YAAAA,WAAW,CAAC+B,QAAZ/B,CAAqBoB,cAArBpB,GAAsC,KAAtCA;AACH,WArBLpB,EAsBK9H,KAtBL8H;AAuBH,SAvDAhI;;AAuDA,eAAA6T,YAAA;QAvF6B9O,UAIfrH,GAJwBc,WAAA,GAAAwG,yBAAA,CAAAtH,OAAA,CAAAuC,SAAA,YAAA,GAAA5C,MAAA;AAAA4H,QAAAA,YAAA;AAAAC,QAAAA,UAAA;AAAAC,QAAAA,QAAA;AAAAC,QAAAA,WAAA;OAAA,CAAA5G,EAAAE,YAAA,GAAAsG,yBAAA,CAAAtH,OAAA,CAAAuC,SAAA,WAAA,GAAA1C,MAAA;AAAA0H,QAAAA,YAAA;AAAAC,QAAAA,UAAA;AAAAC,QAAAA,QAAA;AAAAC,QAAAA,WAAA;OAAA,CAAA5G,EAAAG,YAAA,GAAAqG,yBAAA,CAAAtH,OAAA,CAAAuC,SAAA,WAAA,GAAAzC,MAAA;AAAAyH,QAAAA,YAAA;AAAAC,QAAAA,UAAA;AAAAC,QAAAA,QAAA;AAAAC,QAAAA,WAAA;OAAA,CAIxB1H,GAJwBA,OAIxB,CAAA,CAAAN,IAJwBK;;cAyF1C,CAAA4H,IAAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACtID,UAAQtI,OAAO,GAAeC,UAAU,CAAhCD,OAAR;AAAA,UAAiBE,QAAQ,GAAKD,UAAU,CAAvBC,QAAjB;UAGa8X,WAAW,2BAAA5X,IAAA,GADvBJ,OAAO,CAAC,aAAD,CACgBI,EADDC,KAAA,GAGlBH,QAAQ,CAACI,IAAD,CAFWF,EAELA,IAAA,CAAAK,MAAA,IAAAC,OAAA,0BAAAC;AAAAC,QAAAA,cAAA,CAAAoX,WAAA,EAAArX,UAAA,CAAAC;;AAAA,iBAAAoX,WAAA;AAAA,cAAAnX,KAAA;;AAAA,mBAAAC,IAAA,GAAAC,SAAA,CAAAC,QAAAC,IAAA,OAAAC,MAAAJ,OAAAK,IAAA,IAAA,EAAAA,IAAA,GAAAL,IAAA,EAAAK,IAAA,EAAA;AAAAF,YAAAA,IAAA,CAAAE,IAAA,CAAAF,GAAAF,SAAA,CAAAI,IAAA,CAAAF;;;AAAAJ,UAAAA,KAAA,GAAAF,UAAA,CAAAS,IAAAT,CAAAU,KAAAV,CAAAA,UAAAA,SAAAW,OAAAL,KAAAN,SAAAE;;AAAAU,UAAAA,0BAAA,CAAAV,KAAA,cAAA,EAAAW,WAAA,EAAAC,sBAAA,CAAAZ,KAAA,CAAA,CAAAU;;AAAA,iBAAAV,KAAA;;;AAAA,YAAAmC,MAAA,GAAAgV,WAAA,CAAA/U,SAAA;;AAAAD,QAAAA,MAAA,CAEfE,KAFeF,GAEf,SAAAE,KAAA,GAAQ;AACJ,eAAKE,IAAL,CAAUmC,EAAV,CAAa,YAAb,EAA2B,KAAK2N,SAAhC,EAA2C,IAA3C;AACA,eAAK9P,IAAL,CAAUmC,EAAV,CAAa,YAAb,EAA2B,KAAK4N,SAAhC,EAA2C,IAA3C;AAEA,eAAKD,SAAL,CAAe,IAAf;AACH,SAPclQ;;AAOdA,QAAAA,MAAA,CAEDmQ,SAFCnQ,GAED,SAAAmQ,SAAA,GAAY;AAAA,cAAAzE,MAAA,OAAA;;AACR,eAAKtL,IAAL,CAAUuE,MAAV,GAAmB,IAAnB;AACA,cAAMsQ,WAAW,GAAG,KAAK7U,IAAL,CAAUE,YAAV,CAAuB8Q,SAAvB,CAApB;AACA,cAAM8D,WAAW,GAAG,KAAK9U,IAAL,CAAU8Q,uBAAV,CAAkCtO,MAAlC,CAApB;;AAEA,cAAIqS,WAAJ,EAAiB;AACbjN,YAAAA,KAAK,CAACiN,WAAD,CAALjN,CACKC,EADLD,CACQ,GADRA,EACa;AAAEqJ,cAAAA,OAAO,EAAE;AAAX,aADbrJ,EAEK5J,IAFL4J,CAEU,YAAM;AACR0D,cAAAA,MAAI,CAACtL,IAALsL,CAAUrJ,sBAAVqJ,CAAiC4F,gBAAjC5F,EAAmD6F,OAAnD7F,GAA6D,KAA7DA;AACH,aAJL1D,EAKK9H,KALL8H;;;AAQJ,cAAIkN,WAAJ,EAAiB;AACbA,YAAAA,WAAW,CAAClE,OAAZkE,CAAoB,UAAAzQ,MAAA;AAAM,qBAAIA,MAAM,CAACkN,YAAPlN,GAAsB,KAA1B;aAA1ByQ;;AAEP,SAnBAlV;;AAmBAA,QAAAA,MAAA,CAEDkQ,SAFClQ,GAED,SAAAkQ,SAAA,CAAUiF,WAAV,EAAuB;AACnB,eAAK/U,IAAL,CAAUuE,MAAV,GAAmB,IAAnB;AACA,cAAMsQ,WAAW,GAAG,KAAK7U,IAAL,CAAUE,YAAV,CAAuB8Q,SAAvB,CAApB;AACA,cAAM8D,WAAW,GAAG,KAAK9U,IAAL,CAAU8Q,uBAAV,CAAkCtO,MAAlC,CAApB;AACA,eAAKxC,IAAL,CAAUiC,sBAAV,CAAiCiP,gBAAjC,EAAmDC,OAAnD,GAA6D,IAA7D;;AAEA,cAAInI,WAAW,CAAC+B,QAAZ/B,IAAwBA,WAAW,CAAC+B,QAAZ/B,CAAqBgB,SAAjD,EAA4D;AACxD,iBAAKgL,UAAL,CAAgB/S,sBAAhB,CAAuCP,KAAvC,EAA8CC,MAA9C,GAAuD,QAAvD;AACH,WAFD,MAEO;AACH,iBAAKqT,UAAL,CAAgB/S,sBAAhB,CAAuCP,KAAvC,EAA8CC,MAA9C,GAAuD,MAAvD;;;AAEJ,cAAIoT,WAAJ,EAAiB;AACb,gBAAIF,WAAJ,EAAiBA,WAAW,CAAC5D,OAAZ4D,GAAsB,GAAtBA;;AACjB,gBAAIC,WAAJ,EAAiB;AACbA,cAAAA,WAAW,CAAClE,OAAZkE,CAAoB,UAAAzQ,MAAA;AAAM,uBAAIA,MAAM,CAACkN,YAAPlN,GAAsB,IAA1B;eAA1ByQ;;AAEP,WALD,MAKO;AACH,gBAAID,WAAJ,EAAiB;AACbjN,cAAAA,KAAK,CAACiN,WAAD,CAALjN,CACKC,EADLD,CACQ,GADRA,EACa;AAAEqJ,gBAAAA,OAAO,EAAE;AAAX,eADbrJ,EAEK5J,IAFL4J,CAEU,YAAM;AACR,oBAAIkN,WAAJ,EAAiB;AACbA,kBAAAA,WAAW,CAAClE,OAAZkE,CAAoB,UAAAzQ,MAAA;AAAM,2BAAIA,MAAM,CAACkN,YAAPlN,GAAsB,IAA1B;mBAA1ByQ;;AAEP,eANLlN,EAOK9H,KAPL8H;;;AAUX,SA9BAhI;;AA8BA,eAAAgV,WAAA;QA1D4BjQ,UAEdrH,EAFuBc,WAAA,GAAAwG,yBAAA,CAAAtH,OAAA,CAAAuC,SAAA,cAAA,GAAA5C,MAAA;AAAA4H,QAAAA,YAAA;AAAAC,QAAAA,UAAA;AAAAC,QAAAA,QAAA;AAAAC,QAAAA,WAAA;OAAA,CAEvB1H,EAFuBA,OAEvB,CAAA,CAAAN,IAFuBK;;cA2DzC,CAAA4H,IAAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;AC/DD,UAAQtI,OAAO,GAAeC,UAAU,CAAhCD,OAAR;AAAA,UAAiBE,QAAQ,GAAKD,UAAU,CAAvBC,QAAjB;UAGa8R,iBAAiB,iCAAA5R,IAAA,GAD7BJ,OAAO,CAAC,mBAAD,CACsBI,EADDC,KAAA,GAGxBH,QAAQ,CAACmY,WAAD,CAFiBjY,EAEJA,IAAA,CAAAK,MAAA,IAAAC,OAAA,0BAAAC;AAAAC,QAAAA,cAAA,CAAAoR,iBAAA,EAAArR,UAAA,CAAAC;;AAAA,iBAAAoR,iBAAA;AAAA,cAAAnR,KAAA;;AAAA,mBAAAC,IAAA,GAAAC,SAAA,CAAAC,QAAAC,IAAA,OAAAC,MAAAJ,OAAAK,IAAA,IAAA,EAAAA,IAAA,GAAAL,IAAA,EAAAK,IAAA,EAAA;AAAAF,YAAAA,IAAA,CAAAE,IAAA,CAAAF,GAAAF,SAAA,CAAAI,IAAA,CAAAF;;;AAAAJ,UAAAA,KAAA,GAAAF,UAAA,CAAAS,IAAAT,CAAAU,KAAAV,CAAAA,UAAAA,SAAAW,OAAAL,KAAAN,SAAAE;;AAAAU,UAAAA,0BAAA,CAAAV,KAAA,sBAAA,EAAAW,WAAA,EAAAC,sBAAA,CAAAZ,KAAA,CAAA,CAAAU;;AAAA,iBAAAV,KAAA;;;AAAA,YAAAmC,MAAA,GAAAgP,iBAAA,CAAA/O,SAAA;;AAAAD,QAAAA,MAAA,CAEtBiP,WAFsBjP,GAEtB,SAAAiP,WAAA,CAAY3G,KAAZ,EAAmB;AACf,cAAMgN,WAAW,GAAG3P,IAAI,CAAC4P,IAAL5P,CAAU2C,KAAV3C,IAAmB,CAAvC;AACA,eAAKvF,IAAL,CAAUE,YAAV,CAAuBkV,MAAvB,EAA+BC,WAA/B,GAA6C,KAAKC,kBAAL,CAAwBJ,WAAxB,CAA7C;AACA,eAAKlV,IAAL,CAAUE,YAAV,CAAuBuU,SAAvB,EAAkCC,IAAlC;AACH,SANqB9U;;AAMrB,eAAAgP,iBAAA;QARkCjK,UAEbrH,EAFsBc,WAAA,GAAAwG,yBAAA,CAAAtH,OAAA,CAAAuC,SAAA,sBAAA,GAAA5C,MAAA;AAAA4H,QAAAA,YAAA;AAAAC,QAAAA,UAAA;AAAAC,QAAAA,QAAA;AAAAC,QAAAA,WAAA,WAAAA;AAAA,iBAEe,EAFf;;OAAA,CAEtB1H,EAAuCA,OAAvC,CAAA,CAAAN,IAAuCK;;cAQhE,CAAA4H,IAAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACbD,UAAQtI,OAAO,GAAeC,UAAU,CAAhCD,OAAR;AAAA,UAAiBE,QAAQ,GAAKD,UAAU,CAAvBC,QAAjB;UAGayY,SAAS,yBAAAvY,IAAA,GADrBJ,OAAO,CAAC,WAAD,CACcI,EADDC,KAAA,GAGhBH,QAAQ,CAACI,IAAD,CAFSF,EAEHG,KAAA,GACdL,QAAQ,CAAC4E,KAAD,CAHS1E,EAGFA,IAAA,CAAAK,MAAA,IAAAC,OAAA,0BAAAC;AAAAC,QAAAA,cAAA,CAAA+X,SAAA,EAAAhY,UAAA,CAAAC;;AAAA,iBAAA+X,SAAA;AAAA,cAAA9X,KAAA;;AAAA,mBAAAC,IAAA,GAAAC,SAAA,CAAAC,QAAAC,IAAA,OAAAC,MAAAJ,OAAAK,IAAA,IAAA,EAAAA,IAAA,GAAAL,IAAA,EAAAK,IAAA,EAAA;AAAAF,YAAAA,IAAA,CAAAE,IAAA,CAAAF,GAAAF,SAAA,CAAAI,IAAA,CAAAF;;;AAAAJ,UAAAA,KAAA,GAAAF,UAAA,CAAAS,IAAAT,CAAAU,KAAAV,CAAAA,UAAAA,SAAAW,OAAAL,KAAAN,SAAAE;;AAAAU,UAAAA,0BAAA,CAAAV,KAAA,cAAA,EAAAW,WAAA,EAAAC,sBAAA,CAAAZ,KAAA,CAAA,CAAAU;;AAAAA,UAAAA,0BAAA,CAAAV,KAAA,SAAA,EAAAa,YAAA,EAAAD,sBAAA,CAAAZ,KAAA,CAAA,CAAAU;;AAAA,iBAAAV,KAAA;;;AAAA,YAAAmC,MAAA,GAAA2V,SAAA,CAAA1V,SAAA;;AAAAD,QAAAA,MAAA,CAEhBE,KAFgBF,GAEhB,SAAAE,KAAA,GAAQ;AACJ,eAAKE,IAAL,CAAUmC,EAAV,CAAa,YAAb,EAA2B,KAAK2N,SAAhC,EAA2C,IAA3C;AACA,eAAK9P,IAAL,CAAUmC,EAAV,CAAa,YAAb,EAA2B,KAAK4N,SAAhC,EAA2C,IAA3C;AACH,SALenQ;;AAKfA,QAAAA,MAAA,CAEDmQ,SAFCnQ,GAED,SAAAmQ,SAAA,GAAY;AAAA,cAAAzE,MAAA,OAAA;;AACR1D,UAAAA,KAAK,CAAC,KAAK5H,IAAL,CAAUE,YAAV,CAAuB8Q,SAAvB,CAAD,CAALpJ,CACKC,EADLD,CACQ,GADRA,EACa;AAAEqJ,YAAAA,OAAO,EAAE;AAAX,WADbrJ,EAEK5J,IAFL4J,CAEU,YAAM;AACR0D,YAAAA,MAAI,CAACtL,IAALsL,CAAUrJ,sBAAVqJ,CAAiC4F,gBAAjC5F,EAAmD6F,OAAnD7F,GAA6D,KAA7DA;AACH,WAJL1D,EAKK9H,KALL8H;AAMH,SATAhI;;AASAA,QAAAA,MAAA,CAEDkQ,SAFClQ,GAED,SAAAkQ,SAAA,CAAUY,KAAV,EAAqB;AAAA,cAAXA,KAAK,WAAM;AAAXA,YAAAA,KAAK,GAAG,CAARA;;;AACN,eAAK1Q,IAAL,CAAUuE,MAAV,GAAmB,IAAnB;AACA,eAAKvE,IAAL,CAAUE,YAAV,CAAuB8Q,SAAvB,EAAkCC,OAAlC,GAA4C,CAA5C;AACA,eAAKjR,IAAL,CAAUiC,sBAAV,CAAiCiP,gBAAjC,EAAmDC,OAAnD,GAA6D,IAA7D;AACAvJ,UAAAA,KAAK,CAAC,KAAK5H,IAAL,CAAUE,YAAV,CAAuB8Q,SAAvB,CAAD,CAALpJ,CACKC,EADLD,CACQ,GADRA,EACa;AAAEqJ,YAAAA,OAAO,EAAE;AAAX,WADbrJ,EAEK9H,KAFL8H;AAIA,cAAI+M,KAAK,GAAG,CAAZ;AACA,eAAKa,UAAL,CAAgB5E,OAAhB,CAAwB,UAAA5Q,IAAA,EAAQ;AAC5B2U,YAAAA,KAAK,IAAI,GAATA;AAEA,gBAAMG,WAAW,GAAG9U,IAAI,CAAC8Q,uBAAL9Q,CAA6BwC,MAA7BxC,CAApB;AACA,gBAAM6U,WAAW,GAAG7U,IAAI,CAACE,YAALF,CAAkBgR,SAAlBhR,KAAgCA,IAAI,CAACyV,YAALzV,CAAkBgR,SAAlBhR,CAApD;;AACA,gBAAI6U,WAAJ,EAAiB;AACbA,cAAAA,WAAW,CAAC5D,OAAZ4D,GAAsB,CAAtBA;;AACA,kBAAIC,WAAJ,EAAiB;AACbA,gBAAAA,WAAW,CAAClE,OAAZkE,CAAoB,UAAAzQ,MAAA;AAAM,yBAAIA,MAAM,CAACkN,YAAPlN,GAAsB,KAA1B;iBAA1ByQ;;;AAGJlN,cAAAA,KAAK,CAACiN,WAAD,CAALjN,CACK+M,KADL/M,CACW+M,KADX/M,EAEKC,EAFLD,CAEQ,GAFRA,EAEa;AAAEqJ,gBAAAA,OAAO,EAAE;AAAX,eAFbrJ,EAGK5J,IAHL4J,CAGU,YAAM;AACR,oBAAIkN,WAAJ,EAAiB;AACbA,kBAAAA,WAAW,CAAClE,OAAZkE,CAAoB,UAAAzQ,MAAA;AAAM,2BAAIA,MAAM,CAACkN,YAAPlN,GAAsB,IAA1B;mBAA1ByQ;;AAEP,eAPLlN,EAQK9H,KARL8H;;AAUP,WArBD;AAuBA,eAAK8I,KAAL,CAAW/O,MAAX,GAAoB+O,KAAK,CAACrD,QAANqD,EAApB;AACH,SAnCA9Q;;AAmCA,eAAA2V,SAAA;QApD0B5Q,UAGXrH,GAHoBc,WAAA,GAAAwG,yBAAA,CAAAtH,OAAA,CAAAuC,SAAA,cAAA,GAAA5C,MAAA;AAAA4H,QAAAA,YAAA;AAAAC,QAAAA,UAAA;AAAAC,QAAAA,QAAA;AAAAC,QAAAA,WAAA,WAAAA;AAAA,iBAEC,EAFD;;OAAA,CAAA5G,EAEGE,YAAA,GAAAsG,yBAAA,CAAAtH,OAAA,CAAAuC,SAAA,SAAA,GAAA1C,MAAA;AAAA0H,QAAAA,YAAA;AAAAC,QAAAA,UAAA;AAAAC,QAAAA,QAAA;AAAAC,QAAAA,WAAA;OAAA,CACvB1H,GADuBA,OACvB,CAAA,CAAAN,IADuBK;;cAoD1C,CAAA4H,IAAAC","file":"all.js","sourcesContent":["import { Color, Canvas, UITransform, instantiate, math, Toggle, TextureCube, _decorator, Component, Button, labelAssembler, game, director, Node, Scene, renderer, CameraComponent, Label, ForwardPipeline, RichText } from 'cc';\nconst { ccclass, property } = _decorator;\n\n@ccclass('internal.DebugViewRuntimeControl')\nexport class DebugViewRuntimeControl extends Component {\n    @property(Node)\n    compositeModeToggle: Node | null = null;\n    @property(Node)\n    singleModeToggle: Node | null = null;\n    @property(Node)\n    EnableAllCompositeModeButton: Node | null = null;\n\t_single: number = 0;\n\n    private strSingle: string[] = [\n        'No Single Debug',\n        'Vertex Color',\n        'Vertex Normal',\n        'Vertex Tangent',\n        'World Position',\n        'Vertex Mirror',\n        'Face Side',\n        'UV0',\n        'UV1',\n        'UV Lightmap',\n        'Project Depth',\n        'Linear Depth',\n\n        'Fragment Normal',\n        'Fragment Tangent',\n        'Fragment Binormal',\n        'Base Color',\n        'Diffuse Color',\n        'Specular Color',\n        'Transparency',\n        'Metallic',\n        'Roughness',\n        'Specular Intensity',\n        'IOR',\n\n        'Direct Diffuse',\n        'Direct Specular',\n        'Direct All',\n        'Env Diffuse',\n        'Env Specular',\n        'Env All',\n        'Emissive',\n        'Light Map',\n        'Shadow',\n        'AO',\n\n        'Fresnel',\n        'Direct Transmit Diffuse',\n        'Direct Transmit Specular',\n        'Env Transmit Diffuse',\n        'Env Transmit Specular',\n        'Transmit All',\n        'Direct Internal Specular',\n        'Env Internal Specular',\n        'Internal All',\n\n        'Fog',\n    ];\n    private strComposite: string[] = [\n        'Direct Diffuse',\n        'Direct Specular',\n        'Env Diffuse',\n        'Env Specular',\n        'Emissive',\n        'Light Map',\n        'Shadow',\n        'AO',\n\n        'Normal Map',\n        'Fog',\n\n        'Tone Mapping',\n        'Gamma Correction',\n\n        'Fresnel',\n        'Transmit Diffuse',\n        'Transmit Specular',\n        'Internal Specular',\n        'TT',\n    ];\n    private strMisc: string[] = [\n        'CSM Layer Coloration',\n        'Lighting With Albedo',\n    ];\n\n    private compositeModeToggleList: Node[] = [];\n    private singleModeToggleList: Node[] = [];\n    private miscModeToggleList: Node[] = [];\n    private textComponentList: RichText[] = [];\n    private labelComponentList: Label[] = [];\n    private textContentList: string[] = [];\n    private hideButtonLabel: Label;\n    start() {\n        // get canvas resolution\n        const canvas = this.node.parent.getComponent(Canvas);\n        if (!canvas) {\n            console.error('debug-view-runtime-control should be child of Canvas');\n            return;\n        }\n\n        const uiTransform = this.node.parent.getComponent(UITransform);\n        const halfScreenWidth = uiTransform.width * 0.5;\n        const halfScreenHeight = uiTransform.height * 0.5;\n\n        let x = -halfScreenWidth + halfScreenWidth * 0.1, y = halfScreenHeight - halfScreenHeight * 0.1;\n        const width = 200, height = 20;\n\n        // new nodes\n        const miscNode = this.node.getChildByName('MiscMode');\n        const buttonNode = instantiate(miscNode);\n        buttonNode.parent = this.node;\n        buttonNode.name = 'Buttons';\n        const titleNode = instantiate(miscNode);\n        titleNode.parent = this.node;\n        titleNode.name = 'Titles';\n\n        // title\n        for (let i = 0; i < 2; i++) {\n            const newLabel = instantiate(this.EnableAllCompositeModeButton.getChildByName('Label'));\n            newLabel.setPosition(x + (i > 0 ? 50 + width * 2 : 150), y, 0.0);\n            newLabel.setScale(0.75, 0.75, 0.75);\n            newLabel.parent = titleNode;\n            const labelComponent = newLabel.getComponent(Label);\n            labelComponent.string = i ? '----------Composite Mode----------' : '----------Single Mode----------';\n            labelComponent.color = Color.WHITE;\n            labelComponent.overflow = 0;\n            this.labelComponentList[this.labelComponentList.length] = labelComponent;\n        }\n\n        y -= height;\n        // single\n        let currentRow = 0;\n        for (let i = 0; i < this.strSingle.length; i++, currentRow++) {\n            if (i === this.strSingle.length >> 1) {\n                x += width;\n                currentRow = 0;\n            }\n            const newNode = i ? instantiate(this.singleModeToggle) : this.singleModeToggle;\n            newNode.setPosition(x, y - height * currentRow, 0.0);\n            newNode.setScale(0.5, 0.5, 0.5);\n            newNode.parent = this.singleModeToggle.parent;\n\n            const textComponent = newNode.getComponentInChildren(RichText);\n            textComponent.string = this.strSingle[i];\n            this.textComponentList[this.textComponentList.length] = textComponent;\n            this.textContentList[this.textContentList.length] = textComponent.string;\n\n            newNode.on(Toggle.EventType.TOGGLE, this.toggleSingleMode, this);\n\n            this.singleModeToggleList[i] = newNode;\n        }\n\n        x += width;\n        // buttons\n        this.EnableAllCompositeModeButton.setPosition(x + 15, y, 0.0);\n        this.EnableAllCompositeModeButton.setScale(0.5, 0.5, 0.5);\n        this.EnableAllCompositeModeButton.on(Button.EventType.CLICK, this.enableAllCompositeMode, this);\n        this.EnableAllCompositeModeButton.parent = buttonNode;\n        let labelComponent = this.EnableAllCompositeModeButton.getComponentInChildren(Label);\n        this.labelComponentList[this.labelComponentList.length] = labelComponent;\n\n        const changeColorButton = instantiate(this.EnableAllCompositeModeButton);\n        changeColorButton.setPosition(x + 90, y, 0.0);\n        changeColorButton.setScale(0.5, 0.5, 0.5);\n        changeColorButton.on(Button.EventType.CLICK, this.changeTextColor, this);\n        changeColorButton.parent = buttonNode;\n        labelComponent = changeColorButton.getComponentInChildren(Label);\n        labelComponent.string = 'TextColor';\n        this.labelComponentList[this.labelComponentList.length] = labelComponent;\n\n        const HideButton = instantiate(this.EnableAllCompositeModeButton);\n        HideButton.setPosition(x + 200, y, 0.0);\n        HideButton.setScale(0.5, 0.5, 0.5);\n        HideButton.on(Button.EventType.CLICK, this.hideUI, this);\n        HideButton.parent = this.node.parent;\n        labelComponent = HideButton.getComponentInChildren(Label);\n        labelComponent.string = 'Hide UI';\n        this.labelComponentList[this.labelComponentList.length] = labelComponent;\n        this.hideButtonLabel = labelComponent;\n\n        // misc\n        y -= 40;\n        for (let i = 0; i < this.strMisc.length; i++) {\n            const newNode = instantiate(this.compositeModeToggle);\n            newNode.setPosition(x, y - height * i, 0.0);\n            newNode.setScale(0.5, 0.5, 0.5);\n            newNode.parent = miscNode;\n\n            const textComponent = newNode.getComponentInChildren(RichText);\n            textComponent.string = this.strMisc[i];\n            this.textComponentList[this.textComponentList.length] = textComponent;\n            this.textContentList[this.textContentList.length] = textComponent.string;\n\n            const toggleComponent = newNode.getComponent(Toggle);\n            toggleComponent.isChecked = i ? true : false;\n            newNode.on(Toggle.EventType.TOGGLE, i ? this.toggleLightingWithAlbedo : this.toggleCSMColoration, this);\n            this.miscModeToggleList[i] = newNode;\n        }\n\n        // composite\n        y -= 150;\n        for (let i = 0; i < this.strComposite.length; i++) {\n            const newNode = i ? instantiate(this.compositeModeToggle) : this.compositeModeToggle;\n            newNode.setPosition(x, y - height * i, 0.0);\n            newNode.setScale(0.5, 0.5, 0.5);\n            newNode.parent = this.compositeModeToggle.parent;\n\n            const textComponent = newNode.getComponentInChildren(RichText);\n            textComponent.string = this.strComposite[i];\n            this.textComponentList[this.textComponentList.length] = textComponent;\n            this.textContentList[this.textContentList.length] = textComponent.string;\n\n            newNode.on(Toggle.EventType.TOGGLE, this.toggleCompositeMode, this);\n\n            this.compositeModeToggleList[i] = newNode;\n        }\n    }\n\n    isTextMatched(textUI, textDescription) : boolean {\n        let tempText = new String(textUI);\n        const findIndex = tempText.search('>');\n        if (findIndex === -1) {\n            return textUI === textDescription;\n        } else {\n            tempText = tempText.substr(findIndex + 1);\n            tempText = tempText.substr(0, tempText.search('<'));\n            return tempText === textDescription;\n        }\n    }\n    toggleSingleMode(toggle: Toggle) {\n        const debugView = director.root!.debugView;\n        const textComponent = toggle.getComponentInChildren(RichText);\n        for (let i = 0; i < this.strSingle.length; i++) {\n            if (this.isTextMatched(textComponent.string, this.strSingle[i])) {\n                debugView.singleMode = i;\n            }\n        }\n    }\n    toggleCompositeMode(toggle: Toggle) {\n        const debugView = director.root!.debugView;\n        const textComponent = toggle.getComponentInChildren(RichText);\n        for (let i = 0; i < this.strComposite.length; i++) {\n            if (this.isTextMatched(textComponent.string, this.strComposite[i])) {\n                debugView.enableCompositeMode(i, toggle.isChecked);\n            }\n        }\n    }\n    toggleLightingWithAlbedo(toggle: Toggle) {\n        const debugView = director.root!.debugView;\n        debugView.lightingWithAlbedo = toggle.isChecked;\n    }\n    toggleCSMColoration(toggle: Toggle) {\n        const debugView = director.root!.debugView;\n        debugView.csmLayerColoration = toggle.isChecked;\n    }\n    enableAllCompositeMode(button: Button) {\n        const debugView = director.root!.debugView;\n        debugView.enableAllCompositeMode(true);\n        for (let i = 0; i < this.compositeModeToggleList.length; i++) {\n            const toggleComponent = this.compositeModeToggleList[i].getComponent(Toggle);\n            toggleComponent.isChecked = true;\n        }\n\n        let toggleComponent = this.miscModeToggleList[0].getComponent(Toggle);\n        toggleComponent.isChecked = false;\n        debugView.csmLayerColoration = false;\n        toggleComponent = this.miscModeToggleList[1].getComponent(Toggle);\n        toggleComponent.isChecked = true;\n        debugView.lightingWithAlbedo = true;\n    }\n    hideUI(button: Button) {\n        const titleNode = this.node.getChildByName('Titles');\n        const activeValue = !titleNode.active;\n        this.singleModeToggleList[0].parent.active = activeValue;\n        this.miscModeToggleList[0].parent.active = activeValue;\n        this.compositeModeToggleList[0].parent.active = activeValue;\n        this.EnableAllCompositeModeButton.parent.active = activeValue;\n        titleNode.active = activeValue;\n        this.hideButtonLabel.string = activeValue ? 'Hide UI' : 'Show UI';\n    }\n\n    private _currentColorIndex = 0;\n    private strColor: string[] = [\n        '<color=#ffffff>',\n        '<color=#000000>',\n        '<color=#ff0000>',\n        '<color=#00ff00>',\n        '<color=#0000ff>',\n    ];\n    private color: Color[] = [\n        Color.WHITE,\n        Color.BLACK,\n        Color.RED,\n        Color.GREEN,\n        Color.BLUE,\n    ];\n    changeTextColor(button: Button) {\n        this._currentColorIndex++;\n        if (this._currentColorIndex >= this.strColor.length) {\n            this._currentColorIndex = 0;\n        }\n        for (let i = 0; i < this.textComponentList.length; i++) {\n            this.textComponentList[i].string = this.strColor[this._currentColorIndex] + this.textContentList[i] + '</color>';\n        }\n        for (let i = 0; i < this.labelComponentList.length; i++) {\n            this.labelComponentList[i].color = this.color[this._currentColorIndex];\n        }\n    }\n\n    onLoad() {\n    }\n    update(deltaTime: number) {\n    }\n}\n","import { _decorator, Component, Label, Node } from 'cc';\nconst { ccclass, property } = _decorator;\n\n@ccclass('DebugNodeInfo')\nexport class DebugNodeInfo extends Component {\n\n    @property(Node) targetNode: Node;\n\n    _label: Label;\n\n    start() {\n        this._label = this.node.getComponent(Label);\n    }\n\n    update(dt: number): void {\n        if (!this.targetNode) {\n            this._label.string = \"No target !\";\n            return;\n        }\n\n        if (this._label) {\n            this._label.string = `Node position:\\nx: ${Math.floor(this.targetNode.getPosition().x)}, y: ${Math.floor(this.targetNode.getPosition().y)}`\n        }\n    }\n\n}\n\n","import { _decorator, Component, EventMouse, Node, UITransform, v3 } from 'cc';\nconst { ccclass, property } = _decorator;\n\n@ccclass('DragAndDrop')\nexport class DragAndDrop extends Component {\n\n    @property(Node) target: Node;\n    _isDragging: boolean;\n\n    protected start(): void {\n        this.node.on(Node.EventType.MOUSE_DOWN, this.onMouseDown, this);\n        this.node.on(Node.EventType.MOUSE_UP, this.onMouseUp, this);\n        this.node.on(Node.EventType.MOUSE_MOVE, this.onMouseMove, this);\n    }\n\n    onMouseDown(event: EventMouse) {\n        this._isDragging = true;\n        this.setPositionTarget(event.getLocation());\n    }\n\n    onMouseMove(event: EventMouse) {\n        if (this._isDragging) {\n            this.setPositionTarget(event.getLocation());\n        }\n    }\n\n    onMouseUp(event: EventMouse) {\n        this._isDragging = false;\n    }\n\n    setPositionTarget(worldPos) {\n        const mouseWorldPos = v3(worldPos.x, worldPos.y, 0);\n        this.target.setWorldPosition(mouseWorldPos);\n    }\n\n}\n\n","import { _decorator, Button, Component, EditBox, EventKeyboard, Game, Input, input, instantiate, KeyCode, Label, Node, NodePool, Prefab, tween, v3, Vec2, Vec3 } from 'cc';\nimport { NumberTileManager } from './NumberTileManager';\nconst { ccclass, property } = _decorator;\n\nconst TABLE_WIDTH = 512, TABLE_HEIGHT = 512;\nconst TABLE_FORMAT = [4, 4, 4, 4];\nconst ROW_SIZE = TABLE_HEIGHT / TABLE_FORMAT.length;\nconst COL_SIZE = TABLE_WIDTH / TABLE_FORMAT[0];\nconst MAX_TILES = TABLE_FORMAT.length * TABLE_FORMAT[0];\nconst MOVE_SPEED = 0.1;\n\nfunction getPosition(col, row) {\n    const startX = (-TABLE_FORMAT.length / 2 + 0.5) * COL_SIZE;\n    const startY = (TABLE_FORMAT[0] / 2 - 0.5) * ROW_SIZE;\n\n    return new Vec3(startX + COL_SIZE * col, startY - ROW_SIZE * row, 0);\n}\n\nfunction moveNumberToPos(numberTile, newPos) {\n    return new Promise((resolve, _) => {\n        numberTile['moveTween'] = tween(numberTile)\n            .to(MOVE_SPEED * 2, { position: newPos })\n            .call(() => {\n                numberTile['moveTween'] = null;\n                resolve(numberTile);\n            })\n            .start();\n    });\n}\n\nfunction canAddUp(nextNumberTile, numberTile) {\n    return nextNumberTile && nextNumberTile.canAdd && nextNumberTile !== numberTile && nextNumberTile.value == numberTile.value;\n}\n\nfunction shaking(node: Node, { duration = 0.16, distance = 10, repeat = 1 }) {\n    if (!node[\"originalPos\"]) node[\"originalPos\"] = node.getPosition();\n    const dur = duration / 8;\n    const shake = tween()\n        .by(dur, { position: v3(0, distance) })\n        .by(dur, { position: v3(0, -distance) })\n        .by(dur, { position: v3(0, -distance) })\n        .by(dur, { position: v3(0, distance) })\n        .by(dur, { position: v3(distance, 0) })\n        .by(dur, { position: v3(-distance, 0) })\n        .by(dur, { position: v3(-distance, 0) })\n        .by(dur, { position: v3(distance, 0) })\n        .call(() => {\n            node.setPosition(node[\"originalPos\"]);\n            node[\"tweenShake\"] = null;\n        })\n    const tweenShake = tween(node).repeat(repeat, shake);\n    if (node[\"tweenShake\"]) {\n        node[\"tweenShake\"].stop();\n        node.setPosition(node[\"originalPos\"]);\n    }\n    node[\"tweenShake\"] = tweenShake;\n    node[\"tweenShake\"].start();\n\n    return tweenShake;\n}\n\n@ccclass('GameManager')\nexport class GameManager extends Component {\n\n    @property(Node) table: Node;\n    @property(Prefab) numberTilePrefab: Prefab;\n\n    @property(Label) highscoreLabel: Label;\n    @property(Label) scoreLabel: Label;\n\n    @property(Node) losePopup: Node;\n    @property(Node) winPopup: Node;\n    @property(Node) menuPopup: Node;\n\n    @property(Node) levelManager: Node;\n\n    tableData: any[][];\n    canMove: boolean = true;\n    currentScore: Number = 0;\n    isPlaying: boolean = false;\n    pool: NodePool;\n    currentHighestValue: number = 64;\n    currentRandomLevel: number = 0;\n    isShowingPopup: boolean;\n\n    static instance: GameManager;\n\n    protected onLoad(): void {\n        input.on(Input.EventType.KEY_DOWN, this.onKeyDown, this);\n\n        this.tableData = new Array(TABLE_FORMAT.length).fill([]).map((_, index) => new Array(TABLE_FORMAT[index]).fill(null));\n\n        this.pool = new NodePool();\n\n        for (let i = 0; i < 16; i++) {\n            const numberTile = instantiate(this.numberTilePrefab);\n            this.pool.put(numberTile);\n        }\n    }\n\n    start() {\n        // this.gameStart();\n        // this.testLoseCondition();\n        // this.testWinCondition();\n        GameManager.instance = this;\n    }\n\n    testWinCondition() {\n        this.isPlaying = true;\n        this.spawnRandomTile({ value: 2048 });\n    }\n\n    testLoseCondition() {\n        this.isPlaying = true;\n        let value = 2;\n        for (let col = 0; col < TABLE_FORMAT.length; col++) {\n            for (let row = 0; row < TABLE_FORMAT[col]; row++) {\n                this.spawnRandomTile({ randomCol: col, randomRow: row, value });\n                value *= 2;\n            }\n        }\n        this.updateScore();\n    }\n\n    onKeyDown(event: EventKeyboard) {\n        if (!this.canMove || this.isShowingPopup) return;\n        let allPromises;\n\n        switch (event.keyCode) {\n            case KeyCode.SPACE:\n                allPromises = this.moveDown();\n                break;\n            case KeyCode.KEY_A:\n            case KeyCode.ARROW_LEFT:\n                allPromises = this.moveLeft();\n                break;\n            case KeyCode.KEY_D:\n            case KeyCode.ARROW_RIGHT:\n                allPromises = this.moveRight();\n                break;\n            case KeyCode.KEY_S:\n            case KeyCode.ARROW_DOWN:\n                allPromises = this.moveDown();\n                break;\n            case KeyCode.KEY_W:\n            case KeyCode.ARROW_UP:\n                allPromises = this.moveUp();\n                break;\n        }\n\n        if (allPromises && allPromises.length > 0) {\n            this.canMove = false;\n\n            Promise.all(allPromises)\n                .then(() => {\n                    this.spawnRandomTile();\n                    this.updateScore();\n\n                    if (this.isWin()) {\n                        this.winPopup.emit(\"SHOW_POPUP\", this.currentScore);\n                        this.isPlaying = true;\n                    } else if (this.isLost()) {\n                        this.losePopup.emit(\"SHOW_POPUP\", this.currentScore);\n                        this.isPlaying = true;\n                    } else {\n                        this.canMove = true;\n                    }\n                });\n\n        } else if (this.isLost()) {\n            console.log(\"You lose\");\n            this.canMove = false;\n            this.isPlaying = true;\n            this.losePopup.emit(\"SHOW_POPUP\", this.currentScore);\n        } else {\n            // nothing move, shake the table to let user know\n            shaking(this.node, {});\n        }\n    }\n\n    updateScore() {\n        this.currentScore = globalThis._.flatten(this.tableData).reduce((acc, curr) => {\n            if (!curr) return acc;\n            return acc + curr.value;\n        }, 0);\n\n        this.scoreLabel.string = this.currentScore.toString();\n    }\n\n    isWin() {\n        return globalThis._.flatten(this.tableData).findIndex(numberTile => numberTile && numberTile.value === 2048) > -1;\n    }\n\n    isLost() {\n        const isFullTable = globalThis._.flatten(this.tableData).filter(element => element !== null).length >= MAX_TILES;\n\n        if (!isFullTable) return;\n        let availableMove = 0;\n\n        for (let col = 0; col < TABLE_FORMAT.length; col++) {\n            for (let row = 0; row < TABLE_FORMAT[col]; row++) {\n                if (!this.tableData[col][row]) continue;\n\n                const currVal = this.tableData[col][row].value;\n                // up\n                if (this.tableData[col - 1] && this.tableData[col - 1][row] && this.tableData[col - 1][row].value == currVal) {\n                    availableMove++;\n                }\n                // down\n                if (this.tableData[col + 1] && this.tableData[col + 1][row] && this.tableData[col + 1][row].value == currVal) {\n                    availableMove++;\n                }\n                // left\n                if (this.tableData[col] && this.tableData[col][row - 1] && this.tableData[col][row - 1].value == currVal) {\n                    availableMove++;\n                }\n                // right\n                if (this.tableData[col] && this.tableData[col][row + 1] && this.tableData[col][row + 1].value == currVal) {\n                    availableMove++;\n                }\n            }\n        }\n\n\n        return availableMove == 0;\n    }\n\n    getNumberTile() {\n        if (this.pool.size() > 0) {\n            return this.pool.get();\n        } else {\n            return instantiate(this.numberTilePrefab);\n        }\n    }\n\n    removeNumberTile(node) {\n        node.setParent(null);\n        this.pool.put(node);\n    }\n\n    spawnRandomTile(data = null) {\n        const numberTile: any = this.getNumberTile();\n        const { randomCol, randomRow, value } = Object.assign({}, this.getRandomColRow(), data);\n        const randomPos = getPosition(randomCol, randomRow);\n        const randomPool = [2, 4].concat([8, 16, 32, 64].slice(0, this.currentRandomLevel));\n        let randomValue = randomPool[Math.floor(randomPool.length * Math.random())];\n        // let randomValue = 2;\n        if (value) {\n            randomValue = value;\n        }\n\n        numberTile.setParent(this.table);\n        numberTile.setPosition(randomPos);\n        numberTile.manager = numberTile.getComponent(NumberTileManager);\n        numberTile.value = randomValue;\n        numberTile.col = randomCol;\n        numberTile.row = randomRow;\n        numberTile.canAdd = true;\n\n        numberTile.manager.updateValue(randomValue);\n        this.tableData[randomCol][randomRow] = numberTile;\n    }\n\n    getRandomColRow() {\n        let randomCol = Math.floor(TABLE_FORMAT.length * Math.random());\n        let randomRow = Math.floor(TABLE_FORMAT[0] * Math.random());\n\n        while (this.tableData[randomCol][randomRow] !== null) {\n            randomCol = Math.floor(TABLE_FORMAT.length * Math.random());\n            randomRow = Math.floor(TABLE_FORMAT[0] * Math.random());\n        }\n\n        return { randomCol, randomRow };\n    }\n\n    addUpTile(nextNumberTile, numberTile, newPos) {\n        const newValue = numberTile['value'] * 2;\n        if (newValue > this.currentHighestValue) {\n            this.currentHighestValue = newValue;\n            this.levelManager.emit(\"UPDATE_LEVEL\", this.currentRandomLevel);\n            this.currentRandomLevel++;\n        }\n\n        nextNumberTile.value = newValue;\n        nextNumberTile.canAdd = false;\n\n        return moveNumberToPos(numberTile, newPos)\n            .then(() => {\n                nextNumberTile.manager.updateValue(newValue);\n                nextNumberTile.canAdd = true;\n                this.removeNumberTile(numberTile);\n            })\n    }\n\n    moveDown() {\n        let promises = [];\n        for (let col = 0; col < TABLE_FORMAT.length; col++) {\n            for (let row = TABLE_FORMAT[col] - 1; row >= 0; row--) {\n                if (!this.tableData[col][row]) continue;\n                const numberTile = this.tableData[col][row];\n\n                let nextRow = row;\n                let nextNumberTile = this.tableData[col][nextRow + 1];\n                while (nextNumberTile === null || canAddUp(nextNumberTile, numberTile)) {\n                    nextRow++;\n                    nextNumberTile = this.tableData[col][nextRow + 1];\n                }\n\n                nextNumberTile = this.tableData[col][nextRow];\n                this.tableData[col][row] = null;\n\n                const isAddUp = canAddUp(nextNumberTile, numberTile);\n                const newPos = getPosition(col, nextRow);\n\n                if (isAddUp) {\n                    promises.push(this.addUpTile(nextNumberTile, numberTile, newPos));\n                } else {\n                    this.tableData[col][nextRow] = numberTile;\n                    if (row == nextRow) continue;\n                    promises.push(moveNumberToPos(numberTile, newPos));\n                }\n            }\n        }\n\n        return promises;\n    }\n\n    moveUp() {\n        let promises = [];\n\n        for (let col = 0; col < TABLE_FORMAT.length; col++) {\n            for (let row = 0; row < TABLE_FORMAT[col]; row++) {\n                if (!this.tableData[col][row]) continue;\n                const numberTile = this.tableData[col][row];\n\n                let nextRow = row;\n                let nextNumberTile = this.tableData[col][nextRow - 1];\n                while (nextNumberTile === null || canAddUp(nextNumberTile, numberTile)) {\n                    nextRow--;\n                    nextNumberTile = this.tableData[col][nextRow - 1];\n                }\n\n                nextNumberTile = this.tableData[col][nextRow];\n                this.tableData[col][row] = null;\n\n                const isAddUp = canAddUp(nextNumberTile, numberTile);\n                const newPos = getPosition(col, nextRow);\n\n                if (isAddUp) {\n                    promises.push(this.addUpTile(nextNumberTile, numberTile, newPos));\n                } else {\n                    this.tableData[col][nextRow] = numberTile;\n                    if (row == nextRow) continue;\n                    promises.push(moveNumberToPos(numberTile, newPos));\n                }\n            }\n        }\n\n        return promises;\n    }\n\n    moveRight() {\n        let promises = [];\n\n        for (let row = 0; row < TABLE_FORMAT[0]; row++) {\n            for (let col = TABLE_FORMAT.length; col >= 0; col--) {\n                if (!this.tableData[col] || !this.tableData[col][row]) continue;\n                const numberTile = this.tableData[col][row];\n\n                let nextCol = col;\n                let nextNumberTile = this.tableData[nextCol + 1] && this.tableData[nextCol + 1][row];\n                while (nextNumberTile === null || canAddUp(nextNumberTile, numberTile)) {\n                    nextCol++;\n                    nextNumberTile = this.tableData[nextCol + 1] && this.tableData[nextCol + 1][row];\n                }\n\n                nextNumberTile = this.tableData[nextCol][row];\n                this.tableData[col][row] = null;\n\n                const isAddUp = canAddUp(nextNumberTile, numberTile);\n                const newPos = getPosition(nextCol, row);\n\n                if (isAddUp) {\n                    promises.push(this.addUpTile(nextNumberTile, numberTile, newPos));\n                } else {\n                    this.tableData[nextCol][row] = numberTile;\n                    if (col == nextCol) continue;\n                    promises.push(moveNumberToPos(numberTile, newPos));\n                }\n            }\n        }\n\n        return promises;\n    }\n\n    moveLeft() {\n        let promises = [];\n\n        for (let row = 0; row < TABLE_FORMAT[0]; row++) {\n            for (let col = 0; col < TABLE_FORMAT.length; col++) {\n                if (!this.tableData[col] || !this.tableData[col][row]) continue;\n                const numberTile = this.tableData[col][row];\n\n                let nextCol = col;\n                let nextNumberTile = this.tableData[nextCol - 1] && this.tableData[nextCol - 1][row];\n                while (nextNumberTile === null || canAddUp(nextNumberTile, numberTile)) {\n                    nextCol--;\n                    nextNumberTile = this.tableData[nextCol - 1] && this.tableData[nextCol - 1][row];\n                }\n\n                nextNumberTile = this.tableData[nextCol][row];\n                this.tableData[col][row] = null;\n\n                const isAddUp = canAddUp(nextNumberTile, numberTile);\n                const newPos = getPosition(nextCol, row);\n\n                if (isAddUp) {\n                    promises.push(this.addUpTile(nextNumberTile, numberTile, newPos));\n                } else {\n                    this.tableData[nextCol][row] = numberTile;\n                    if (col == nextCol) continue;\n                    promises.push(moveNumberToPos(numberTile, newPos));\n                }\n            }\n        }\n\n        return promises;\n    }\n\n    gameReset() {\n        this.tableData = new Array(TABLE_FORMAT.length).fill([]).map((_, index) => new Array(TABLE_FORMAT[index]).fill(null));\n        this.currentScore = 0;\n        this.scoreLabel.string = \"0\";\n        this.canMove = true;\n        this.isPlaying = false;\n\n        this.table.removeAllChildren();\n        this.winPopup.emit(\"HIDE_POPUP\");\n        this.losePopup.emit(\"HIDE_POPUP\");\n        this.levelManager.emit(\"RESET_LEVEL\");\n    }\n\n    onRetryGame() {\n        this.gameReset();\n        this.gameStart();\n    }\n\n    onMenuClick() {\n        this.gameReset();\n        this.menuPopup.emit(\"SHOW_POPUP\");\n    }\n\n    gameStart() {\n        if (this.isPlaying) return;\n        // this.spawnRandomTile({ randomCol: 1, randomRow: 1, value: 64 });\n        // this.spawnRandomTile({ randomCol: 1, randomRow: 2, value: 64 });\n        this.isPlaying = true;\n        this.spawnRandomTile();\n        this.spawnRandomTile();\n        this.updateScore();\n    }\n}\n\n","import { _decorator, BlockInputEvents, Component, instantiate, Label, Node, Prefab, sys, tween, UIOpacity } from 'cc';\nimport { STORAGE_KEY } from './HighscoreStorage';\nconst { ccclass, property } = _decorator;\n\n@ccclass('HighscorePopup')\nexport class HighscorePopup extends Component {\n\n    @property(Node) dataTable: Node;\n    @property(Prefab) dataCell: Prefab;\n\n    start() {\n        this.node.on(\"SHOW_POPUP\", this.showPopup, this);\n        this.node.on(\"HIDE_POPUP\", this.hidePopup, this);\n    }\n\n    showPopup() {\n        let highscoreData = JSON.parse(sys.localStorage.getItem(STORAGE_KEY)) || [];\n        // let highscoreData = [{ name: \"kakalak\", score: 100000 }, { name: \"hihi\", score: 5000 }, { name: \"haha\", score: 20000 }];\n        highscoreData.sort((a, b) => b.score - a.score);\n        highscoreData = highscoreData.slice(0, 6);\n        this.dataTable.removeAllChildren();\n        highscoreData.forEach(data => {\n            const dataCell = instantiate(this.dataCell);\n            dataCell.setParent(this.dataTable);\n\n            dataCell.getComponentsInChildren(Label).forEach((label, index) => {\n                if (index == 0) {\n                    label.string = data.name;\n                } else {\n                    label.string = data.score as any;\n                }\n            });\n        })\n\n        this.node.getComponent(UIOpacity).opacity = 0;\n        this.node.getComponentInChildren(BlockInputEvents).enabled = true;\n        tween(this.node.getComponent(UIOpacity))\n            .to(0.5, { opacity: 255 })\n            .start();\n    }\n\n    hidePopup() {\n        tween(this.node.getComponent(UIOpacity))\n            .to(0.5, { opacity: 0 })\n            .call(() => {\n                this.node.getComponentInChildren(BlockInputEvents).enabled = false;\n            })\n            .start();\n    }\n\n}\n\n","import { _decorator, Button, Component, EditBox, log, Node, sys } from 'cc';\nimport { GameManager } from './GameManager';\nconst { ccclass, property } = _decorator;\n\nexport const STORAGE_KEY = \"highscoreData\";\n\n@ccclass('HighscoreStorage')\nexport class HighscoreStorage extends Component {\n\n    @property(EditBox) playerName: EditBox;\n    @property(Button) submitButton: Button;\n\n    protected start(): void {\n        this.submitButton.interactable = false;\n    }\n\n    onEditEnd() {\n        if (!this.playerName.string) {\n            this.submitButton.interactable = false;\n        } else {\n            this.submitButton.interactable = true;\n        }\n    }\n\n    submitScore() {\n        const highscoreData = JSON.parse(sys.localStorage.getItem(STORAGE_KEY)) || [];\n\n        const userData = {\n            name: this.playerName.string,\n            score: GameManager?.instance?.currentScore ?? 0,\n        };\n\n        if (highscoreData.find(data => this.playerName.string == data.name)) {\n            highscoreData.find(data => this.playerName.string == data.name).score = GameManager?.instance?.currentScore ?? 0\n        } else {\n            highscoreData.push(userData);\n        }\n\n        sys.localStorage.setItem(STORAGE_KEY, JSON.stringify(highscoreData));\n        console.log(sys.localStorage);\n    }\n\n}\n\n","import { _decorator, Animation, bezier, BlockInputEvents, Component, ITweenOption, Node, tween, UIOpacity, v2, Vec2, Vec3 } from 'cc';\nimport { GameManager } from './GameManager';\nconst { ccclass, property } = _decorator;\n\nfunction tweenBezier2DTo(target: Node, duration: number, c1: Vec2, c2: Vec2, to: Vec2, opts?: ITweenOption) {\n    if (target['bezierX']) target['bezierX'].stop();\n    if (target['bezierY']) target['bezierY'].stop();\n\n    let c0x = c1.x, c0y = c1.y,\n        c1x = c2.x, c1y = c2.y;\n    const _targetX = { value: target.getPosition().x };\n    const _targetY = { value: target.getPosition().y };\n    const aOpts: ITweenOption = opts || Object.create(null);\n    aOpts.progress = function (startX: number, endX: number, currentX: number, t: number) {\n        currentX = bezier(startX, c0x, c1x, endX, t);\n        return currentX;\n    }\n    aOpts.onUpdate = function () {\n        if (target && target.position) {\n            target.setPosition(new Vec3(_targetX.value, target.position.y, target.position.z));\n        }\n    }\n    const bOpts: ITweenOption = opts || Object.create(null);\n    bOpts.progress = function (startY: number, endY: number, currentY: number, t: number) {\n        currentY = bezier(startY, c0y, c1y, endY, t);\n        return currentY;\n    }\n    bOpts.onUpdate = function () {\n        if (target && target.position) {\n            target.setPosition(new Vec3(target.position.x, _targetY.value, target.position.z));\n        }\n    }\n    target['bezierX'] = tween(_targetX)\n        .to(duration, { value: to.x }, aOpts)\n        .call(() => {\n            target['bezierX'] = null;\n        })\n        .start();\n    target['bezierY'] = tween(_targetY)\n        .to(duration, { value: to.y }, bOpts)\n        .call(() => {\n            target['bezierY'] = null;\n        })\n        .start();\n}\n\n@ccclass('LevelManager')\nexport class LevelManager extends Component {\n\n    @property(Node) gradient: Node;\n    @property(Node) content: Node;\n    @property(Node) levelUI: Node;\n\n    protected start(): void {\n        this.node.on(\"UPDATE_LEVEL\", this.updateLevel, this);\n        this.node.on(\"RESET_LEVEL\", this.resetLevel, this);\n        // this.showAnimationLevelUp(this.levelUI.children[2]);\n    }\n\n    resetLevel() {\n        this.levelUI.children.forEach((node) => {\n            node.active = false;\n        });\n    }\n\n    updateLevel(levelIndex) {\n        levelIndex = Math.min(levelIndex, this.levelUI.children.length - 1);\n\n        if (!this.levelUI.children[levelIndex].active) {\n            return this.showAnimationLevelUp(this.levelUI.children[levelIndex]);\n        }\n        this.levelUI.children.forEach((node, index) => {\n            if (index > levelIndex) {\n                node.active = false;\n            } else {\n                node.active = true;\n            }\n        });\n\n    }\n\n    showAnimationLevelUp(levelTile) {\n        GameManager.instance.isShowingPopup = true;\n        this.gradient.getComponent(BlockInputEvents).enabled = true;\n        this.gradient.getComponent(UIOpacity).opacity = 0;\n        this.content.getComponent(UIOpacity).opacity = 0;\n        levelTile.active = true;\n        levelTile.getComponent(UIOpacity).opacity = 0;\n        const originalPos = levelTile.getPosition();\n        levelTile.setPosition(v2(0, 0));\n        const point1 = v2(originalPos.x / 3 * 1, 75);\n        const point2 = v2(originalPos.x / 3 * 2, 75);\n\n        const highlightLevelTween = tween(levelTile.getComponent(UIOpacity))\n            .to(0.5, { opacity: 255 })\n            .call(() => {\n                levelTile.getComponent(Animation).play(\"levelUpAnim\");\n            })\n            .delay(1.2)\n            .call(() => {\n                levelTile.getComponent(Animation).play(\"levelUpAnim\");\n            })\n            .delay(1)\n            .call(() => {\n                tweenBezier2DTo(levelTile, 0.3, point1, point2, originalPos);\n            })\n            .delay(0.3)\n            .call(() => {\n                levelTile.getComponent(Animation).play(\"landingAnim\");\n            });\n\n        tween(this.gradient.getComponent(UIOpacity))\n            .to(0.5, { opacity: 255 })\n            .call(() => {\n                tween(this.content.getComponent(UIOpacity))\n                    .to(0.5, { opacity: 255 })\n                    .start();\n            })\n            .delay(0.5)\n            .call(() => {\n                highlightLevelTween.start();\n            })\n            .delay(2.7)\n            .call(() => {\n                tween(this.content.getComponent(UIOpacity))\n                    .to(0.5, { opacity: 0 })\n                    .start();\n            })\n            .to(0.5, { opacity: 0 })\n            .call(() => {\n                this.gradient.getComponent(BlockInputEvents).enabled = false;\n                GameManager.instance.isShowingPopup = false;\n            })\n            .start()\n    }\n\n}\n\n","import { _decorator, BlockInputEvents, Button, Component, Label, Node, tween, UIOpacity } from 'cc';\nimport { GameManager } from './GameManager';\nconst { ccclass, property } = _decorator;\n\n@ccclass('MenuManager')\nexport class MenuManager extends Component {\n\n    @property(Node) playButton: Node;\n\n    start() {\n        this.node.on(\"SHOW_POPUP\", this.showPopup, this);\n        this.node.on(\"HIDE_POPUP\", this.hidePopup, this);\n\n        this.showPopup(true);\n    }\n\n    hidePopup() {\n        this.node.active = true;\n        const opacityComp = this.node.getComponent(UIOpacity);\n        const buttonComps = this.node.getComponentsInChildren(Button);\n\n        if (opacityComp) {\n            tween(opacityComp)\n                .to(0.5, { opacity: 0 })\n                .call(() => {\n                    this.node.getComponentInChildren(BlockInputEvents).enabled = false;\n                })\n                .start()\n        }\n\n        if (buttonComps) {\n            buttonComps.forEach(button => button.interactable = false);\n        }\n    }\n\n    showPopup(isStartGame) {\n        this.node.active = true;\n        const opacityComp = this.node.getComponent(UIOpacity);\n        const buttonComps = this.node.getComponentsInChildren(Button);\n        this.node.getComponentInChildren(BlockInputEvents).enabled = true;\n\n        if (GameManager.instance && GameManager.instance.isPlaying) {\n            this.playButton.getComponentInChildren(Label).string = \"Resume\";\n        } else {\n            this.playButton.getComponentInChildren(Label).string = \"Play\";\n        }\n        if (isStartGame) {\n            if (opacityComp) opacityComp.opacity = 255;\n            if (buttonComps) {\n                buttonComps.forEach(button => button.interactable = true);\n            }\n        } else {\n            if (opacityComp) {\n                tween(opacityComp)\n                    .to(0.5, { opacity: 255 })\n                    .call(() => {\n                        if (buttonComps) {\n                            buttonComps.forEach(button => button.interactable = true);\n                        }\n                    })\n                    .start()\n            }\n        }\n    }\n}\n\n","import { _decorator, Component, Node, Sprite, SpriteFrame, Animation } from 'cc';\nconst { ccclass, property } = _decorator;\n\n@ccclass('NumberTileManager')\nexport class NumberTileManager extends Component {\n\n    @property(SpriteFrame) numberSpriteFrames: SpriteFrame[] = [];\n\n    updateValue(value) {\n        const spriteIndex = Math.log2(value) - 1;\n        this.node.getComponent(Sprite).spriteFrame = this.numberSpriteFrames[spriteIndex];\n        this.node.getComponent(Animation).play();\n    }\n\n}\n\n","import { _decorator, BlockInputEvents, Button, Component, Label, Node, Sprite, tween, UIOpacity } from 'cc';\nconst { ccclass, property } = _decorator;\n\n@ccclass('LosePopup')\nexport class LosePopup extends Component {\n\n    @property(Node) fadeInList: Node[] = [];\n    @property(Label) score: Label;\n\n    start() {\n        this.node.on(\"SHOW_POPUP\", this.showPopup, this);\n        this.node.on(\"HIDE_POPUP\", this.hidePopup, this);\n    }\n\n    hidePopup() {\n        tween(this.node.getComponent(UIOpacity))\n            .to(0.5, { opacity: 0 })\n            .call(() => {\n                this.node.getComponentInChildren(BlockInputEvents).enabled = false;\n            })\n            .start();\n    }\n\n    showPopup(score = 0) {\n        this.node.active = true;\n        this.node.getComponent(UIOpacity).opacity = 0;\n        this.node.getComponentInChildren(BlockInputEvents).enabled = true;\n        tween(this.node.getComponent(UIOpacity))\n            .to(0.5, { opacity: 255 })\n            .start();\n\n        let delay = 0;\n        this.fadeInList.forEach(node => {\n            delay += 0.5;\n\n            const buttonComps = node.getComponentsInChildren(Button);\n            const opacityComp = node.getComponent(UIOpacity) || node.addComponent(UIOpacity);\n            if (opacityComp) {\n                opacityComp.opacity = 0;\n                if (buttonComps) {\n                    buttonComps.forEach(button => button.interactable = false);\n                }\n\n                tween(opacityComp)\n                    .delay(delay)\n                    .to(0.3, { opacity: 255 })\n                    .call(() => {\n                        if (buttonComps) {\n                            buttonComps.forEach(button => button.interactable = true);\n                        }\n                    })\n                    .start();\n            }\n        });\n\n        this.score.string = score.toString();\n    }\n\n}\n\n"]}