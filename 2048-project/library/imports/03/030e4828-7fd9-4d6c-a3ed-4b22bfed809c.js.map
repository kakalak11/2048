{"version":3,"sources":["../../../../assets/script/assets/script/leaderBoardScript.js"],"names":["Emitter","require","cc","Class","extends","Component","properties","content","Node","itemPrefab","Prefab","userNameBox","EditBox","score","Label","_data","_bestScore","_bestPlayer","onClickLeaderBoardButton","node","active","opacity","runAction","fadeIn","onClickReturn","sequence","fadeOut","callFunc","onClickSave","value","string","key","setItem","_updateLeaderBoard","clear","removeItem","index","property","warn","parseInt","item","instantiate","addChild","getComponent","onLoad","sys","localStorage","start"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAMA,UAAUC,QAAQ,UAAR,CAAhB;;AAEAC,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,iBAASL,GAAGM,IADJ;AAERC,oBAAYP,GAAGQ,MAFP;AAGRC,qBAAaT,GAAGU,OAHR;AAIRC,eAAOX,GAAGY,KAJF;AAKRC,eAAO,IALC;AAMRC,oBAAY,CANJ;AAORC,qBAAa;AAPL,KAHP;;AAaL;;AAEAC,8BAA0B,oCAAY;AAClC,aAAKC,IAAL,CAAUC,MAAV,GAAmB,IAAnB;AACA,aAAKD,IAAL,CAAUE,OAAV,GAAoB,CAApB;AACA,aAAKF,IAAL,CAAUG,SAAV,CAAoBpB,GAAGqB,MAAH,CAAU,IAAV,EAAgB,GAAhB,CAApB;AACA;AACH,KApBI;;AAsBLC,mBAAe,yBAAY;AAAA;;AACvB,aAAKL,IAAL,CAAUG,SAAV,CAAoBpB,GAAGuB,QAAH,CAChBvB,GAAGwB,OAAH,CAAW,IAAX,EAAiB,CAAjB,CADgB,EAEhBxB,GAAGyB,QAAH,CAAY;AAAA,mBAAM,MAAKR,IAAL,CAAUC,MAAV,GAAmB,KAAzB;AAAA,SAAZ,CAFgB,CAApB;AAIH,KA3BI;;AA6BLQ,iBAAa,uBAAY;AACrB,YAAIC,QAAQ,KAAKhB,KAAL,CAAWiB,MAAvB;AACA,YAAIC,MAAM,KAAKpB,WAAL,CAAiBmB,MAA3B;AACA,aAAKnB,WAAL,CAAiBmB,MAAjB,GAA0B,EAA1B;AACA,aAAKf,KAAL,CAAWiB,OAAX,CAAmBD,GAAnB,EAAwBF,KAAxB;AACA;AACH,KAnCI;;AAqCLI,wBAAoB,8BAAY;AAC5B,aAAKlB,KAAL,CAAWmB,KAAX;AACA,aAAKnB,KAAL,CAAWiB,OAAX,CAAmB,SAAnB,EAA8B,GAA9B;AACA,aAAKjB,KAAL,CAAWiB,OAAX,CAAmB,WAAnB,EAAgC,IAAhC;AACA,aAAKjB,KAAL,CAAWiB,OAAX,CAAmB,WAAnB,EAAgC,GAAhC;AACA,aAAKjB,KAAL,CAAWiB,OAAX,CAAmB,WAAnB,EAAgC,IAAhC;AACA,aAAKjB,KAAL,CAAWoB,UAAX,CAAsB,OAAtB;AACA,YAAIC,QAAQ,CAAZ;;AAEA,aAAK,IAAMC,QAAX,IAAuB,KAAKtB,KAA5B,EAAmC;AAC/B,gBAAIsB,aAAa,QAAjB,EAA2B;AAC3BD;AACAlC,eAAGoC,IAAH,CAAQF,KAAR;AACA,gBAAI,KAAKpB,UAAL,GAAkBuB,SAAS,KAAKxB,KAAL,CAAWsB,QAAX,CAAT,CAAtB,EAAsD;AAClD,qBAAKrB,UAAL,GAAkBuB,SAAS,KAAKxB,KAAL,CAAWsB,QAAX,CAAT,CAAlB;AACA,qBAAKpB,WAAL,GAAmBoB,QAAnB;AACH;AACD,gBAAIG,OAAOtC,GAAGuC,WAAH,CAAe,KAAKhC,UAApB,CAAX;AACA,iBAAKF,OAAL,CAAamC,QAAb,CAAsBF,IAAtB;AACAA,iBAAKG,YAAL,CAAkBzC,GAAGY,KAArB,EAA4BgB,MAA5B,kBAAkDM,KAAlD,oBAAsEC,QAAtE,UAAmF,KAAKtB,KAAL,CAAWsB,QAAX,CAAnF;AACH;AACJ,KA1DI;;AA4DLO,UA5DK,oBA4DI;AACL,aAAK7B,KAAL,GAAab,GAAG2C,GAAH,CAAOC,YAApB;AACA,aAAKb,kBAAL;AACH,KA/DI;AAiELc,SAjEK,mBAiEG,CAEP;AAnEI;;AAqEL;AArEJ","file":"leaderBoardScript.js","sourceRoot":"../../../../assets/script","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/class.html\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/class.html\n// Learn Attribute:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] https://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\n\nconst Emitter = require('mEmitter');\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        content: cc.Node,\n        itemPrefab: cc.Prefab,\n        userNameBox: cc.EditBox,\n        score: cc.Label,\n        _data: null,\n        _bestScore: 0,\n        _bestPlayer: '',\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onClickLeaderBoardButton: function () {\n        this.node.active = true;\n        this.node.opacity = 0;\n        this.node.runAction(cc.fadeIn(0.25, 255));\n        // this._updateLeaderBoard();\n    },\n\n    onClickReturn: function () {\n        this.node.runAction(cc.sequence(\n            cc.fadeOut(0.25, 0),\n            cc.callFunc(() => this.node.active = false),\n        ));\n    },\n\n    onClickSave: function () {\n        let value = this.score.string;\n        let key = this.userNameBox.string;\n        this.userNameBox.string = '';\n        this._data.setItem(key, value);\n        return;\n    },\n\n    _updateLeaderBoard: function () {\n        this._data.clear();\n        this._data.setItem('kakalak', 200);\n        this._data.setItem('kakalak11', 2054);\n        this._data.setItem('kakalak22', 300);\n        this._data.setItem('kakalak33', 3000);\n        this._data.removeItem('debug');\n        let index = 0;\n\n        for (const property in this._data) {\n            if (property === 'length') return;\n            index++;\n            cc.warn(index);\n            if (this._bestScore < parseInt(this._data[property])) {\n                this._bestScore = parseInt(this._data[property]);\n                this._bestPlayer = property;\n            }\n            let item = cc.instantiate(this.itemPrefab);\n            this.content.addChild(item);\n            item.getComponent(cc.Label).string = `__________${index}__________\\n${property}\\n${this._data[property]}`;\n        }\n    },\n\n    onLoad() {\n        this._data = cc.sys.localStorage;\n        this._updateLeaderBoard();\n    },\n\n    start() {\n\n    },\n\n    // update (dt) {},\n});\n"]}