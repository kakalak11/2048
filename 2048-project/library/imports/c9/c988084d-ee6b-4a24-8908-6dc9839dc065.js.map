{"version":3,"sources":["..\\..\\..\\..\\assets\\script/assets\\script\\gameBoard.js"],"names":["Emitter","require","cc","Class","extends","Component","properties","tilePrefab","Prefab","tilesRows","Node","_onKeyDown","event","keyCode","macro","KEY","right","_moveRight","left","_moveLeft","node","children","forEach","numbers","element","filter","active","zeros","newArray","concat","removeAllChildren","addChild","shift","index","runAction","moveTo","log","_moveDown","_setupGrid","i","tile","instantiate","Math","random","setPosition","v2","getComponent","setNumber","_generateRandomValue","randomTile","parseInt","onLoad","systemEvent","on","SystemEvent","EventType","KEY_DOWN","start","update","dt"],"mappings":"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","file":"gameBoard.js","sourceRoot":"..\\..\\..\\..\\assets\\script","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] https://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nconst Emitter = require('event');\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        tilePrefab: cc.Prefab,\r\n        tilesRows: [cc.Node],\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    _onKeyDown: function (event) {\r\n        switch (event.keyCode) {\r\n            case cc.macro.KEY.right:\r\n                this._moveRight();\r\n                break;\r\n            case cc.macro.KEY.left:\r\n                this._moveLeft();\r\n                break;\r\n        }\r\n    },\r\n\r\n    _moveRight: function () {\r\n        this.node.children.forEach(element => {\r\n            let numbers = element.children.filter(element => element.active);\r\n            let zeros = element.children.filter(element => !element.active);\r\n            let newArray = zeros.concat(numbers);\r\n            element.removeAllChildren(true);\r\n            element.addChild(newArray.shift());\r\n            element.addChild(newArray.shift());\r\n            element.addChild(newArray.shift());\r\n            element.addChild(newArray.shift());\r\n            element.children.forEach((element, index) => element.runAction(cc.moveTo(0.25, -157.5 + 105 * index, 0)));\r\n            cc.log(element.children);\r\n        }, this.tilePrefab);\r\n    },\r\n\r\n    _moveLeft: function() {\r\n        this.node.children.forEach(element => {\r\n            let numbers = element.children.filter(element => element.active);\r\n            let zeros = element.children.filter(element => !element.active);\r\n            let newArray = numbers.concat(zeros);\r\n            element.removeAllChildren(true);\r\n            element.addChild(newArray.shift());\r\n            element.addChild(newArray.shift());\r\n            element.addChild(newArray.shift());\r\n            element.addChild(newArray.shift());\r\n            element.children.forEach((element, index) => element.runAction(cc.moveTo(0.25, -157.5 + 105 * index, 0)));\r\n            cc.log(element.children);\r\n        }, this.tilePrefab)\r\n    },\r\n\r\n    _moveDown: function() {\r\n        // this.node.children.forEach((element, index) => {\r\n        //     for (let i = 0; i < 3; i++) {\r\n\r\n        //     }\r\n        // });\r\n    },\r\n\r\n    _setupGrid() {\r\n        this.node.children.forEach(element => {\r\n            for (let i = 0; i < 4; i++) {\r\n                let tile = cc.instantiate(this.tilePrefab);\r\n                tile.active = Math.random() > 0.7 ? true : false;\r\n                tile.setPosition(cc.v2((-415 / 2 + 50) + 105 * i, 0));\r\n                tile.getComponent('tilesScript').setNumber(2);\r\n                element.addChild(tile);\r\n            }\r\n        });\r\n    },\r\n\r\n    _generateRandomValue() {\r\n        let randomTile = this.node.children[parseInt(Math.random() * 3)].children[parseInt(Math.random() * 3)];\r\n        cc.log(randomTile);\r\n    },\r\n\r\n    onLoad() {\r\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN, this._onKeyDown, this);\r\n    },\r\n\r\n    start() {\r\n        this._setupGrid();\r\n    },\r\n\r\n    update(dt) { },\r\n});\r\n"]}