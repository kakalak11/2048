{"version":3,"sources":["leaderBoardScript.js"],"names":["Emitter","require","cc","Class","extends","Component","properties","content","Node","itemPrefab","Prefab","userNameBox","EditBox","score","Label","_data","_bestScore","_bestPlayer","onClickLeaderBoardButton","node","active","opacity","runAction","fadeIn","onClickReturn","sequence","fadeOut","callFunc","onClickSave","value","string","key","setItem","_updateLeaderBoard","clear","removeItem","index","property","warn","parseInt","item","instantiate","addChild","getComponent","onLoad","sys","localStorage","start"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAMA,UAAUC,QAAQ,UAAR,CAAhB;;AAEAC,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,iBAASL,GAAGM,IADJ;AAERC,oBAAYP,GAAGQ,MAFP;AAGRC,qBAAaT,GAAGU,OAHR;AAIRC,eAAOX,GAAGY,KAJF;AAKRC,eAAO,IALC;AAMRC,oBAAY,CANJ;AAORC,qBAAa;AAPL,KAHP;;AAaL;;AAEAC,8BAA0B,oCAAY;AAClC,aAAKC,IAAL,CAAUC,MAAV,GAAmB,IAAnB;AACA,aAAKD,IAAL,CAAUE,OAAV,GAAoB,CAApB;AACA,aAAKF,IAAL,CAAUG,SAAV,CAAoBpB,GAAGqB,MAAH,CAAU,IAAV,EAAgB,GAAhB,CAApB;AACA;AACH,KApBI;;AAsBLC,mBAAe,yBAAY;AAAA;;AACvB,aAAKL,IAAL,CAAUG,SAAV,CAAoBpB,GAAGuB,QAAH,CAChBvB,GAAGwB,OAAH,CAAW,IAAX,EAAiB,CAAjB,CADgB,EAEhBxB,GAAGyB,QAAH,CAAY;AAAA,mBAAM,MAAKR,IAAL,CAAUC,MAAV,GAAmB,KAAzB;AAAA,SAAZ,CAFgB,CAApB;AAIH,KA3BI;;AA6BLQ,iBAAa,uBAAY;AACrB,YAAIC,QAAQ,KAAKhB,KAAL,CAAWiB,MAAvB;AACA,YAAIC,MAAM,KAAKpB,WAAL,CAAiBmB,MAA3B;AACA,aAAKnB,WAAL,CAAiBmB,MAAjB,GAA0B,EAA1B;AACA,aAAKf,KAAL,CAAWiB,OAAX,CAAmBD,GAAnB,EAAwBF,KAAxB;AACA;AACH,KAnCI;;AAqCLI,wBAAoB,8BAAY;AAC5B,aAAKlB,KAAL,CAAWmB,KAAX;AACA,aAAKnB,KAAL,CAAWiB,OAAX,CAAmB,SAAnB,EAA8B,GAA9B;AACA,aAAKjB,KAAL,CAAWiB,OAAX,CAAmB,WAAnB,EAAgC,IAAhC;AACA,aAAKjB,KAAL,CAAWiB,OAAX,CAAmB,WAAnB,EAAgC,GAAhC;AACA,aAAKjB,KAAL,CAAWiB,OAAX,CAAmB,WAAnB,EAAgC,IAAhC;AACA,aAAKjB,KAAL,CAAWoB,UAAX,CAAsB,OAAtB;AACA,YAAIC,QAAQ,CAAZ;;AAEA,aAAK,IAAMC,QAAX,IAAuB,KAAKtB,KAA5B,EAAmC;AAC/B,gBAAIsB,aAAa,QAAjB,EAA2B;AAC3BD;AACAlC,eAAGoC,IAAH,CAAQF,KAAR;AACA,gBAAI,KAAKpB,UAAL,GAAkBuB,SAAS,KAAKxB,KAAL,CAAWsB,QAAX,CAAT,CAAtB,EAAsD;AAClD,qBAAKrB,UAAL,GAAkBuB,SAAS,KAAKxB,KAAL,CAAWsB,QAAX,CAAT,CAAlB;AACA,qBAAKpB,WAAL,GAAmBoB,QAAnB;AACH;AACD,gBAAIG,OAAOtC,GAAGuC,WAAH,CAAe,KAAKhC,UAApB,CAAX;AACA,iBAAKF,OAAL,CAAamC,QAAb,CAAsBF,IAAtB;AACAA,iBAAKG,YAAL,CAAkBzC,GAAGY,KAArB,EAA4BgB,MAA5B,kBAAkDM,KAAlD,oBAAsEC,QAAtE,UAAmF,KAAKtB,KAAL,CAAWsB,QAAX,CAAnF;AACH;AACJ,KA1DI;;AA4DLO,UA5DK,oBA4DI;AACL,aAAK7B,KAAL,GAAab,GAAG2C,GAAH,CAAOC,YAApB;AACA,aAAKb,kBAAL;AACH,KA/DI;AAiELc,SAjEK,mBAiEG,CAEP;AAnEI;;AAqEL;AArEJ","file":"leaderBoardScript.js","sourceRoot":"..\\..\\..\\..\\assets\\script","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] https://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nconst Emitter = require('mEmitter');\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        content: cc.Node,\r\n        itemPrefab: cc.Prefab,\r\n        userNameBox: cc.EditBox,\r\n        score: cc.Label,\r\n        _data: null,\r\n        _bestScore: 0,\r\n        _bestPlayer: '',\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onClickLeaderBoardButton: function () {\r\n        this.node.active = true;\r\n        this.node.opacity = 0;\r\n        this.node.runAction(cc.fadeIn(0.25, 255));\r\n        // this._updateLeaderBoard();\r\n    },\r\n\r\n    onClickReturn: function () {\r\n        this.node.runAction(cc.sequence(\r\n            cc.fadeOut(0.25, 0),\r\n            cc.callFunc(() => this.node.active = false),\r\n        ));\r\n    },\r\n\r\n    onClickSave: function () {\r\n        let value = this.score.string;\r\n        let key = this.userNameBox.string;\r\n        this.userNameBox.string = '';\r\n        this._data.setItem(key, value);\r\n        return;\r\n    },\r\n\r\n    _updateLeaderBoard: function () {\r\n        this._data.clear();\r\n        this._data.setItem('kakalak', 200);\r\n        this._data.setItem('kakalak11', 2054);\r\n        this._data.setItem('kakalak22', 300);\r\n        this._data.setItem('kakalak33', 3000);\r\n        this._data.removeItem('debug');\r\n        let index = 0;\r\n\r\n        for (const property in this._data) {\r\n            if (property === 'length') return;\r\n            index++;\r\n            cc.warn(index);\r\n            if (this._bestScore < parseInt(this._data[property])) {\r\n                this._bestScore = parseInt(this._data[property]);\r\n                this._bestPlayer = property;\r\n            }\r\n            let item = cc.instantiate(this.itemPrefab);\r\n            this.content.addChild(item);\r\n            item.getComponent(cc.Label).string = `__________${index}__________\\n${property}\\n${this._data[property]}`;\r\n        }\r\n    },\r\n\r\n    onLoad() {\r\n        this._data = cc.sys.localStorage;\r\n        this._updateLeaderBoard();\r\n    },\r\n\r\n    start() {\r\n\r\n    },\r\n\r\n    // update (dt) {},\r\n});\r\n"]}