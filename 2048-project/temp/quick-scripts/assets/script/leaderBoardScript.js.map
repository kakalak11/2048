{"version":3,"sources":["leaderBoardScript.js"],"names":["Emitter","require","cc","Class","extends","Component","properties","content","Node","itemPrefab","Prefab","userNameBox","EditBox","score","Label","_highScoreList","_data","_bestScore","_bestPlayer","onClickLeaderBoardButton","node","active","opacity","runAction","fadeIn","onClickReturn","sequence","fadeOut","callFunc","onClickSave","value","string","push","setItem","length","_loadData","index","getItem","log","_sortData","forEach","element","array","number","parseInt","split","_temp","_updateLeaderBoard","removeAllChildren","item","instantiate","label","getComponent","addChild","onLoad","sys","localStorage","start"],"mappings":"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","file":"leaderBoardScript.js","sourceRoot":"../../../../assets/script","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/class.html\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/class.html\n// Learn Attribute:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] https://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\n\nconst Emitter = require('mEmitter');\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        content: cc.Node,\n        itemPrefab: cc.Prefab,\n        userNameBox: cc.EditBox,\n        score: cc.Label,\n        _highScoreList: [],\n        _data: null,\n        _bestScore: 0,\n        _bestPlayer: '',\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onClickLeaderBoardButton: function () {\n        this.node.active = true;\n        this.node.opacity = 0;\n        this.node.runAction(cc.fadeIn(0.25, 255));\n        // this._updateLeaderBoard();\n    },\n\n    onClickReturn: function () {\n        this.node.runAction(cc.sequence(\n            cc.fadeOut(0.25, 0),\n            cc.callFunc(() => this.node.active = false),\n        ));\n    },\n\n    onClickSave: function () {\n        let value = `${this.userNameBox.string} : ${this.score.string}`;\n        this._highScoreList.push(value);\n        this.userNameBox.string = '';\n        this._data.setItem(this._highScoreList.length, value);\n        return;\n    },\n\n    _loadData: function () {\n        for (let index = 0; index < this._data.length - 1; index++) {\n            this._highScoreList.push(this._data.getItem(index));\n        }\n        cc.log(this._highScoreList);\n        this._sortData();\n        return;\n    },\n\n    _sortData: function () {\n        this._highScoreList.forEach((element, index, array) => {\n            this.number = parseInt(element.split(':')[1]);\n            if (this._bestScore < this.number) {\n                this._temp = array[0];\n                array[0] = element;\n                element = this._temp;\n                this._bestScore = this.number;\n                this._bestPlayer = element.split(':')[0];\n                return;\n            }\n        });\n        this._highScoreList[0] = `${this._bestPlayer} : ${this._bestScore}`;\n        this._updateLeaderBoard();\n    },\n\n    _updateLeaderBoard: function () {\n        this.content.removeAllChildren();\n        this._highScoreList.forEach((element, index) => {\n            let item = cc.instantiate(this.itemPrefab);\n            let label = item.getComponent(cc.Label);\n            this.content.addChild(item);\n            if (index === 0) {\n                label.string = `_____UWU_____${index + 1}_____UWU_____\\n${element.split(':')[0]}\\n${element.split(':')[1]}`;\n                return;\n            }\n            label.string = `__________${index + 1}__________\\n${element.split(':')[0]}\\n${element.split(':')[1]}`;\n        })\n    },\n\n    onLoad() {\n        this._data = cc.sys.localStorage;\n        cc.log(this._data);\n        this._loadData();\n    },\n\n    start() {\n\n    },\n\n    // update (dt) {},\n});\n"]}