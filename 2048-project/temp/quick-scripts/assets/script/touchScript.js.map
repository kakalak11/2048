{"version":3,"sources":["touchScript.js"],"names":["Emitter","require","cc","Class","extends","Component","properties","touchNode","Node","_xDelta","_yDelta","_canTouch","_onTouchStart","event","instance","emit","node","on","delta","touch","getDelta","x","y","once","xDelta","getLocation","getStartLocation","yDelta","log","Math","abs","onLoad","value","start"],"mappings":"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","file":"touchScript.js","sourceRoot":"../../../../assets/script","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/class.html\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/class.html\n// Learn Attribute:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] https://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\n\n\nconst Emitter = require('mEmitter');\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        touchNode: cc.Node,\n        _xDelta: 0,\n        _yDelta: 0,\n        _canTouch: true,\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    _onTouchStart: function (event) {\n        Emitter.instance.emit('sound', 'swipe');\n        this.node.emit('setInput', true);\n        if (!this._canTouch) return;\n        this._canTouch = false;\n        this.touchNode.on('touchmove', function (event) {\n            var delta = event.touch.getDelta();\n            this._xDelta += delta.x;\n            this._yDelta += delta.y;\n        }, this);\n\n        this.touchNode.once('touchend', function (event) {\n            let xDelta = event.getLocation().x - event.getStartLocation().x;\n            let yDelta = event.getLocation().y - event.getStartLocation().y;\n            cc.log('x delta is: ', xDelta, ', y delta is: ', yDelta);\n            if (Math.abs(xDelta) === 0 && Math.abs(yDelta) === 0) {\n                this._canTouch = true;\n                return;\n            }\n            if (Math.abs(xDelta) > Math.abs(yDelta)) {\n                if (xDelta > 0) {\n                    this.node.emit('moveRow', true);\n                    cc.log('move right');\n                } else {\n                    this.node.emit('moveRow', false);\n                    cc.log('move left');\n                }\n            } else {\n                if (yDelta > 0) {\n                    this.node.emit('moveCollumn', false);\n                    cc.log('move down');\n                } else {\n                    this.node.emit('moveCollumn', true);\n                    cc.log('move up');\n                }\n            }\n            this._canTouch = true;\n            return;\n        }, this);\n\n        this.touchNode.on('touchcancel', (event) => {\n            this._canTouch = true;\n            return;\n        }, this);\n    },\n\n    onLoad() {\n        this.touchNode.on('touchstart', this._onTouchStart, this);\n        this.node.on('canMove', (value = true) => this._canTouch = value, this);\n        this.node.on('setInput', (touch) => {\n            if (!touch) this._canTouch = false;\n        }, this);\n    },\n\n    start() {\n\n    },\n\n    // update (dt) {},\n});\n"]}