{"version":3,"sources":["touchScript.js"],"names":["cc","Class","extends","Component","properties","touchNode","Node","_xDelta","_yDelta","_canTouch","_onTouchStart","event","node","emit","on","delta","touch","getDelta","x","y","once","log","Math","abs","onLoad","value","start"],"mappings":"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","file":"touchScript.js","sourceRoot":"..\\..\\..\\..\\assets\\script","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] https://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        touchNode: cc.Node,\r\n        _xDelta: 0,\r\n        _yDelta: 0,\r\n        _canTouch: true,\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    _onTouchStart: function (event) {\r\n        this.node.emit('setInput', true);\r\n        if (!this._canTouch) return;\r\n        this._canTouch = false;\r\n        this.touchNode.on('touchmove', function (event) {\r\n            var delta = event.touch.getDelta();\r\n            this._xDelta += delta.x;\r\n            this._yDelta += delta.y;\r\n        }, this);\r\n\r\n        this.touchNode.once('touchend', function (event) {\r\n            cc.log(this._xDelta, this._yDelta);\r\n            if (this._xDelta === 0 && this._yDelta === 0) {\r\n                this._canTouch = true;\r\n                return;\r\n            }\r\n            if (Math.abs(this._xDelta) < 50 && Math.abs(this._yDelta) < 50) {\r\n                this._xDelta = 0;\r\n                this._yDelta = 0;\r\n                this._canTouch = true;\r\n                return;\r\n            }\r\n            if (Math.abs(this._xDelta) > Math.abs(this._yDelta) && this._xDelta < 0) {\r\n                this.node.emit('moveRow', false);\r\n                cc.log('move right');\r\n            }\r\n            if (Math.abs(this._xDelta) > Math.abs(this._yDelta) && this._xDelta > 0) {\r\n                this.node.emit('moveRow', true);\r\n                cc.log('move left');\r\n            }\r\n            if (Math.abs(this._xDelta) < Math.abs(this._yDelta) && this._yDelta < 0) {\r\n                this.node.emit('moveCollumn', true);\r\n                cc.log('move down');\r\n            }\r\n            if (Math.abs(this._xDelta) < Math.abs(this._yDelta) && this._yDelta > 0) {\r\n                this.node.emit('moveCollumn', false);\r\n                cc.log('move up');\r\n            }\r\n            this._xDelta = 0;\r\n            this._yDelta = 0;\r\n            return;\r\n        }, this);\r\n\r\n        this.touchNode.on('touchcancel', (event) => {\r\n            this._canTouch = true;\r\n            this._xDelta = 0;\r\n            this._yDelta = 0;\r\n            return;\r\n        }, this);\r\n    },\r\n\r\n    onLoad() {\r\n        this.touchNode.on('touchstart', this._onTouchStart, this);\r\n        // this.touchNode.on('touchstart', () => {\r\n        //     cc.log('touch');\r\n        //     cc.log(this);\r\n        // }, this);\r\n        this.node.on('canMove', (value = true) => this._canTouch = value, this);\r\n        this.node.on('setInput', (touch) => {\r\n            if (!touch) this._canTouch = false;\r\n        }, this)\r\n    },\r\n\r\n    start() {\r\n\r\n    },\r\n\r\n    // update (dt) {},\r\n});\r\n"]}