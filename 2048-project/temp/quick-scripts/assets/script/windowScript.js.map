{"version":3,"sources":["windowScript.js"],"names":["cc","Class","extends","Component","properties","menuNode","Node","score","bestScoreNumber","Label","gameBoard","leaderBoard","winBoard","loseBoard","_playing","onClickPlayButton","node","runAction","moveTo","easing","easeExponentialInOut","getComponent","_setupGrid","onClickMenuButton","_scoreUpdate","gameMatrix","_tilesMatrix","flat","string","scoreNumber","forEach","element","number","_win","emit","_lose","onClickReturnButton","_reset","onLoad","on","leaderBoardScript","String","_bestScore","start"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,kBAAUL,GAAGM,IADL;AAERC,eAAOP,GAAGM,IAFF;AAGRE,yBAAiBR,GAAGS,KAHZ;AAIRC,mBAAWV,GAAGM,IAJN;AAKRK,qBAAaX,GAAGM,IALR;AAMRM,kBAAUZ,GAAGM,IANL;AAORO,mBAAWb,GAAGM,IAPN;AAQRQ,kBAAU;AARF,KAHP;;AAcL;;AAEAC,uBAAmB,6BAAY;AAC3B,aAAKC,IAAL,CAAUC,SAAV,CAAoBjB,GAAGkB,MAAH,CAAU,GAAV,EAAe,CAAf,EAAkB,CAAlB,EAAqBC,MAArB,CAA4BnB,GAAGoB,oBAAH,CAAwB,GAAxB,CAA5B,CAApB;AACA,aAAKV,SAAL,CAAeW,YAAf,CAA4B,WAA5B,EAAyCC,UAAzC,CAAoD,KAAKR,QAAzD;AACA,aAAKA,QAAL,GAAgB,IAAhB;AACH,KApBI;;AAsBLS,uBAAmB,6BAAY;AAC3B,aAAKP,IAAL,CAAUC,SAAV,CAAoBjB,GAAGkB,MAAH,CAAU,GAAV,EAAe,CAAC,GAAhB,EAAqB,CAArB,EAAwBC,MAAxB,CAA+BnB,GAAGoB,oBAAH,CAAwB,GAAxB,CAA/B,CAApB;AACH,KAxBI;;AA0BLI,kBAAc,wBAAY;AAAA;;AACtB,aAAKC,UAAL,GAAkB,KAAKf,SAAL,CAAeW,YAAf,CAA4B,WAA5B,EAAyCK,YAAzC,CAAsDC,IAAtD,EAAlB;AACA,YAAI,CAAC,KAAKF,UAAV,EAAsB;AAClB,iBAAKlB,KAAL,CAAWc,YAAX,CAAwB,UAAxB,EAAoCO,MAApC,GAA6C,CAA7C;AACA;AACH;AACD,aAAKC,WAAL,GAAmB,CAAnB;AACA,aAAKJ,UAAL,CAAgBK,OAAhB,CAAwB;AAAA,mBAAW,MAAKD,WAAL,IAAoBE,QAAQV,YAAR,CAAqB,aAArB,EAAoCW,MAAnE;AAAA,SAAxB;AACA,aAAKzB,KAAL,CAAWc,YAAX,CAAwB,UAAxB,EAAoCO,MAApC,GAA6C,KAAKC,WAAlD;AACA;AACH,KApCI;;AAsCLI,UAAM,gBAAY;AACd,aAAKrB,QAAL,CAAcsB,IAAd,CAAmB,UAAnB;AACA,aAAKpB,QAAL,GAAgB,KAAhB;AACH,KAzCI;;AA2CLqB,WAAO,iBAAY;AACf,aAAKtB,SAAL,CAAeqB,IAAf,CAAoB,WAApB;AACA,aAAKpB,QAAL,GAAgB,KAAhB;AACH,KA9CI;;AAgDLsB,yBAAqB,+BAAY;AAC7B,aAAK1B,SAAL,CAAeW,YAAf,CAA4B,WAA5B,EAAyCgB,MAAzC;AACA;AACH,KAnDI;;AAqDLC,UArDK,oBAqDI;AACL,aAAKtB,IAAL,CAAUuB,EAAV,CAAa,aAAb,EAA4B,KAAKf,YAAjC,EAA+C,IAA/C;AACA,aAAKR,IAAL,CAAUuB,EAAV,CAAa,KAAb,EAAoB,KAAKN,IAAzB,EAA+B,IAA/B;AACA,aAAKjB,IAAL,CAAUuB,EAAV,CAAa,MAAb,EAAqB,KAAKJ,KAA1B,EAAiC,IAAjC;AACA,aAAKK,iBAAL,GAAyB,KAAK7B,WAAL,CAAiBU,YAAjB,CAA8B,mBAA9B,CAAzB;AACA;AACA,aAAKb,eAAL,CAAqBoB,MAArB,GAA8Ba,OAAO,KAAKD,iBAAL,CAAuBE,UAA9B,CAA9B;AACH,KA5DI;AA8DLC,SA9DK,mBA8DG,CAEP;AAhEI;;AAkEL;AAlEJ","file":"windowScript.js","sourceRoot":"..\\..\\..\\..\\assets\\script","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] https://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        menuNode: cc.Node,\r\n        score: cc.Node,\r\n        bestScoreNumber: cc.Label,\r\n        gameBoard: cc.Node,\r\n        leaderBoard: cc.Node,\r\n        winBoard: cc.Node,\r\n        loseBoard: cc.Node,\r\n        _playing: null,\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onClickPlayButton: function () {\r\n        this.node.runAction(cc.moveTo(0.5, 0, 0).easing(cc.easeExponentialInOut(0.5)))\r\n        this.gameBoard.getComponent('gameBoard')._setupGrid(this._playing);\r\n        this._playing = true;\r\n    },\r\n\r\n    onClickMenuButton: function () {\r\n        this.node.runAction(cc.moveTo(0.5, -500, 0).easing(cc.easeExponentialInOut(0.5)));\r\n    },\r\n\r\n    _scoreUpdate: function () {\r\n        this.gameMatrix = this.gameBoard.getComponent('gameBoard')._tilesMatrix.flat();\r\n        if (!this.gameMatrix) {\r\n            this.score.getComponent('cc.Label').string = 0;\r\n            return;\r\n        }\r\n        this.scoreNumber = 0;\r\n        this.gameMatrix.forEach(element => this.scoreNumber += element.getComponent('tilesScript').number);\r\n        this.score.getComponent('cc.Label').string = this.scoreNumber;\r\n        return;\r\n    },\r\n\r\n    _win: function () {\r\n        this.winBoard.emit('winBoard');\r\n        this._playing = false;\r\n    },\r\n\r\n    _lose: function () {\r\n        this.loseBoard.emit('loseBoard');\r\n        this._playing = false;\r\n    },\r\n\r\n    onClickReturnButton: function () {\r\n        this.gameBoard.getComponent('gameBoard')._reset();\r\n        return;\r\n    },\r\n\r\n    onLoad() {\r\n        this.node.on('updateScore', this._scoreUpdate, this);\r\n        this.node.on('win', this._win, this);\r\n        this.node.on('lose', this._lose, this);\r\n        this.leaderBoardScript = this.leaderBoard.getComponent('leaderBoardScript');\r\n        // this.leaderBoardScript.onLoad();\r\n        this.bestScoreNumber.string = String(this.leaderBoardScript._bestScore);\r\n    },\r\n\r\n    start() {\r\n\r\n    },\r\n\r\n    // update (dt) {},\r\n});\r\n"]}